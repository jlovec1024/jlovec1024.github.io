<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Gitæ¸…ç†commitä¸­å†å²æäº¤çš„å¤§æ–‡ä»¶ - äº‘+ç¤¾åŒº - è…¾è®¯äº‘</title>
      <link href="/2021/08/19/git-qing-li-commit-zhong-li-shi-ti-jiao-de-da-wen-jian-yun-she-qu-teng-xun-yun/"/>
      <url>/2021/08/19/git-qing-li-commit-zhong-li-shi-ti-jiao-de-da-wen-jian-yun-she-qu-teng-xun-yun/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ–‡ç« æ—¶é—´ï¼š2019 å¹´ 11 æœˆ 10 æ—¥ 14:02:59 è§£å†³é—®é¢˜ï¼šæ¸…ç† Git ä¸­æ¯”è¾ƒå¤§çš„æ–‡ä»¶ï¼Œä¸»è¦é’ˆå¯¹å†å²è®°å½•è¿›è¡Œæ¸…ç† psï¼šå› ä¸º Git å¯ä»¥æ¢å¤ç‰ˆæœ¬ï¼Œæ‰€æœ‰å†å²æäº¤è¿‡çš„è¾ƒå¤§çš„æ–‡ä»¶ï¼Œä¹Ÿä¼šè¢«ä¿å­˜ä¸‹æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦â€¦â€¦xx å—¯ï¼Œä½ æ‡‚çš„ã€‚</p></blockquote><h4 id="è¿™é‡Œæ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸‹é¢æ–¹æ³•ä¸»è¦ä»‹ç»äº†å…¶ä¸­ä¸€ç§"><a href="#è¿™é‡Œæ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸‹é¢æ–¹æ³•ä¸»è¦ä»‹ç»äº†å…¶ä¸­ä¸€ç§" class="headerlink" title="è¿™é‡Œæ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸‹é¢æ–¹æ³•ä¸»è¦ä»‹ç»äº†å…¶ä¸­ä¸€ç§"></a>è¿™é‡Œæ–¹æ³•æœ‰ä¸¤ç§ï¼Œä¸‹é¢æ–¹æ³•ä¸»è¦ä»‹ç»äº†å…¶ä¸­ä¸€ç§</h4><h2 id="æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶çš„å¤§å°"><a href="#æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶çš„å¤§å°" class="headerlink" title="æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶çš„å¤§å°"></a>æŸ¥çœ‹ç›®å½•ä¸‹çš„æ–‡ä»¶çš„å¤§å°</h2><pre><code>git count\-objects \-v # æŸ¥çœ‹ git ç›¸å…³æ–‡ä»¶å ç”¨çš„ç©ºé—´du \-sh .git # æŸ¥çœ‹ .git æ–‡ä»¶å¤¹å ç”¨ç£ç›˜ç©ºé—´du \-d 1 \-h  # åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶çš„å¤§å°</code></pre><p>du æ˜¯ linux çš„åŸºç¡€å‘½ä»¤ï¼Œå¾ˆå¤šç”¨æ³•ï¼Œè¯¦æƒ…è‡ªå·±å»æŸ¥æ‰¾å…¶ä»–æ–‡æ¡£ã€‚ å› ä¸º git çš„å†å²æ–‡ä»¶éƒ½æ˜¯å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œçš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢å‘½ä»¤å¯ä»¥æ‰¾å‡ºæ’åå‰äº”çš„æ–‡ä»¶</p><pre><code>git verify\-pack \-v .git/objects/pack/pack\-\*.idx | sort \-k 3 \-g | tail \-5</code></pre><h2 id="æ–¹æ³•ä¸€-çº¯æ‰‹åŠ¨ï¼ˆå°ç±³-æ­¥æªï¼‰çš„æ–¹æ³•"><a href="#æ–¹æ³•ä¸€-çº¯æ‰‹åŠ¨ï¼ˆå°ç±³-æ­¥æªï¼‰çš„æ–¹æ³•" class="headerlink" title="æ–¹æ³•ä¸€ çº¯æ‰‹åŠ¨ï¼ˆå°ç±³ + æ­¥æªï¼‰çš„æ–¹æ³•"></a>æ–¹æ³•ä¸€ çº¯æ‰‹åŠ¨ï¼ˆå°ç±³ + æ­¥æªï¼‰çš„æ–¹æ³•</h2><p>ç›´æ¥å‚è€ƒè¿™ç¯‡æ•™ç¨‹å³å¯ï¼Œå†™çš„æ¯”è¾ƒå…¨é¢ï¼Œæ¯”ç™¾åº¦ä¸Šå¾ˆå¤šåºŸæ•™ç¨‹å¥½å¤šäº†ã€‚ è®°ä¸€æ¬¡åˆ é™¤ Git è®°å½•ä¸­çš„å¤§æ–‡ä»¶çš„è¿‡ç¨‹ï¼š<code>https://www.hollischuang.com/archives/1708</code></p><h2 id="æ–¹æ³•äºŒ-å·¥å…·åŒ–ï¼ˆè‡ªåŠ¨æœºæªï¼‰"><a href="#æ–¹æ³•äºŒ-å·¥å…·åŒ–ï¼ˆè‡ªåŠ¨æœºæªï¼‰" class="headerlink" title="æ–¹æ³•äºŒ å·¥å…·åŒ–ï¼ˆè‡ªåŠ¨æœºæªï¼‰"></a>æ–¹æ³•äºŒ å·¥å…·åŒ–ï¼ˆè‡ªåŠ¨æœºæªï¼‰</h2><p>å·¥å…·åç§°ï¼šBFG å·¥å…·åœ°å€ï¼š<code>https://rtyley.github.io/bfg-repo-cleaner/</code></p><h3 id="ç¬¬ä¸€æ­¥-ä¸‹è½½åŒ…æ–‡ä»¶"><a href="#ç¬¬ä¸€æ­¥-ä¸‹è½½åŒ…æ–‡ä»¶" class="headerlink" title="ç¬¬ä¸€æ­¥ ä¸‹è½½åŒ…æ–‡ä»¶"></a>ç¬¬ä¸€æ­¥ ä¸‹è½½åŒ…æ–‡ä»¶</h3><p>ç›´æ¥å®˜ç½‘ä¸‹è½½å³å¯ï¼Œbfg-1.13.0.jar å°†ç¨‹åºåŒ…æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œé‡å‘½åä¸º bfg.jar</p><h3 id="ç¬¬äºŒæ­¥-å…‹éš†ä»“åº“"><a href="#ç¬¬äºŒæ­¥-å…‹éš†ä»“åº“" class="headerlink" title="ç¬¬äºŒæ­¥ å…‹éš†ä»“åº“"></a>ç¬¬äºŒæ­¥ å…‹éš†ä»“åº“</h3><p>clone è‡ªå·±çš„ git repoï¼Œä½¿ç”¨ â€“mirror å‚æ•°</p><pre><code>git clone \--mirror http://192.168.1.199:8099/hcses/hcses\-warehouse.git</code></pre><h3 id="ç¬¬ä¸‰æ­¥-æ¸…é™¤å¤§æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹ï¼Œéšç§æ–‡ä»¶"><a href="#ç¬¬ä¸‰æ­¥-æ¸…é™¤å¤§æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹ï¼Œéšç§æ–‡ä»¶" class="headerlink" title="ç¬¬ä¸‰æ­¥ æ¸…é™¤å¤§æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹ï¼Œéšç§æ–‡ä»¶"></a>ç¬¬ä¸‰æ­¥ æ¸…é™¤å¤§æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹ï¼Œéšç§æ–‡ä»¶</h3><p>è¿™é‡Œå®˜ç½‘ç»™å‡ºçš„å‘½ä»¤ï¼Œå¯èƒ½ä¼šä¸è¡Œï¼Œæˆ‘ä»¬ç»§ç»­æ·»åŠ å‚æ•°ã€‚ åˆ é™¤æ–‡ä»¶å’Œåˆ é™¤æ–‡ä»¶å¤¹çš„å‘½ä»¤</p><pre><code>java \-jar bfg.jar \--delete\-files æˆ‘æ˜¯å•ä¸ªæ–‡ä»¶åå­— hcses\-warehouse.git \--no\-blob\-protectionjava \-jar bfg.jar \--delete\-folders æˆ‘æ˜¯æ–‡ä»¶å¤¹çš„åå­— hcses\-warehouse.git \--no\-blob\-protection</code></pre><h3 id="ç¬¬å››æ­¥-æ¸…ç†ä¸éœ€è¦çš„æ•°æ®"><a href="#ç¬¬å››æ­¥-æ¸…ç†ä¸éœ€è¦çš„æ•°æ®" class="headerlink" title="ç¬¬å››æ­¥ æ¸…ç†ä¸éœ€è¦çš„æ•°æ®"></a>ç¬¬å››æ­¥ æ¸…ç†ä¸éœ€è¦çš„æ•°æ®</h3><p>åœ¨å®Œæˆä¸Šé¢çš„æŒ‡ä»¤åï¼Œå®é™…ä¸Šè¿™äº›æ•°æ® / æ–‡ä»¶å¹¶æ²¡æœ‰è¢«ç›´æ¥åˆ é™¤ï¼Œè¿™æ—¶å€™éœ€è¦ä½¿ç”¨ git gc æŒ‡ä»¤æ¥æ¸…é™¤ã€‚</p><pre><code>cd hcses\-warehouse.gitgit reflog expire \--expire\=now \--all &amp;&amp; git gc \--prune\=now \--aggressive</code></pre><h3 id="ç¬¬äº”æ­¥-æ¨é€åˆ°-GitHub"><a href="#ç¬¬äº”æ­¥-æ¨é€åˆ°-GitHub" class="headerlink" title="ç¬¬äº”æ­¥ æ¨é€åˆ° GitHub"></a>ç¬¬äº”æ­¥ æ¨é€åˆ° GitHub</h3><pre><code>git push</code></pre><p>è¿™é‡Œæ™®é€šæ¨é€å¯èƒ½ä¹Ÿä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¼ºåˆ¶æ¨é€ã€‚</p><pre><code>git push \--force</code></pre><p>æœ¬æ–‡å‚ä¸<a href="https://cloud.tencent.com/developer/support-plan">è…¾è®¯äº‘è‡ªåª’ä½“åˆ†äº«è®¡åˆ’</a>ï¼Œæ¬¢è¿æ­£åœ¨é˜…è¯»çš„ä½ ä¹ŸåŠ å…¥ï¼Œä¸€èµ·åˆ†äº«ã€‚</p><p><a href="https://cloud.tencent.com/developer/article/1536481">https://cloud.tencent.com/developer/article/1536481</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>macbookï¼š  The headers or library files could not be found for zlib</title>
      <link href="/2021/08/15/macbook-the-headers-or-library-files-could-not-be-found-for-zlib/"/>
      <url>/2021/08/15/macbook-the-headers-or-library-files-could-not-be-found-for-zlib/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜ï¼š-python-æ— æ³•å®‰è£…-pillow-7-1-2"><a href="#é—®é¢˜ï¼š-python-æ— æ³•å®‰è£…-pillow-7-1-2" class="headerlink" title="é—®é¢˜ï¼š python æ— æ³•å®‰è£… pillow==7.1.2"></a>é—®é¢˜ï¼š python æ— æ³•å®‰è£… pillow==7.1.2</h1><blockquote><p>æŠ¥é”™ï¼š The headers or library files could not be found for zlib,</p></blockquote><h1 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h1><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æŸ¥æ‰¾ zlib.h</span><span class="token function">find</span>  /Library/Developer/CommandLineTools/ -name <span class="token string">"*zlib*"</span></code></pre><p><img src="https://cdn.nlark.com/yuque/0/2021/png/527662/1628993156344-63af1a6e-df07-4fa7-b350-a6359073c01f.png#clientId=ud2a77933-c0e9-4&amp;from=paste&amp;height=582&amp;id=u12af3e8d&amp;margin=%5Bobject%20Object%5D&amp;name=image.png&amp;originHeight=1164&amp;originWidth=2866&amp;originalType=binary%E2%88%B6=1&amp;size=798788&amp;status=done&amp;style=none&amp;taskId=u0dbee416-4bd3-4b17-b540-23d50ba8957&amp;width=1433" alt="image.png"></p><p>åˆ›å»ºè½¯è¿æ¥</p><pre class=" language-bash"><code class="language-bash"><span class="token function">ln</span> -s /Library/Developer/CommandLineTools//SDKs/MacOSX11.1.sdk/usr/include/zlib.h /usr/local/include</code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å°‡æ‰“åŒ…å¥½çš„ Helm Chart Push è‡³ Nexus</title>
      <link href="/2021/07/29/jiang-da-bao-hao-de-helm-chart-push-zhi-nexus/"/>
      <url>/2021/07/29/jiang-da-bao-hao-de-helm-chart-push-zhi-nexus/</url>
      
        <content type="html"><![CDATA[<ul><li><p>ç›´æ¥ push</p><ul><li><p>èªæ³•</p><pre><code>helm nexus-push {helm repo åç¨±} {helm chart} -u {å¸³è™Ÿ} -p</code></pre></li></ul><p><a href="https://blog.yowko.com/helm-push-nexus/">https://blog.yowko.com/helm-push-nexus/</a></p></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetes configuration file is group-readable</title>
      <link href="/2021/07/29/kubernetes-configuration-file-is-group-readable/"/>
      <url>/2021/07/29/kubernetes-configuration-file-is-group-readable/</url>
      
        <content type="html"><![CDATA[<pre><code>&gt;&lt;&gt; chmod go-r ~/.kube/config</code></pre><p><a href="https://github.com/helm/helm/issues/9115">https://github.com/helm/helm/issues/9115</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>kubernetes åˆ é™¤namespace åä¸€ç›´å¤„äºTerminatingçŠ¶æ€</title>
      <link href="/2021/06/12/kubernetes-shan-chu-namespace-hou-yi-zhi-chu-yu-terminating-zhuang-tai/"/>
      <url>/2021/06/12/kubernetes-shan-chu-namespace-hou-yi-zhi-chu-yu-terminating-zhuang-tai/</url>
      
        <content type="html"><![CDATA[<p>å‡ºç°æ— æ³•åˆ é™¤çš„æƒ…å†µï¼Œæ˜¯å› ä¸º kubelet é˜»å¡ï¼Œæœ‰å…¶ä»–çš„èµ„æºåœ¨ä½¿ç”¨è¯¥ namespaceï¼Œæ¯”å¦‚ CRD ç­‰ï¼Œå°è¯•é‡å¯ kubeletï¼Œå†åˆ é™¤è¯¥ namespace ä¹Ÿä¸å¥½ä½¿ã€‚</p><p>åœ¨å°è¯•ä»¥ä¸‹å‘½ä»¤å¼ºåˆ¶åˆ é™¤ä¹Ÿä¸å¥½ä½¿ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#!/usr/bin/env bash</span><span class="token keyword">if</span> <span class="token punctuation">[</span> -z <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>  <span class="token keyword">echo</span> <span class="token string">"print input namespace"</span>  <span class="token keyword">exit</span> -1<span class="token keyword">fi</span>kubectl get ns <span class="token variable">$1</span> -ojson <span class="token operator">|</span> jq <span class="token string">'del(.spec.finalizers[0])'</span> <span class="token operator">></span> 0000.jsoncurl -k -H <span class="token string">"Content-Type: application/json"</span> -X PUT --data-binary @0000.json   http://127.0.0.1:8001/api/v1/namespaces/<span class="token variable">$1</span>/finalize<span class="token keyword">echo</span> kubectl delete ns <span class="token variable">$1</span></code></pre><pre class=" language-null"><code class="language-null">kubectl delete ns <terminating-namespace> ```è§£å†³ï¼š1.&nbsp;è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥æŸ¥çœ‹å¤„äºâ€œTerminatingâ€çŠ¶æ€çš„namespaceï¼š```null kubectl get namespaces```2.&nbsp;é€‰æ‹©ä¸€ä¸ªTerminating namespaceï¼Œå¹¶æŸ¥çœ‹namespace ä¸­çš„finalizerã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š```null kubectl get namespace <terminating-namespace> -o yaml```å¾—åˆ°ç±»ä¼¼ä¿¡æ¯å¦‚ä¸‹ï¼š```nullcreationTimestamp: "2019-11-20T15:18:06Z"deletionTimestamp: "2020-01-16T02:50:02Z"name: <terminating-namespace>resourceVersion: "3249493"selfLink: /api/v1/namespaces/knative-eventinguid: f300ea38-c8c2-4653-b432-b66103e412db</code></pre><ol start="3"><li>å¯¼å‡º json æ ¼å¼åˆ° tmp.json:</li></ol><pre class=" language-null"><code class="language-null"> kubectl get namespace <terminating-namespace> -o json >tmp.json</code></pre><ol start="4"><li>ç¼–è¾‘ tmp.josnï¼Œåˆ é™¤ finalizers å­—æ®µçš„å€¼ï¼š</li></ol><pre class=" language-null"><code class="language-null">{    "apiVersion": "v1",    "kind": "Namespace",    "metadata": {        "creationTimestamp": "2021-06-10T01:40:35Z",        "deletionGracePeriodSeconds": 0,        "deletionTimestamp": "2021-06-12T02:56:40Z",        "finalizers": [        ],        "labels": {            "kubesphere.io/namespace": "kubesphere-monitoring-system",            "kubesphere.io/workspace": "system-workspace"        },        "managedFields": [            {                "apiVersion": "v1",                "fieldsType": "FieldsV1",                "fieldsV1": {                    "f:metadata": {                        "f:labels": {                            ".": {},                            "f:kubesphere.io/namespace": {},                            "f:kubesphere.io/workspace": {}                        }                    }                },                "manager": "kubectl",                "operation": "Update",                "time": "2021-06-10T01:40:47Z"            },            {                "apiVersion": "v1",                "fieldsType": "FieldsV1",                "fieldsV1": {                    "f:metadata": {                        "f:finalizers": {                            ".": {},                            "v:\"finalizers.kubesphere.io/namespaces\"": {}                        },                        "f:ownerReferences": {                            ".": {},                            "k:{\"uid\":\"a6a748bd-e55f-4139-b3ff-d50269c969c5\"}": {                                ".": {},                                "f:apiVersion": {},                                "f:blockOwnerDeletion": {},                                "f:controller": {},                                "f:kind": {},                                "f:name": {},                                "f:uid": {}                            }                        }                    }                },                "manager": "controller-manager",                "operation": "Update",                "time": "2021-06-10T01:46:14Z"            },            {                "apiVersion": "v1",                "fieldsType": "FieldsV1",                "fieldsV1": {                    "f:status": {                        "f:phase": {}                    }                },                "manager": "kube-controller-manager",                "operation": "Update",                "time": "2021-06-12T03:01:42Z"            }        ],        "name": "kubesphere-monitoring-system",        "ownerReferences": [            {                "apiVersion": "tenant.kubesphere.io/v1alpha1",                "blockOwnerDeletion": true,                "controller": true,                "kind": "Workspace",                "name": "system-workspace",                "uid": "a6a748bd-e55f-4139-b3ff-d50269c969c5"            }        ],        "resourceVersion": "27410085",        "selfLink": "/api/v1/namespaces/kubesphere-monitoring-system",        "uid": "a148512f-54d3-4443-ae89-91cb97c6d6c2"    },    "spec": {},    "status": {        "conditions": [            {                "lastTransitionTime": "2021-06-12T02:57:16Z",                "message": "All resources successfully discovered",                "reason": "ResourcesDiscovered",                "status": "False",                "type": "NamespaceDeletionDiscoveryFailure"            },            {                "lastTransitionTime": "2021-06-12T02:57:16Z",                "message": "All legacy kube types successfully parsed",                "reason": "ParsedGroupVersions",                "status": "False",                "type": "NamespaceDeletionGroupVersionParsingFailure"            },            {                "lastTransitionTime": "2021-06-12T03:01:42Z",                "message": "All content successfully deleted, may be waiting on finalization",                "reason": "ContentDeleted",                "status": "False",                "type": "NamespaceDeletionContentFailure"            },            {                "lastTransitionTime": "2021-06-12T03:01:42Z",                "message": "All content successfully removed",                "reason": "ContentRemoved",                "status": "False",                "type": "NamespaceContentRemaining"            },            {                "lastTransitionTime": "2021-06-12T02:57:16Z",                "message": "All content-preserving finalizers finished",                "reason": "ContentHasNoFinalizers",                "status": "False",                "type": "NamespaceFinalizersRemaining"            }        ],        "phase": "Terminating"    }}</code></pre><ol start="5"><li>å¼€å¯ proxy :</li></ol><pre class=" language-null"><code class="language-null">kubectl proxy```6\. æ‰“å¼€æ–°çš„terminal çª—å£ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š```nullcurl -k -H "Content-Type: application/json" -X PUT --data-binary @tmp.json http://127.0.0.1:8001/api/v1/namespaces/<terminating-namespace>/finalize</code></pre><p>è¾“å‡ºä»¥ä¸‹ä¿¡æ¯ï¼š</p><pre class=" language-null"><code class="language-null">"selfLink": "/api/v1/namespaces/istio-system/finalize","uid": "2e274537-727f-4a8f-ae8c-397473ed619a","resourceVersion": "3249492","creationTimestamp": "2019-11-20T15:18:06Z","deletionTimestamp": "2020-01-16T02:50:02Z"```7\. æ£€æŸ¥è¯¥namespace æ˜¯å¦è¢«åˆ é™¤ï¼š```null kubectl get namespaces</code></pre><p>ç»§ç»­ä»¥ä¸Šæ­¥éª¤åˆ é™¤å…¶ä»– Terminating namespaceã€‚<br><a href="https://blog.csdn.net/ANXIN997483092/article/details/104233494">https://blog.csdn.net/ANXIN997483092/article/details/104233494</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Maven: POM files without a version in it? - SoftwareEntwicklung Beratung Schulung</title>
      <link href="/2021/05/12/maven-pom-files-without-a-version-in-it-softwareentwicklung-beratung-schulung/"/>
      <url>/2021/05/12/maven-pom-files-without-a-version-in-it-softwareentwicklung-beratung-schulung/</url>
      
        <content type="html"><![CDATA[<p>In Maven 3.2.5 a feature has been introduced to be able to define a version of a Maven project via properties <code>${revision}</code>, <code>${sha1}</code> and <code>${changelist}</code> which unfortuantely had some issues. Those issues have been fixed with <a href="https://maven.apache.org/docs/3.5.0-beta-1/release-notes.html">Maven 3.5.0-beta-1</a> and now you can define the version of a project by using the following properties: <code>${revision}</code>, <code>${sha1}</code> and <code>${changelist}</code>. The example below will show one usage of this:</p><pre><code>  ..  &lt;parent&gt;    &lt;groupId&gt;com.soebes.smpp&lt;/groupId&gt;    &lt;artifactId&gt;smpp&lt;/artifactId&gt;    &lt;version&gt;2.2.1&lt;/version&gt;  &lt;/parent&gt;  &lt;groupId&gt;com.soebes.examples.j2ee&lt;/groupId&gt;  &lt;artifactId&gt;parent&lt;/artifactId&gt;  &lt;version&gt;${revision}&lt;/version&gt;  &lt;packaging&gt;pom&lt;/packaging&gt;  ..</code></pre><p>For the simplicity of this example I use only <code>${revision}</code> but in practice you could combine the different properties.</p><p>The above is a parent of a larger multi module build which contains serveral childs which look like this:</p><pre><code>  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;  &lt;parent&gt;    &lt;groupId&gt;com.soebes.examples.j2ee&lt;/groupId&gt;    &lt;artifactId&gt;parent&lt;/artifactId&gt;    &lt;version&gt;${revision}&lt;/version&gt;  &lt;/parent&gt;  &lt;artifactId&gt;service&lt;/artifactId&gt;  &lt;dependencies&gt;    &lt;dependency&gt;      &lt;groupId&gt;com.soebes.examples.j2ee&lt;/groupId&gt;      &lt;artifactId&gt;service-client&lt;/artifactId&gt;      &lt;version&gt;${project.version}&lt;/version&gt;    &lt;/dependency&gt;    ...   ..</code></pre><p>Based on the above you can now build your project simply by using the following:</p><pre><code>mvn -Drevision=1.0.0-SNAPSHOT clean package</code></pre><p>So there is no need to change the pom files and check them in. But there exists a drawback. You need to define the <code>-Drevision=...</code> for each call of Maven which is not very convenient.</p><p>Starting with <a href="https://maven.apache.org/docs/3.3.1/release-notes.html#JVM_and_Command_Line_Options">Maven 3.3.1</a> you can configure Maven command line parameters in a <code>.mvn/maven.config</code> file which could contain the version definition like this:</p><pre><code>-Drevision=1.0.0-SNAPSHOT</code></pre><p>So with Maven 3.3.1+ you can now simply call Maven via:</p><pre><code>mvn clean package</code></pre><p>More convenient?</p><p>Hmâ€¦ wait a second. What if i like to create a different version? Yes you need to change the <code>.mvn/maven.config</code> file and you should of course checkin the change into your <a href="https://en.wikipedia.org/wiki/Version_control">vcs</a>.</p><p>No. This is not really needed, but recommended. You can overwrite the version which is defined in the <code>.mvn/maven.config</code> via command line like this:</p><pre><code>mvn clean package -Drevision=2.0.0-SNAPSHOT</code></pre><p>What kind of alternatives exist? You can of course define your version of your project as a property within your pom file itself.</p><pre><code>  ..  &lt;parent&gt;    &lt;groupId&gt;com.soebes.smpp&lt;/groupId&gt;    &lt;artifactId&gt;smpp&lt;/artifactId&gt;    &lt;version&gt;2.2.1&lt;/version&gt;  &lt;/parent&gt;  &lt;groupId&gt;com.soebes.examples.j2ee&lt;/groupId&gt;  &lt;artifactId&gt;parent&lt;/artifactId&gt;  &lt;version&gt;${revision}&lt;/version&gt;  &lt;packaging&gt;pom&lt;/packaging&gt;  ..  &lt;properties&gt;    ...    &lt;revision&gt;2.5.0-SNAPSHOT&lt;/revision&gt;  &lt;/properties&gt;</code></pre><p>So this means you do not need to have a supplemental file in your project (like <code>.mvn/maven.config</code>) if you not already have. Also for this property means you can overwrite it via command like this:</p><pre><code>mvn clean package -Drevision=1.8.67-SNAPSHOT</code></pre><h2 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h2><p>But now let us come to an important point of this whole story. What happens if you do an <code>deploy</code> of such things via:</p><pre><code>mvn clean deploy -Drevision=1.8.67-SNAPSHOT</code></pre><p>The result in your repository will be having pom files which contain <code>${revision}</code> which is simply not correct and can cause other issues.</p><p>How to solve this problem? This can simply being achieved by using the <a href="https://www.mojohaus.org/flatten-maven-plugin/">flatten-maven-plugin</a> and adding the following part to your pom file:</p><pre><code>&lt;build&gt;  &lt;plugins&gt;    &lt;plugin&gt;      &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;      &lt;artifactId&gt;flatten-maven-plugin&lt;/artifactId&gt;      &lt;version&gt;1.0.0&lt;/version&gt;      &lt;configuration&gt;        &lt;updatePomFile&gt;true&lt;/updatePomFile&gt;      &lt;/configuration&gt;      &lt;executions&gt;        &lt;execution&gt;          &lt;id&gt;flatten&lt;/id&gt;          &lt;phase&gt;process-resources&lt;/phase&gt;          &lt;goals&gt;            &lt;goal&gt;flatten&lt;/goal&gt;          &lt;/goals&gt;        &lt;/execution&gt;        &lt;execution&gt;          &lt;id&gt;flatten.clean&lt;/id&gt;          &lt;phase&gt;clean&lt;/phase&gt;          &lt;goals&gt;            &lt;goal&gt;clean&lt;/goal&gt;          &lt;/goals&gt;        &lt;/execution&gt;      &lt;/executions&gt;    &lt;/plugin&gt;  &lt;/plugins&gt;&lt;/build&gt;</code></pre><p>By using the above you can now simply do a deploy via:</p><pre><code>mvn clean deploy -Drevision=1.8.67-SNAPSHOT</code></pre><p>and the resulting pom file within the repository will correctly contain the resolved version <code>1.8.67-SNASPHOT</code>.</p><p>This makes it easy to change the version from within a CI/CD tool. For example in Jenkins you can add a parameter like this:</p><pre><code>mvn clean package -Drevision=1.0-${BUILD_NUMBER}-SNAPSHOT</code></pre><p>Or make more sophisticated combinations of the properties <code>${revision}</code>, <code>${sha1}</code> and <code>${changelist}</code>.</p><h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>In the end you are not able to completely ban the versions from your pom file but nearly 100% which means you do not need to repeat it in each of your parent entries in a multi module build.</p><p>Furthermore you have saved a lot of issues related to merge conflicts within branches in Maven builds caused by the different version number for the different branches, cause the version can simply being defined by the CI/CD solution or manually from command line.<br><a href="https://blog.soebes.de/blog/2017/04/02/maven-pom-files-without-a-version-in-it/">https://blog.soebes.de/blog/2017/04/02/maven-pom-files-without-a-version-in-it/</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Adding a Static Route to macOS</title>
      <link href="/2021/04/22/adding-a-static-route-to-macos/"/>
      <url>/2021/04/22/adding-a-static-route-to-macos/</url>
      
        <content type="html"><![CDATA[<p>Executed from Terminal</p><pre><code>sudo route -n add -net 10.0.0.0/8 x.x.x.x</code></pre><p>x.x.x.x is the IP address of the Cisco/Luxul switch with Just Add Power devices attached</p><h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><ol><li><p>For a J+P Network of 10.0.0.0, subnet mask 255.0.0.0 and switch IP 192.168.0.254</p><p>sudo route -n add -net 10.0.0.0/8 192.168.0.254</p></li><li><p>For a J+P Network of 172.16.0.0, subnet mask 255.255.0.0 and switch IP 192.168.1.49</p><p>sudo route -n add -net 172.16.0.0/16 192.168.1.49</p></li></ol><p><a href="https://support.justaddpower.com/kb/article/320-adding-a-static-route-to-macos/">https://support.justaddpower.com/kb/article/320-adding-a-static-route-to-macos/</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>tcpdump linuxæŠ“httpè¯·æ±‚å¤´_a18827547638çš„åšå®¢-CSDNåšå®¢</title>
      <link href="/2021/04/22/tcpdump-linux-zhua-http-qing-qiu-tou-a18827547638-de-bo-ke-csdn-bo-ke/"/>
      <url>/2021/04/22/tcpdump-linux-zhua-http-qing-qiu-tou-a18827547638-de-bo-ke-csdn-bo-ke/</url>
      
        <content type="html"><![CDATA[<p>tcpdump -i eth0 port 80 -s 1024 -l -A<img src="https://images0.cnblogs.com/blog2015/377842/201505/041838087046251.png"><br><a href="https://blog.csdn.net/a18827547638/article/details/85715580">https://blog.csdn.net/a18827547638/article/details/85715580</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>jenkinsåå‘ä»£ç†é…ç½®æœ‰è¯¯é—®é¢˜ä¿®å¤</title>
      <link href="/2021/03/18/jenkins-fan-xiang-dai-li-pei-zhi-you-wu-wen-ti-xiu-fu/"/>
      <url>/2021/03/18/jenkins-fan-xiang-dai-li-pei-zhi-you-wu-wen-ti-xiu-fu/</url>
      
        <content type="html"><![CDATA[<blockquote><p>éœ€è¦ä¸€ä¸ªæŒç»­é›†æˆçš„å·¥å…·ï¼Œæ‰€ä»¥éƒ¨ç½²äº†ä¸€ä¸ª jenkinsã€‚ç”±äºæœåŠ¡å™¨ä¸Šæœ¬èº«å­˜åœ¨ä¸€ä¸ª nginxï¼Œæ‰€ä»¥ jenkins æˆ‘éƒ¨ç½²äº†åå‘ä»£ç†ï¼Œä½†æ˜¯æ¯æ¬¡è®¿é—®åå°éƒ½æœ‰è¿™æ ·ä¸€ä¸ªé”™è¯¯ï¼Œä¸èƒœå…¶çƒ¦ã€‚</p></blockquote><p><code>An error message is displayed in the "Manage Jenkins" page - "It appears that your reverse proxy set up is broken"</code></p><p>å‡ºç°è¿™ä¸ªé”™è¯¯ä»¥åï¼Œæˆ‘ä»¬ç‚¹å‡»æ›´å¤šä¿¡æ¯ï¼Œè¿›åˆ°å®˜ç½‘çš„è§£é‡Šï¼Œçœ‹ä»¥çœ‹åˆ°æœ‰è¿™ä¹ˆä¸€ä¸ªè­¦å‘Šï¼š</p><blockquote><p>Be sure to set the X-Forwarded-Proto header if your reverse proxy is accessed via HTTPS and then Jenkins itself is accessed via HTTP i.e. proxying HTTPS to HTTP. è¿™å¥è¯çš„å¤§æ¦‚æ„æ€æ˜¯ï¼š å¦‚æœä½ çš„åå‘ä»£ç†ä½¿ç”¨ https è®¿é—®ï¼Œå¹¶ä¸” jenkins ä½¿ç”¨ http è®¿é—®ï¼Œæ˜¯ä»£ç† https åˆ° httpï¼Œé‚£ä¹ˆå°±ä¸€å®šè¦è®¾ç½®<code>X-Forwarded-Proto</code>è¿™ä¸ªè¯·æ±‚å¤´ã€‚</p></blockquote><pre><code>server {  listen 80;  server\_name jenkins.mydomain.com;  location / {    proxy\_pass http://jenkins.localnet:8080;    proxy\_read\_timeout  90;    proxy\_set\_header X\-Forwarded\-Host $host:$server\_port;    proxy\_set\_header X\-Forwarded\-Server $host;    proxy\_set\_header X\-Forwarded\-For $proxy\_add\_x\_forwarded\_for;    proxy\_set\_header X\-Forwarded\-Proto $scheme;    proxy\_set\_header X\-Real\-IP $remote\_addr;  }}</code></pre><p>æ–‡ç« ä½œè€…<strong>ianzhi</strong>, åŸæ–‡åœ°å€ï¼š<a href="https://www.dnote.cn/users/ianzhi/posts/jenkins">https://www.dnote.cn/users/ianzhi/posts/jenkins</a></p><p>æ–‡ç« ç‰ˆæƒå½’ä½œè€…æ‰€æœ‰ï¼Œè½¬è½½è¯·ä¿ç•™æ­¤å£°æ˜ã€‚</p><p>æœ¬æ–‡å‚ä¸<a href="https://cloud.tencent.com/developer/support-plan">è…¾è®¯äº‘è‡ªåª’ä½“åˆ†äº«è®¡åˆ’</a>ï¼Œæ¬¢è¿æ­£åœ¨é˜…è¯»çš„ä½ ä¹ŸåŠ å…¥ï¼Œä¸€èµ·åˆ†äº«ã€‚<br><a href="https://cloud.tencent.com/developer/article/1476876">https://cloud.tencent.com/developer/article/1476876</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨dockeræ­å»ºsmtpæœåŠ¡</title>
      <link href="/2021/03/17/shi-yong-docker-da-jian-smtp-fu-wu/"/>
      <url>/2021/03/17/shi-yong-docker-da-jian-smtp-fu-wu/</url>
      
        <content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´æ­å»º gitlab æœåŠ¡ harbor ä»“åº“ï¼Œéœ€è¦ç”¨åˆ° SMTP æœåŠ¡ç”¨äºå‘é€é‚®ä»¶ï¼Œç”¨çš„è‡ªå·±åŠå…¬é‚®ç®±åšçš„æµ‹è¯•ï¼Œç»™åˆ«äººè‡ªåŠ¨å‘çš„é‚®ä»¶æ˜¾ç¤ºçš„æ˜¯è‡ªå·±çš„é‚®ç®±ã€‚ã€‚ã€‚ä¸æ­£è§„ ğŸ˜‹ ç”³è¯·å…¬å¸çš„å…¬å…±é‚®ç®±æµç¨‹å¤ªç¹çäº† ğŸ˜¥ è¿˜æ˜¯è‡ªå·±æ­å»ºä¸€ä¸ª SMTP æœåŠ¡å§ï¼Œè‡ªå·±åŠ¨æ‰‹ä¸°è¡£è¶³é£Ÿã€‚</p><h2 id="ä¸‹è½½é•œåƒ"><a href="#ä¸‹è½½é•œåƒ" class="headerlink" title="ä¸‹è½½é•œåƒ"></a>ä¸‹è½½é•œåƒ</h2><h2 id="æœåŠ¡ç¼–æ’"><a href="#æœåŠ¡ç¼–æ’" class="headerlink" title="æœåŠ¡ç¼–æ’"></a>æœåŠ¡ç¼–æ’</h2><p>é‡‡ç”¨<code>docker-compose</code>è¿›è¡ŒæœåŠ¡ç¼–æ’ å¯åŠ¨<code>docker-compose up -d</code> or <code>docker-compose -f docker-compose.yml up -d</code></p><h3 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h3><pre class=" language-shell"><code class="language-shell">.â”œâ”€â”€ confâ”‚&nbsp;&nbsp; â”œâ”€â”€ hostsâ”‚&nbsp;&nbsp; â””â”€â”€ resolv.confâ”œâ”€â”€ docker-compose.ymlâ”œâ”€â”€ README.mdâ””â”€â”€ smtp.py1 directory, 5 files</code></pre><h3 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h3><pre class=" language-yml"><code class="language-yml">version: '3'services:  SMTP:    image: namshi/smtp    container_name: SMTP    restart: always    ports:      - "10025:25"    environment:      RELAY_NETWORKS: :0.0.0.0/0    volumes:      - ./conf/hosts:/etc/hosts      - ./conf/resolv.conf:/etc/resolv.conf</code></pre><ul><li>1. ç”¨ä¸ºæ²¡æœ‰åŠ å¯†ï¼Œæ‰€æœ‰å°±æŠŠé»˜è®¤çš„ 25 ç«¯å£ç»™æ¢ä¸ªç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºï¼Œå†è¯´åæ­£æ˜¯å…¬å¸å†…ç½‘ç¯å¢ƒã€‚ã€‚ã€‚ğŸ˜</li><li>2.RELAY_NETWORKS è¿™ä¸ªç¯å¢ƒå˜é‡çš„ä½œç”¨æ˜¯è´Ÿè´£å‘ä»¶è¯·æ±‚çš„æ‹¦æˆªï¼Œå½“è®¾ç½®ä¸º â€œ:0.0.0.0/0â€ æ—¶è¡¨ç¤ºä»»æ„å®¢æˆ·ç«¯çš†å¯å‘èµ·å‘ä»¶è¯·æ±‚ ğŸ˜</li><li>3. æŒ‡å®šä¸»æœºåŸŸï¼Œä¸ç„¶å‘é€å‡ºå»çš„é‚®ä»¶ï¼Œå‘ä»¶äººä¸º<code>Mail Delivery System &lt;Mailer-Daemon@c4de06bf41e5&gt;</code>ï¼Œæ·»åŠ ä¸»æœºååå°±å¯ä»¥ä¼ªé€ å‘ä»¶äººå•¦ ğŸ¤”</li><li>4. é‚®ä»¶å‘é€æœç´¢ goertek.com çš„åŸŸï¼Œå› ä¸ºå…¬å¸å†…ç½‘ DNS çš„ MX é‚®ä»¶è§£æé—®é¢˜ï¼Œåœ¨å†…ç½‘æ‰¾ä¸åˆ°è¦å‘é€ç»™å†…ç½‘é‚®ç®±ç”¨æˆ·çš„ MX è®°å½•ã€‚ã€‚ã€‚å°±æ˜¯å†…ç½‘æ‰¾ä¸åˆ° <a href="mailto:xxx@goertek.com">xxx@goertek.com</a> çš„ MX è®°å½•ï¼Œæ‰€ä»¥æŒ‡å®š DNS è§£æ resolv.confğŸŒš</li></ul><h3 id="hosts"><a href="#hosts" class="headerlink" title="hosts"></a>hosts</h3><h3 id="resolv-conf"><a href="#resolv-conf" class="headerlink" title="resolv.conf"></a>resolv.conf</h3><pre class=" language-txt"><code class="language-txt">search goertek.comoptions ndots:0nameserver 114.114.114.114</code></pre><h3 id="smtp-py"><a href="#smtp-py" class="headerlink" title="smtp.py"></a>smtp.py</h3><p>æµ‹è¯• py</p><pre class=" language-python"><code class="language-python"><span class="token comment" spellcheck="true">#!/usr/bin/python3</span><span class="token keyword">import</span> smtplib<span class="token keyword">from</span> email<span class="token punctuation">.</span>header <span class="token keyword">import</span> Header<span class="token keyword">from</span> email<span class="token punctuation">.</span>mime<span class="token punctuation">.</span>text <span class="token keyword">import</span> MIMETextsender <span class="token operator">=</span> <span class="token string">'willson-wu-shi-ge-dao-lao-ma?@goertek.local'</span>receivers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'willson.wu@goertek.com'</span><span class="token punctuation">]</span>message <span class="token operator">=</span> MIMEText<span class="token punctuation">(</span><span class="token string">'SMTPæœåŠ¡é‚®ä»¶å‘é€æµ‹è¯•...  è¯·å‹¿å›å¤ï¼'</span><span class="token punctuation">,</span> <span class="token string">'plain'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>subject <span class="token operator">=</span> <span class="token string">'SMTPæœåŠ¡é‚®ä»¶æµ‹è¯•'</span>message<span class="token punctuation">[</span><span class="token string">'Subject'</span><span class="token punctuation">]</span> <span class="token operator">=</span> Header<span class="token punctuation">(</span>subject<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token keyword">try</span><span class="token punctuation">:</span>    smtpObj <span class="token operator">=</span> smtplib<span class="token punctuation">.</span>SMTP<span class="token punctuation">(</span><span class="token string">'10.10.192.18'</span><span class="token punctuation">,</span> <span class="token number">10025</span><span class="token punctuation">)</span>    smtpObj<span class="token punctuation">.</span>sendmail<span class="token punctuation">(</span>sender<span class="token punctuation">,</span> receivers<span class="token punctuation">,</span> message<span class="token punctuation">.</span>as_string<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"é‚®ä»¶å‘é€æˆåŠŸ"</span><span class="token punctuation">)</span><span class="token keyword">except</span> smtplib<span class="token punctuation">.</span>SMTPException<span class="token punctuation">:</span>    <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">"Error: æ— æ³•å‘é€é‚®ä»¶"</span><span class="token punctuation">)</span></code></pre><p>æ‰§è¡Œæµ‹è¯•<code>python3 smtp.py</code> äº²æµ‹å†…ç½‘ç¯å¢ƒä¸‹å‘é‚®ä»¶æ²¡é—®é¢˜ï¼æ»¡è¶³éœ€æ±‚ï¼ è¿™ä¸‹æ­å»ºçš„æœåŠ¡éƒ½å¯ä»¥é…ç½® SMTP é‚®ä»¶é€šçŸ¥å•¦ï¼ğŸ‘Œ</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li>é•œåƒ<a href="https://hub.docker.com/r/namshi/smtp">namshi/smtp</a> docker hub ä¸Š pulls 10M+</li><li>é•œåƒä½œè€…çš„<a href="https://github.com/namshi/docker-smtp">GayHub</a></li><li><a href="https://zhuanlan.zhihu.com/p/34162708">ä½¿ç”¨ Docker æ­å»º SMTP æœåŠ¡å™¨</a><br><a href="https://weii.xyz/2019/08/31/docker_install_smtp_server/">https://weii.xyz/2019/08/31/docker_install_smtp_server/</a></li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SSOåœºæ™¯ç³»åˆ—ï¼šå®ç°Microsoft ADåˆ°é˜¿é‡Œäº‘çš„å•ç‚¹ç™»å½•-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº</title>
      <link href="/2021/03/11/sso-chang-jing-xi-lie-shi-xian-microsoft-ad-dao-a-li-yun-de-dan-dian-deng-lu-a-li-yun-kai-fa-zhe-she-qu/"/>
      <url>/2021/03/11/sso-chang-jing-xi-lie-shi-xian-microsoft-ad-dao-a-li-yun-de-dan-dian-deng-lu-a-li-yun-kai-fa-zhe-she-qu/</url>
      
        <content type="html"><![CDATA[<p><strong>ç®€ä»‹ï¼š</strong> åœ¨æ–‡ç« åˆè§„ä¸å®‰å…¨ï¼šé˜¿é‡Œäº‘ä¸ä¼ä¸šèº«ä»½ç³»ç»Ÿçš„é›†æˆä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†é˜¿é‡Œäº‘ä¸ä¼ä¸šèº«ä»½ç³»ç»Ÿçš„é›†æˆï¼Œå¯ä»¥é…ç½®äº‘è´¦å·ä¸‹çš„å­è´¦å·é€šè¿‡ä¼ä¸šèº«ä»½ç³»ç»Ÿç™»é™†ã€‚æœ¬æ–‡ä»¥ Windows Server 2012 R2 ä¸ºä¾‹ï¼Œä»‹ç»å¦‚ä½•é…ç½® Microsoft AD ä½œä¸ºé˜¿é‡Œäº‘çš„å•ç‚¹ç™»å½• IdPã€‚</p><p>ã€æ›´æ–°ï¼šéšç€ RAM 2.0 çš„ä¸Šçº¿ï¼Œé˜¿é‡Œäº‘å®˜ç½‘æä¾›äº†å¯¹ SAML Federation çš„å®˜æ–¹æŠ€æœ¯æ–‡æ¡£ï¼Œè¯»è€…å¯ä»¥å‚è€ƒï¼š<a href="https://help.aliyun.com/document_detail/96239.html">https://help.aliyun.com/document_detail/96239.html</a> ï¼ŒåŒæ—¶æ¨èç”¨æˆ·ä½¿ç”¨ RAM æ§åˆ¶å°è¿›è¡Œé…ç½®ï¼ŒåŸä¼ä¸šæ§åˆ¶å°ï¼ˆå…¬æµ‹ï¼‰å°†é€æ­¥ä¸‹çº¿ã€‘</p><p>åœ¨æ–‡ç« <a href="https://yq.aliyun.com/articles/334240">åˆè§„ä¸å®‰å…¨ï¼šé˜¿é‡Œäº‘ä¸ä¼ä¸šèº«ä»½ç³»ç»Ÿçš„é›†æˆ</a>ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†é˜¿é‡Œäº‘ä¸ä¼ä¸šèº«ä»½ç³»ç»Ÿçš„é›†æˆï¼Œå¯ä»¥é…ç½®äº‘è´¦å·ä¸‹çš„å­è´¦å·é€šè¿‡ä¼ä¸šèº«ä»½ç³»ç»Ÿç™»é™†ã€‚é…ç½®è¦ç‚¹æ˜¯</p><ol><li> åœ¨é˜¿é‡Œäº‘ç›®å½•ä¸­é…ç½®å¯ä¿¡ä¼ä¸š SAML IdP</li><li> åœ¨ä¼ä¸š IdP ä¸­é…ç½®é˜¿é‡Œäº‘ä¸ºå¯ä¿¡ SAML SP</li></ol><p>å…¶ä¸­ç¬¬äºŒç‚¹åœ¨ä¸åŒçš„èº«ä»½ç³»ç»Ÿä¸­æœ‰ä¸åŒçš„é…ç½®æ–¹æ³•ã€‚æœ¬æ–‡ä»¥ Windows Server 2012 R2 ä¸ºä¾‹ï¼Œä»‹ç»å¦‚ä½•é…ç½® Microsoft AD ä½œä¸ºé˜¿é‡Œäº‘çš„å•ç‚¹ç™»å½• IdPã€‚</p><p>æœ¬æ–‡å‡å®šç”¨æˆ·å¯¹ Microsoft AD åšäº†åˆç†æ­£ç¡®çš„é…ç½®ï¼Œåœ¨ Windows Server 2012 R2 ä¸Šé…ç½®äº†ä»¥ä¸‹ Server Role</p><ul><li>DNS æœåŠ¡å™¨ï¼šDNS æœåŠ¡å™¨ç”¨æ¥å°†èº«ä»½è®¤è¯è¯·æ±‚è§£æåˆ°æ­£ç¡®çš„ Federation Service ä¸Š</li><li>Active Directory åŸŸæœåŠ¡ (AD DS)ï¼šåŸŸæœåŠ¡æä¾›å¯¹åŸŸç”¨æˆ·å’ŒåŸŸè®¾å¤‡ç­‰å¯¹è±¡çš„åˆ›å»ºï¼ŒæŸ¥è¯¢å’Œä¿®æ”¹ç­‰åŠŸèƒ½</li><li>Active Directory Federation Service (AD FS)ï¼šFederation Service æä¾›é…ç½®è”åˆèº«ä»½è®¤è¯ä¾èµ–æ–¹çš„åŠŸèƒ½ï¼Œå¹¶å¯¹é…ç½®å¥½çš„ä¾èµ–æ–¹æä¾›å•ç‚¹ç™»å½•è®¤è¯ã€‚</li></ul><p>é’ˆå¯¹é…ç½® Active Directory çš„ç–‘é—®ï¼Œç”¨æˆ·å¯ä»¥å‚è€ƒå¾®è½¯å®˜æ–¹æ–‡æ¡£æˆ–è€…æœç´¢ç›¸å…³çš„ç¬¬ä¸‰æ–¹åšå®¢ã€‚</p><p>ç¤ºä¾‹ä¸­ç”¨åˆ°ç›¸å…³é…ç½®å¦‚ä¸‹</p><ol><li> äº‘è´¦å·çš„ç›®å½•é»˜è®¤åŸŸåä¸º<code>junpu.onaliyun.com</code></li><li> äº‘è´¦å·ä¸‹åŒ…å«å­ç”¨æˆ· junpu.chenï¼Œå…¶å®Œæ•´çš„ User Principal Nameï¼ˆUPNï¼‰ä¸º <a href="mailto:junpu.chen@junpu.onaliyun.com">junpu.chen@junpu.onaliyun.com</a></li><li> è‡ªå»º Microsoft AD ä¸­çš„ AD FS æœåŠ¡åç§°æ˜¯<code>adserver.testdomain.com</code>ã€‚</li><li> è‡ªå»º Microsoft AD çš„åŸŸåä¸º <code>testdomain.com</code>ï¼ŒNETBIOS åä¸º<code>testdomain</code>ã€‚</li><li> ç”¨æˆ· junpu.chen åœ¨ AD ä¸­çš„ UPN ä¸º<code>junpu.chen@testdomain.com</code>ï¼ŒåŸŸå†…ç™»é™†ä¹Ÿå¯ä»¥ä½¿ç”¨<code>testdomain\junpu.chen</code></li></ol><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥å¦‚ä¸‹åœ°å€</p><pre class=" language-null"><code class="language-null">https://adserver.testdomain.com/FederationMetadata/2007-06/FederationMetadata.xml```å°†å…ƒæ•°æ®XMLæ–‡ä»¶ä¸‹è½½å­˜å‚¨åˆ°æœ¬åœ°ï¼Œå¹¶æŒ‰ç…§[åˆè§„ä¸å®‰å…¨ï¼šé˜¿é‡Œäº‘ä¸ä¼ä¸šèº«ä»½ç³»ç»Ÿçš„é›†æˆ](https://yq.aliyun.com/articles/334240)ä¸­ä»‹ç»çš„æµç¨‹ï¼Œå°†ä¸‹è½½å¥½çš„IdPå…ƒæ•°æ®æ–‡æ¡£é…ç½®åˆ°é˜¿é‡Œäº‘ç›®å½•ä¸­ã€‚å®Œæˆè¿™ä¸€æ­¥ä¹‹åï¼Œé˜¿é‡Œäº‘ç›®å½•åˆ™å¯¹ç¤ºä¾‹ä¸­çš„AD FSäº§ç”Ÿäº†å•å‘ä¿¡ä»»ã€‚å¦‚æœç”¨æˆ·åœ¨é˜¿é‡Œäº‘å­ç”¨æˆ·ç™»é™†é¡µé¢è¾“å…¥junpu.chen@junpu.onaliyun.comï¼Œé˜¿é‡Œäº‘åˆ™ä¼šå‘AD FSå‘å‡ºSAMLè®¤è¯è¯·æ±‚ï¼Œä½†æ˜¯AD FSæ­¤æ—¶å¹¶ä¸ä¿¡ä»»é˜¿é‡Œäº‘ï¼Œå› æ­¤AD FSä¼šæŠ¥å‡ºå¦‚ä¸‹é”™è¯¯![](https://yqfile.alicdn.com/00059c8a312485453055589e0a495167cd8fba41.png)åœ¨Microsoftçš„AD FSè¯­å¢ƒä¸­ï¼ŒSAML SPè¢«ç§°ä½œRelying Partyï¼ˆä¾èµ–æ–¹ï¼Œä¿¡èµ–æ–¹ï¼‰ï¼Œè¿™æ˜¯å› ä¸ºAD FSæ”¯æŒOAuth/OIDC/WS-Federationï¼Œè€Œè¿™ä¸‰ä¸ªåè®®ä¸­çš„å•ç‚¹ç™»å½•æ¶ˆè´¹æ–¹éƒ½è¢«ç§°ä½œRelying Partyï¼Œå› æ­¤AD FSåœ¨å¯¹SAMLåè®®æ”¯æŒä¸­å¹¶æ²¡æœ‰é‡‡ç”¨SAMLç‰¹æœ‰çš„æœ¯è¯­Service Providerï¼Œè€Œæ˜¯ç»Ÿä¸€é‡‡ç”¨Relying Partyæ¥æŒ‡å®šä¸åŒåè®®ä¸­çš„å•ç‚¹ç™»å½•æ¶ˆè´¹æ–¹ã€‚åˆ›å»ºé˜¿é‡Œäº‘ä½œä¸ºAD FSçš„å¯ä¿¡SPæ­¥éª¤å¦‚ä¸‹ç¬¬ä¸€æ­¥ï¼šåœ¨æœåŠ¡å™¨ç®¡ç†å™¨ä¸­çš„`å·¥å…·`èœå•ä¸­æ‰“å¼€`AD FSç®¡ç†`![](https://yqfile.alicdn.com/ceaa91547be1f30a60c044335c8b3e1f86759a0d.png)ç¬¬äºŒæ­¥ï¼šåœ¨AD FSç®¡ç†å·¥å…·ä¸­æ·»åŠ `ä¿¡èµ–æ–¹ä¿¡ä»»`ï¼ˆRelying Party Trustï¼‰![](https://yqfile.alicdn.com/803a8014b1dccd1101faeea5516dc79dae9f62ce.png)ç¬¬ä¸‰æ­¥ï¼šä¸ºæ–°åˆ›å»ºçš„ä¿¡èµ–æ–¹è®¾ç½®é˜¿é‡Œäº‘çš„SAMLå…ƒæ•°æ®ä¿¡èµ–æ–¹å¯ä»¥ç›´æ¥é…ç½®å…ƒæ•°æ®çš„URLï¼Œæˆ–è€…å°†é˜¿é‡Œäº‘SAMLå…ƒæ•°æ®ä¸‹è½½ä¹‹åï¼Œä¸ºä¿¡èµ–æ–¹é…ç½®ä¸‹è½½å¥½çš„XMLæ–‡ä»¶ã€‚é˜¿é‡Œäº‘SAMLå…ƒæ•°æ®çš„URLå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–ï¼š1.  ç™»å½• RAM æ§åˆ¶å°ã€‚2.  å•å‡»äººå‘˜ç®¡ç† > è®¾ç½® > é«˜çº§è®¾ç½®ï¼Œåœ¨SSO ç™»å½•è®¾ç½®ä¸‹å¯ä»¥æŸ¥çœ‹å½“å‰äº‘è´¦å·çš„SAML æœåŠ¡æä¾›æ–¹å…ƒæ•°æ® URLã€‚å®Œæˆé…ç½®ä¿¡èµ–æ–¹ä¹‹åï¼Œé˜¿é‡Œäº‘å’ŒAD FSå°±äº§ç”Ÿäº†äº’ä¿¡ï¼Œé˜¿é‡Œäº‘ä¼šå°†`junpu.onaliyun.com`ç›®å½•å†…çš„ç”¨æˆ·è®¤è¯è¯·æ±‚è½¬å‘åˆ°AD FS `adserver.testdomain.com`ä¸Šï¼ŒAD FSä¹Ÿä¼šæ¥å—æ¥è‡ªäºé˜¿é‡Œäº‘çš„è®¤è¯è¯·æ±‚å¹¶å‘é˜¿é‡Œäº‘è½¬å‘è®¤è¯å“åº”ã€‚æ¥ä¸‹æ¥éœ€è¦å¯¹ä¿¡èµ–æ–¹é…ç½®SAMLæ–­è¨€ä¸­éœ€è¦é¢å‘çš„å±æ€§ã€‚ä¸ºäº†è®©é˜¿é‡Œäº‘èƒ½ä½¿ç”¨SAMLå“åº”å®šä½åˆ°äº‘ç›®å½•ä¸­çš„å­ç”¨æˆ·ï¼Œæˆ‘ä»¬éœ€è¦SAMLæ–­è¨€ä¸­çš„NameIDå­—æ®µå–å€¼ä¸ºäº‘ç›®å½•ä¸­å­ç”¨æˆ·çš„UPNã€‚é…ç½®Active Directoryä¸­çš„UPNä¸ºSAMLæ–­è¨€ä¸­çš„NameID--------------------------------------åœ¨è¿™é‡Œï¼Œå¾®è½¯ç”¨äº†`Claim`ï¼ˆå£°æ˜ï¼‰è¿™ä¸€æœ¯è¯­æ¥æŒ‡ä»£SAMLæ–­è¨€ä¸­çš„å±æ€§ã€‚è¿™æ˜¯å› ä¸ºAD FSæ”¯æŒçš„å…¶ä»–åè®®ï¼ˆOAuthï¼ŒWS-Fedç­‰ï¼‰ä¹Ÿéƒ½ä½¿ç”¨Claimæ¥è¡¨è¾¾Tokenä¸­çš„å­—æ®µã€‚ç¬¬ä¸€æ­¥ï¼šä¸ºä¿¡èµ–æ–¹ç¼–è¾‘å£°æ˜è§„åˆ™æ‰€è°“`å£°æ˜è§„åˆ™`ï¼ŒæŒ‡çš„æ˜¯`Claims Rule`ï¼Œä¹Ÿå°±æ˜¯SAMLæ–­è¨€ä¸­çš„å£°æ˜ï¼ˆå±æ€§ï¼‰æ˜¯æ€æ ·ä»Active Directoryçš„ç”¨æˆ·å±æ€§ä¸­ç”Ÿæˆçš„ã€‚![](https://yqfile.alicdn.com/bcb027436fa07fe1e2f7f428a63d1ec0b006d8e2.png)ç¬¬äºŒæ­¥ï¼šæ·»åŠ `é¢å‘è½¬æ¢è§„åˆ™`æ‰€è°“`é¢å‘è½¬æ¢è§„åˆ™`ï¼ŒæŒ‡çš„æ˜¯`Issuance Transformation Rule`ï¼ŒæŒ‡çš„æ˜¯å¦‚ä½•å°†ä¸€ä¸ªå·²çŸ¥çš„ç”¨æˆ·å±æ€§ï¼Œç»è¿‡è½¬æ¢ä¹‹åï¼Œé¢å‘ä¸ºSAMLæ–­è¨€ä¸­çš„å±æ€§ã€‚ç”±äºæˆ‘ä»¬è¦å°†ç”¨æˆ·åœ¨ADä¸­çš„UPNé¢å‘ä¸ºNameIDï¼Œå› æ­¤éœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„è§„åˆ™![](https://yqfile.alicdn.com/db8a9e3857adb8ca8433e14f0f45aa677bba5703.png)è§„åˆ™çš„æ¨¡ç‰ˆä¸º`è½¬æ¢ä¼ å…¥å£°æ˜`![](https://yqfile.alicdn.com/f034527f2107002104b0c063f1362785ad8735b5.png)**åˆ°è¿™é‡Œï¼Œç”±äºæˆ‘ä»¬ç¤ºä¾‹ä¸­çš„äº‘è´¦å·é‡Œçš„UPNåŸŸåä¸º`junpu.onaliyun.com`ï¼Œè€ŒADä¸­çš„UPNåŸŸåä¸º`testdomain.com`ï¼Œæ˜¾ç„¶å¦‚æœç›´æ¥å°†ADä¸­çš„User Principal Nameæ˜ å°„ä¸ºNameIDä¼šè®©é˜¿é‡Œäº‘æ— æ³•åŒ¹é…åˆ°æ­£ç¡®çš„å­è´¦å·ç”¨æˆ·ã€‚**æˆ‘ä»¬æä¾›ä¸¤ä¸ªè·¯å¾„æ¥å¡«è¡¥è¿™ä¸€ç©ºç™½ã€‚### è·¯å¾„ä¸€ï¼šåœ¨é˜¿é‡Œäº‘ç›®å½•ä¸­éªŒè¯ADåŸŸåå¦‚æœåŸŸå`testdomain.com`æ˜¯ä¸€ä¸ªåœ¨å…¬ç½‘DNSä¸­æ³¨å†Œçš„åŸŸåï¼Œé‚£ä¹ˆç”¨æˆ·å¯ä»¥åœ¨é˜¿é‡Œäº‘ç›®å½•ä¸­éªŒè¯è‡ªå·±å¯¹åŸŸåçš„æ‰€æœ‰æƒã€‚è¿›å…¥ä¼ä¸šæ§åˆ¶å°çš„`äººå‘˜ç›®å½•`\>`åŸŸåè®¾ç½®`\>`åˆ›å»ºåŸŸåˆ«å`ã€‚![](https://yqfile.alicdn.com/aea1d909b9c155b0b26852295a444f0f38edd828.png)éªŒè¯é€šè¿‡ä¹‹åï¼Œé˜¿é‡Œäº‘ç›®å½•çš„é»˜è®¤åŸŸ`junpu.onaliyun.com`åˆ™æœ‰äº†ä¸€ä¸ªåŸŸåˆ«å`testdomain.com`ã€‚å­ç”¨æˆ·junpu.chençš„UPNä¸ºjunpu.chen@testdomain.comã€‚éªŒè¯åŸŸåä¹‹åçš„äº‘ç›®å½•åˆ™å¯ä»¥åœ¨åŸŸåä¸Šä¸è‡ªå»ºAD DSä¿æŒä¸€è‡´ï¼šäº‘ç›®å½•å­ç”¨æˆ·çš„UPNä¸ADä¸­ç”¨æˆ·çš„UPNéƒ½ä½¿ç”¨`testdomain.com`è¿™ä¸ªåŸŸåã€‚å®Œæˆè¿™ä¸ªè®¾ç½®åï¼Œæˆ‘ä»¬å›åˆ°ä¸Šé¢çš„å£°æ˜è½¬æ¢è§„åˆ™ç¼–è¾‘ä¸­ï¼Œå°†UPNæ˜ å°„ä¸ºNameIDï¼ˆåç§°IDï¼‰ã€‚![](https://yqfile.alicdn.com/78628160cbd087546a2591cc80e91d1bc02d079c.png)### è·¯å¾„äºŒï¼šå°†ADä¸­çš„User Principal Nameçš„åŸŸåè½¬æ¢åé¢å‘ä¸ºNameIDå¦‚æœåŸŸå`testdomain.com`æ˜¯ä¼ä¸šçš„å†…ç½‘åŸŸåï¼Œé‚£ä¹ˆé˜¿é‡Œäº‘å°†æ— æ³•éªŒè¯ä¼ä¸šå¯¹åŸŸåçš„æ‰€æœ‰æƒã€‚äº‘ç›®å½•å°±åªèƒ½é‡‡ç”¨`onaliyun.com`ä¸‹çš„å­åŸŸåã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨AD FSç»™é˜¿é‡Œäº‘é¢å‘çš„SAMLæ–­è¨€ä¸­å°±å¿…é¡»å°†UPNçš„åŸŸååç¼€ä»`testdomain.com`æ›¿æ¢ä¸º`junpu.onaliyun.com`ï¼ˆå‡å®šç”¨æˆ·åä¸€ä¸€å¯¹åº”ï¼‰![](https://yqfile.alicdn.com/e17b1fcd17580b5a383670db373e0af467d0460d.png)åœ¨ç¬”è€…çš„ç¤ºä¾‹ä¸­ï¼Œè‡ªå»ºAD`testdomain.com`è¿™ä¸€åŸŸåæ˜¯å†…ç½‘åŸŸåï¼Œé€šè¿‡ä¸Šè¿°è·¯å¾„äºŒå¯¹æ–­è¨€å±æ€§è¿›è¡Œæ˜ å°„ä¹‹åï¼Œä»è‡ªå»ºADçš„å†…ç½‘è®¿é—®é˜¿é‡Œäº‘ï¼Œåœ¨å­è´¦å·ç™»é™†ä¸­è¾“å…¥`junpu.chen@junpu.onaliyun.com`![](https://yqfile.alicdn.com/ff3f6bf1839a7ed7101122767c36fdff853ee9ce.png)é˜¿é‡Œäº‘å°†è®¤è¯è¯·æ±‚è½¬å‘ç»™adserver.testdomain.com![](https://yqfile.alicdn.com/6dee0202ad813b7e0c7a84bfb36ac036c859eccd.png)è¾“å…¥ADå†…çš„ç”¨æˆ·å`junpu.chen@testdomain.com`å’Œå¯†ç ä¹‹åï¼Œå°±å®Œæˆäº†ç™»é™†å›åˆ°é˜¿é‡Œäº‘æ§åˆ¶å°![](https://yqfile.alicdn.com/6d25c67c7aa0089e8e33dff3b8ef9b2ff6c7615e.png)ç”±äºä¼ä¸šè‡ªå»ºADé…ç½®ä¸Šå¯èƒ½æœ‰æ‰€ä¸åŒï¼Œå› æ­¤å¯èƒ½éœ€è¦ç¼–è¾‘ç•¥æœ‰ä¸åŒçš„å£°æ˜è§„åˆ™ã€‚ä½†æ˜¯æœ€ç»ˆçš„ç›®æ ‡éƒ½æ˜¯è®©SAMLå“åº”ä¸­èƒ½å¤Ÿè¿”å›é˜¿é‡Œäº‘ç›®å½•å¯ä»¥è¯†åˆ«çš„å­è´¦å·UPNã€‚è¿™é‡Œåˆ—å‡ºä¸€äº›å¸¸è§çš„é—®é¢˜*   å¦‚æœæ²¡æœ‰é…ç½®å£°æ˜è§„åˆ™ï¼Œå¯¼è‡´SAMLæ–­è¨€ä¸­ç¼ºå¤±NameIDå­—æ®µ```nullæ— æ³•è§£æå¤–éƒ¨èº«ä»½æä¾›å•†ç­¾å‘çš„è®¤è¯ä¿¡æ¯ã€‚: Unable to understand SAML response```*   å¦‚æœSAMLæ–­è¨€ä¸­çš„NameIDåŸŸåä¸äº‘ç›®å½•å¹¶ä¸ä¸€è‡´```nullæ‚¨çš„é˜¿é‡Œäº‘ç›®å½•çš„å¤–éƒ¨å•ç‚¹ç™»å½•é…ç½®æ— æ•ˆï¼Œè¯·è”ç³»ç®¡ç†å‘˜ã€‚: {"domainName":"testdomain.com"}```**ç‰ˆæƒå£°æ˜ï¼š** æœ¬æ–‡å†…å®¹ç”±é˜¿é‡Œäº‘å®åæ³¨å†Œç”¨æˆ·è‡ªå‘è´¡çŒ®ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ï¼Œé˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¸æ‹¥æœ‰å…¶è‘—ä½œæƒï¼Œäº¦ä¸æ‰¿æ‹…ç›¸åº”æ³•å¾‹è´£ä»»ã€‚å…·ä½“è§„åˆ™è¯·æŸ¥çœ‹ã€Š[é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºç”¨æˆ·æœåŠ¡åè®®](https://developer.aliyun.com/article/768092)ã€‹å’Œã€Š[é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºçŸ¥è¯†äº§æƒä¿æŠ¤æŒ‡å¼•](https://developer.aliyun.com/article/768093)ã€‹ã€‚å¦‚æœæ‚¨å‘ç°æœ¬ç¤¾åŒºä¸­æœ‰æ¶‰å«ŒæŠ„è¢­çš„å†…å®¹ï¼Œå¡«å†™[ä¾µæƒæŠ•è¯‰è¡¨å•](https://yida.alibaba-inc.com/o/right)è¿›è¡Œä¸¾æŠ¥ï¼Œä¸€ç»æŸ¥å®ï¼Œæœ¬ç¤¾åŒºå°†ç«‹åˆ»åˆ é™¤æ¶‰å«Œä¾µæƒå†…å®¹ã€‚ [https://developer.aliyun.com/article/334241](https://developer.aliyun.com/article/334241)</code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Collecting Docker Logs With Loki</title>
      <link href="/2021/03/07/collecting-docker-logs-with-loki/"/>
      <url>/2021/03/07/collecting-docker-logs-with-loki/</url>
      
        <content type="html"><![CDATA[<h3 id="Setup-Loki-Container"><a href="#Setup-Loki-Container" class="headerlink" title="Setup Loki Container"></a><a href="#Setup-Loki-Container" title="Setup Loki Container"></a>Setup Loki Container</h3><p>First of all, we will need to define a Loki container in the <code>docker-compose.yml</code>. The command part tells Loki to read the config from the <code>local-config.yaml</code> which is added as a volume.</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">services</span><span class="token punctuation">:</span>  <span class="token key atrule">loki</span><span class="token punctuation">:</span>    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> loki    <span class="token key atrule">image</span><span class="token punctuation">:</span> grafana/loki<span class="token punctuation">:</span>latest    <span class="token key atrule">ports</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token string">"3100:3100"</span>    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>config.file=/etc/loki/local<span class="token punctuation">-</span>config.yaml    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> ./volumes/loki/etc<span class="token punctuation">:</span>/etc/loki</code></pre><p>The <code>local-config.yaml</code> is a default from the <a href="https://github.com/grafana/loki/blob/master/docs/configuration/README.md">Loki Github page</a>.</p><p>Here is an example config.</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">auth_enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">http_listen_port</span><span class="token punctuation">:</span> <span class="token number">3100</span>  <span class="token key atrule">log_level</span><span class="token punctuation">:</span> error<span class="token key atrule">ingester</span><span class="token punctuation">:</span>  <span class="token key atrule">lifecycler</span><span class="token punctuation">:</span>    <span class="token key atrule">address</span><span class="token punctuation">:</span> 127.0.0.1    <span class="token key atrule">ring</span><span class="token punctuation">:</span>      <span class="token key atrule">kvstore</span><span class="token punctuation">:</span>        <span class="token key atrule">store</span><span class="token punctuation">:</span> inmemory      <span class="token key atrule">replication_factor</span><span class="token punctuation">:</span> <span class="token number">1</span>    <span class="token key atrule">final_sleep</span><span class="token punctuation">:</span> 0s  <span class="token key atrule">chunk_idle_period</span><span class="token punctuation">:</span> 5m  <span class="token key atrule">chunk_retain_period</span><span class="token punctuation">:</span> 30s<span class="token key atrule">schema_config</span><span class="token punctuation">:</span>  <span class="token key atrule">configs</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">from</span><span class="token punctuation">:</span> <span class="token datetime number">2018-04-15</span>      <span class="token key atrule">store</span><span class="token punctuation">:</span> boltdb      <span class="token key atrule">object_store</span><span class="token punctuation">:</span> filesystem      <span class="token key atrule">schema</span><span class="token punctuation">:</span> v9      <span class="token key atrule">index</span><span class="token punctuation">:</span>        <span class="token key atrule">prefix</span><span class="token punctuation">:</span> index_        <span class="token key atrule">period</span><span class="token punctuation">:</span> 168h<span class="token key atrule">storage_config</span><span class="token punctuation">:</span>  <span class="token key atrule">boltdb</span><span class="token punctuation">:</span>    <span class="token key atrule">directory</span><span class="token punctuation">:</span> /tmp/loki/index  <span class="token key atrule">filesystem</span><span class="token punctuation">:</span>    <span class="token key atrule">directory</span><span class="token punctuation">:</span> /tmp/loki/chunks<span class="token key atrule">limits_config</span><span class="token punctuation">:</span>  <span class="token key atrule">enforce_metric_name</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">reject_old_samples</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">reject_old_samples_max_age</span><span class="token punctuation">:</span> 168h<span class="token key atrule">chunk_store_config</span><span class="token punctuation">:</span>  <span class="token key atrule">max_look_back_period</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token key atrule">table_manager</span><span class="token punctuation">:</span>  <span class="token key atrule">chunk_tables_provisioning</span><span class="token punctuation">:</span>    <span class="token key atrule">inactive_read_throughput</span><span class="token punctuation">:</span> <span class="token number">0</span>    <span class="token key atrule">inactive_write_throughput</span><span class="token punctuation">:</span> <span class="token number">0</span>    <span class="token key atrule">provisioned_read_throughput</span><span class="token punctuation">:</span> <span class="token number">0</span>    <span class="token key atrule">provisioned_write_throughput</span><span class="token punctuation">:</span> <span class="token number">0</span>  <span class="token key atrule">index_tables_provisioning</span><span class="token punctuation">:</span>    <span class="token key atrule">inactive_read_throughput</span><span class="token punctuation">:</span> <span class="token number">0</span>    <span class="token key atrule">inactive_write_throughput</span><span class="token punctuation">:</span> <span class="token number">0</span>    <span class="token key atrule">provisioned_read_throughput</span><span class="token punctuation">:</span> <span class="token number">0</span>    <span class="token key atrule">provisioned_write_throughput</span><span class="token punctuation">:</span> <span class="token number">0</span>  <span class="token key atrule">retention_deletes_enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">retention_period</span><span class="token punctuation">:</span> <span class="token number">0</span></code></pre><h3 id="Adding-Loki-as-a-Logging-Driver"><a href="#Adding-Loki-as-a-Logging-Driver" class="headerlink" title="Adding Loki as a Logging Driver"></a><a href="#Adding-Loki-as-a-Logging-Driver" title="Adding Loki as a Logging Driver"></a>Adding Loki as a Logging Driver</h3><p>To ship logs to Loki automatically for every container we add to our setup, we need to add the loki logging driver.<br>The easiest way to add the loki logging driver is with a docker plugin.</p><pre class=" language-shell"><code class="language-shell">docker plugin install grafana/loki-docker-driver:latest --alias loki --grant-all-permissions</code></pre><p>Donâ€™t forget to restart the docker daemon after installing the plugin.</p><p>If you are on Mac:</p><pre class=" language-shell"><code class="language-shell">killall Docker && open /Applications/Docker.app</code></pre><p>If you are on Linux:</p><pre class=" language-shell"><code class="language-shell">sudo systemctl restart docker</code></pre><p>After installing the plugin, verify it is enabled.</p><pre class=" language-shell"><code class="language-shell">docker plugin ls</code></pre><p>Should output</p><pre class=" language-plain"><code class="language-plain">ID                  NAME                DESCRIPTION           ENABLED412df8a79e8e        loki:latest         Loki Logging Driver   true</code></pre><h3 id="Using-Loki-as-a-Logging-Driver"><a href="#Using-Loki-as-a-Logging-Driver" class="headerlink" title="Using Loki as a Logging Driver"></a><a href="#Using-Loki-as-a-Logging-Driver" title="Using Loki as a Logging Driver"></a>Using Loki as a Logging Driver</h3><p>There are two ways, I will cover, to change the logging driver, either directly in the docker compose file or in the daemon.json file of the docker daemon.</p><h4 id="Docker-compose-yaml"><a href="#Docker-compose-yaml" class="headerlink" title="Docker-compose.yaml"></a><a href="#Docker-compose-yaml" title="Docker-compose.yaml"></a>Docker-compose.yaml</h4><p>The default driver is json-file, but we can easily change it to loki, thanks to the docker plugin we installed earlier.<br>The loki-url option tells where to ship the logs, which in this case is to our local loki instance.<br>For a complete options list check the <a href="https://github.com/grafana/loki/tree/master/cmd/docker-driver#log-opt-options">loki logging driver options</a></p><p>An easier way to reuse the logging section since docker-compose version 3.4, is the <code>x-</code> extension fields and yaml anchors and aliases.<br>The <code>x-</code> extension field tells docker compose to ignore the section that follows it.<br>Anchors are identified by an <code>&amp;</code> character, and aliases by an <code>*</code> character.<br>Define an extension field at the top of your <code>docker-compose.yml</code> with an anchor after it and reuse it using the alias on all services.</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">x-logging</span><span class="token punctuation">:</span> <span class="token important">&amp;logging</span>  <span class="token key atrule">logging</span><span class="token punctuation">:</span>    <span class="token key atrule">driver</span><span class="token punctuation">:</span> loki    <span class="token key atrule">options</span><span class="token punctuation">:</span>      <span class="token key atrule">loki-url</span><span class="token punctuation">:</span> <span class="token string">"http://host.docker.internal:3100/loki/api/v1/push"</span><span class="token key atrule">services</span><span class="token punctuation">:</span>  <span class="token key atrule">my_service</span><span class="token punctuation">:</span>    <span class="token important">*logging</span>    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> xxx    <span class="token key atrule">image</span><span class="token punctuation">:</span> xxx/xxx  <span class="token key atrule">another_cool_service</span><span class="token punctuation">:</span>    <span class="token important">*logging</span>    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> xxxx    <span class="token key atrule">image</span><span class="token punctuation">:</span> xxxx/xxxx</code></pre><h4 id="Daemon-json"><a href="#Daemon-json" class="headerlink" title="Daemon.json"></a><a href="#Daemon-json" title="Daemon.json"></a>Daemon.json</h4><p>We can also change the default logging driver for all containers in a file called <code>daemon.json</code>. If you are on Mac its located at <code>~/.docker/daemon.json</code><br>If you are on linux its located at <code>/etc/docker/daemon.json</code></p><p>Example of daemon.json.<br>Donâ€™t forget to restart the docker daemon afterwards.</p><p>I prefer adding the logging driver in the <code>docker-compose.yaml</code> directly, because I have more control over the logging driver on a single service level, whereas, with daemon.json, you change the logging driver for all containers.</p><h3 id="Running-Docker-with-Loki"><a href="#Running-Docker-with-Loki" class="headerlink" title="Running Docker with Loki"></a><a href="#Running-Docker-with-Loki" title="Running Docker with Loki"></a>Running Docker with Loki</h3><p>After you run <code>docker-compose up</code> all container logs will be sent to Loki.<br>One thing to note is, there is an error after running the containers, which says</p><pre class=" language-plain"><code class="language-plain">WARNING: no logs are available with the 'loki' log driver</code></pre><p>Nevertheless, all container logs are successfully sent to Grafana every time.<br>Because I use Loki in a development setup, I ignore this message, but if you want to run this in production, I would ensure that it is minor.<br>After all containers are up, you can still do <code>docker logs</code> command and it will work, so I am guessing the error above has something to do with container startup time.</p><h3 id="Adding-Loki-to-Grafana"><a href="#Adding-Loki-to-Grafana" class="headerlink" title="Adding Loki to Grafana"></a><a href="#Adding-Loki-to-Grafana" title="Adding Loki to Grafana"></a>Adding Loki to Grafana</h3><p>Login to your Grafana instance and add a new data source of type Loki. Make sure the Grafana can reach the Loki instance.<br><a href="https://yuriktech.com/2020/03/21/Collecting-Docker-Logs-With-Loki/adding-loki.png"><img src="https://yuriktech.com/2020/03/21/Collecting-Docker-Logs-With-Loki/adding-loki.png"></a></p><h3 id="Using-Loki-in-Grafana"><a href="#Using-Loki-in-Grafana" class="headerlink" title="Using Loki in Grafana"></a><a href="#Using-Loki-in-Grafana" title="Using Loki in Grafana"></a>Using Loki in Grafana</h3><p>After adding Loki as a data source, go to explore and you should see all containers appear with automatic labels set by the Loki logging driver.<br><a href="https://yuriktech.com/2020/03/21/Collecting-Docker-Logs-With-Loki/grafana-loki.png"><img src="https://yuriktech.com/2020/03/21/Collecting-Docker-Logs-With-Loki/grafana-loki.png"></a></p><p>You can also filter by words using the logql syntax, for example: <code>|=</code> includes syntax or <code>!=</code> excludes syntax. You can find out more about Loki logql syntax <a href="https://github.com/grafana/loki/blob/master/docs/logql.md">here</a>.</p><h3 id="Closing-Notes"><a href="#Closing-Notes" class="headerlink" title="Closing Notes"></a><a href="#Closing-Notes" title="Closing Notes"></a>Closing Notes</h3><p>We saw how to define a Loki docker container, afterwards we added Loki logging driver as a docker plugin, and finally, we shipped all of our logs to Grafana with a simple configuration.<br><a href="https://yuriktech.com/2020/03/21/Collecting-Docker-Logs-With-Loki/">https://yuriktech.com/2020/03/21/Collecting-Docker-Logs-With-Loki/</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Nginx é…ç½®æ ¹æ®è¯·æ±‚IPæœ«æ®µè¿›è¡Œåˆ†æµ - SegmentFault æ€å¦</title>
      <link href="/2021/02/01/nginx-pei-zhi-gen-ju-qing-qiu-ip-mo-duan-jin-xing-fen-liu-segmentfault-si-fou/"/>
      <url>/2021/02/01/nginx-pei-zhi-gen-ju-qing-qiu-ip-mo-duan-jin-xing-fen-liu-segmentfault-si-fou/</url>
      
        <content type="html"><![CDATA[<p>åŸæ–‡é“¾æ¥ï¼š <a href="http://hxd.life/2019/05/13/Nginx%E9%85%8D%E7%BD%AE%E6%A0%B9%E6%8D%AE%E8%AF%B7%E6%B1%82IP%E6%9C%AB%E6%AE%B5%E5%88%86%E6%B5%81/">ä½•æ™“ä¸œ åšå®¢</a></p><pre><code> upstream jlovec.com {  server 192.168.1.100:8080;}upstream jlovec-default.com {  server 192.168.1.200:8080;}server {  listen 80;  server_name www.jlovec.com;  location /  {   if ( $remote_addr ~* ^10\.0\.(.*)\.[1,10]$) {        proxy_pass http://jlovec.com;        break;    }    proxy_pass http://jlovec-default.com;  }}</code></pre><p>ä»¥ä¸Šä¸ºå°† IP æœ«æ®µä¸º 1-125 çš„è¯·æ±‚æ¥æºè½¬å‘åˆ° huaji-01.comï¼Œå…¶ä»–è½¬å‘ huaji-02.comï¼ŒåŒæ ·å¯ä»¥ä¿®æ”¹æ­£åˆ™ï¼Œä¾‹å¦‚</p><p>è§„åˆ™ï¼š <code>$remote_addr ~* ^(.*)\.(.*)\.(.*)\.*[0268]$</code> æœ«å°¾ä¸º 0268 è¿™æ ·çš„å¶æ•° ipï¼Œè·³è½¬åˆ° huaji-01.comï¼Œå…¶ä»–è·³è½¬åˆ°ç¬¬äºŒä¸ªåŸŸåï¼›</p><p>è§„åˆ™ï¼š<code>$remote_addr ~* ^(112)\.(.*)\.(.*)\.(.*)$</code> å¼€å¤´ä¸º 112 çš„ IP è·³è½¬åˆ°æŒ‡å®šçš„åŸŸåï¼›</p><p>è§„åˆ™ï¼š<code>$http_x_forwarded_for ~* ^(112)\.(.*)\.(.*)\.(.*)$</code> æ ¹æ® forward åœ°å€æ®µæ¥åˆ†æµï¼Œå¼€å¤´ä¸º 112 çš„è·³è½¬åˆ°æŒ‡å®šåŸŸå</p><p>if æŒ‡ä»¤æ¡ä»¶åˆ¤æ–­çš„å«ä¹‰ï¼š</p><blockquote><p><strong>æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå…¶ä¸­ï¼š</strong></p></blockquote><blockquote><p>~ ä¸ºåŒºåˆ†å¤§å°å†™åŒ¹é…</p></blockquote><blockquote><p>~* ä¸ºä¸åŒºåˆ†å¤§å°å†™åŒ¹é…</p></blockquote><blockquote><p>!~ å’Œ !~* åˆ†åˆ«ä¸ºåŒºåˆ†å¤§å°å†™ä¸åŒ¹é…åŠä¸åŒºåˆ†å¤§å°å†™ä¸åŒ¹é…</p></blockquote><blockquote><p><strong>æ–‡ä»¶åŠç›®å½•åŒ¹é…ï¼Œå…¶ä¸­ï¼š</strong></p></blockquote><blockquote><p>-f å’Œ !-f ç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶</p></blockquote><blockquote><p>-d å’Œ !-d ç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç›®å½•</p></blockquote><blockquote><p>-e å’Œ !-e ç”¨æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ä»¶æˆ–ç›®å½•</p></blockquote><blockquote><p>-x å’Œ !-x ç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œ</p></blockquote><blockquote><p><strong>rewrite æŒ‡ä»¤çš„æœ€åä¸€é¡¹å‚æ•°ä¸º flag æ ‡è®°ï¼Œflag æ ‡è®°æœ‰ï¼š</strong></p></blockquote><blockquote><p>last ç›¸å½“äº apache é‡Œé¢çš„ [L] æ ‡è®°ï¼Œè¡¨ç¤º rewriteã€‚</p></blockquote><blockquote><p>break æœ¬æ¡è§„åˆ™åŒ¹é…å®Œæˆåï¼Œç»ˆæ­¢åŒ¹é…ï¼Œä¸å†åŒ¹é…åé¢çš„è§„åˆ™ã€‚</p></blockquote><blockquote><p>redirect è¿”å› 302 ä¸´æ—¶é‡å®šå‘ï¼Œæµè§ˆå™¨åœ°å€ä¼šæ˜¾ç¤ºè·³è½¬åçš„ URL åœ°å€ã€‚</p></blockquote><blockquote><p>permanent è¿”å› 301 æ°¸ä¹…é‡å®šå‘ï¼Œæµè§ˆå™¨åœ°å€ä¼šæ˜¾ç¤ºè·³è½¬åçš„ URL åœ°å€ã€‚</p></blockquote><p>å‚è€ƒé“¾æ¥ï¼š</p><ol><li><p> <a href="https://github.com/DocsHome/nginx-docs">Nginx ä¸­æ–‡æ–‡æ¡£</a></p></li><li><p> <a href="https://github.com/DocsHome/nginx-docs/blob/d1d7dfc7e4c1f189d4b41621cea9017b9be430e4/%E6%A8%A1%E5%9D%97%E5%8F%82%E8%80%83/http/ngx_http_rewrite_module.md">Nginx rewrite æ¨¡å—æ–‡æ¡£</a></p></li></ol><p><a href="https://segmentfault.com/a/1190000019707041">https://segmentfault.com/a/1190000019707041</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu å®‰è£… python 3.6ã€ 3.7</title>
      <link href="/2021/01/07/ubuntu-an-zhuang-python-3.6-3.7/"/>
      <url>/2021/01/07/ubuntu-an-zhuang-python-3.6-3.7/</url>
      
        <content type="html"><![CDATA[<h1 id="Ubuntu-å®‰è£…-python-3-6-3-7"><a href="#Ubuntu-å®‰è£…-python-3-6-3-7" class="headerlink" title="Ubuntu å®‰è£… python 3.6 3.7"></a>Ubuntu å®‰è£… python 3.6 3.7</h1><h2 id="Step-1-Install-ppa"><a href="#Step-1-Install-ppa" class="headerlink" title="Step 1:- Install ppa"></a>Step 1:- Install ppa</h2><p>This PPA contains more recent Python versions packaged for Ubuntu. Install ppa by running the following command.</p><pre><code>$ sudo add-apt-repository ppa:deadsnakes/ppa</code></pre><h2 id="Step-2-Update-packeges"><a href="#Step-2-Update-packeges" class="headerlink" title="Step 2:- Update packeges"></a>Step 2:- Update packeges</h2><p>Now, update your packages by running the following command.</p><pre><code>$ sudo apt-get update</code></pre><h2 id="Step-3-Upgrade-python-2-x-to-python-3-x"><a href="#Step-3-Upgrade-python-2-x-to-python-3-x" class="headerlink" title="Step 3:- Upgrade python 2.x to python 3.x"></a>Step 3:- Upgrade python 2.x to python 3.x</h2><p>Before install 3.7, we should have to install python 3.6 by running the following command.</p><pre><code>$ sudo apt-get install python3.6$ sudo apt-get install python3.7</code></pre><h2 id="PiP-installation"><a href="#PiP-installation" class="headerlink" title="PiP installation"></a>PiP installation</h2><p>Install pip by running the following command.</p><pre><code>$ sudo apt install python3-pip</code></pre><h2 id="Set-priority"><a href="#Set-priority" class="headerlink" title="Set priority"></a>Set priority</h2><pre><code>$ sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.6 1$ sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.7 2</code></pre><p>Now, you can use python 2.7, 3.6 and 3.7 in your machine.</p><p><a href="https://rajputankit22.medium.com/upgrade-python-2-7-to-3-6-and-3-7-in-ubuntu-97d2727bf911">https://rajputankit22.medium.com/upgrade-python-2-7-to-3-6-and-3-7-in-ubuntu-97d2727bf911</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Alfredå·¥ä½œæµworkflowså®ä¾‹</title>
      <link href="/2020/12/26/alfred-gong-zuo-liu-workflows-shi-li/"/>
      <url>/2020/12/26/alfred-gong-zuo-liu-workflows-shi-li/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.hhtjim.com/tag/alfred">Alfred</a>æ˜¯<a href="https://www.hhtjim.com/tag/mac">mac</a>ä¸Šå¼ºå¤§çš„å¿«é€Ÿå¯åŠ¨å·¥å…· å¯ä»¥è‡ªå®šä¹‰ php/shell/ruby/python è„šæœ¬æ‰§è¡Œä»»æ„æ“ä½œã€‚æ¯”å¦‚å¿«é€Ÿæœç´¢å…³é”®å­—æ‰“å¼€ç½‘é¡µ æŸ¥è¯¢å­—ç¬¦è½¬ç  ipã€‚ã€‚ã€‚è¿™äº›éƒ½æ˜¯å¯ä»¥è‡ªå·±å®šä¹‰æ“ä½œçš„ï¼Œåªæ˜¯éœ€è¦ä¸€äº›è„šæœ¬è¯­è¨€ç¼–å†™çš„çŸ¥è¯†ã€‚</p><blockquote><p>windows ä¸Šæœ‰ç±»å‹çš„ Wox <a href="https://github.com/Wox-launcher/Wox">https://github.com/Wox-launcher/Wox</a></p></blockquote><h3 id="ä¸‹è½½-Alfred"><a href="#ä¸‹è½½-Alfred" class="headerlink" title="ä¸‹è½½ Alfred"></a>ä¸‹è½½ Alfred</h3><p>å®˜ç½‘ï¼š <a href="https://www.%5BAlfred%5D(https://www.hhtjim.com/tag/alfred)" title="View all posts in Alfred">https://www.[Alfred](https://www.hhtjim.com/tag/alfred</a>app.com/</p><p>å·¥ä½œæµ workflows è‡ªå®šä¹‰è„šæœ¬çš„åŠŸèƒ½åœ¨ Alfred ä¸­æ˜¯æ”¶è´¹çš„åŠŸèƒ½, è¿˜å¥½ æœ‰å¯ç”¨çš„ç‰ˆæœ¬</p><p>n<a href="https://www.hhtjim.com/tag/mac">mac</a>.to crackedï¼š<a href="https://userscloud.com/o3ibe2w7071h/nmac.to_alf37931b.zip">https://userscloud.com/o3ibe2w7071h/nmac.to_alf37931b.zip</a></p><h3 id="æ·»åŠ -é…ç½®-workflows"><a href="#æ·»åŠ -é…ç½®-workflows" class="headerlink" title="æ·»åŠ  / é…ç½® workflows"></a>æ·»åŠ  / é…ç½® workflows</h3><blockquote><p>ç‚¹å‡»<code>Workflows</code>åˆ‡æ¢åˆ°å·¥ä½œæµé€‰é¡¹</p></blockquote><blockquote><p>çª—å£å·¦ä¸‹è§’ ã€Œ help + -ã€ï¼Œç‚¹å‡» <code>+</code>-&gt;<code>Blank Workflow</code> å¼€å§‹æ–°å»ºå·¥ä½œæµç¨‹</p></blockquote><p>å¡«å†™åç§°<code>name</code>ï¼Œæè¿°<code>Description</code>,<code>Bundle id</code>ä¸ºè‡ªå·±æ ‡è®°çš„åŒ…å id è¦ç¡®ä¿å”¯ä¸€æ€§ã€‚</p><p><img src="https://static.hhtjim.com/wp-content/uploads/2018/09/1536307820.png#alt="></p><blockquote><p>å³è¾¹é»‘è‰²èƒŒæ™¯çª—å£ä¸­å³é”® <code>inputs</code>-&gt;<code>Script Filter</code> æ·»åŠ è‡ªå®šä¹‰æ‰§è¡Œçš„è„šæœ¬</p></blockquote><p>[<img src="https://static.hhtjim.com/wp-content/uploads/2018/09/1536307676471-300x221.jpg#alt="></p><p>](<a href="https://static.hhtjim.com/wp-content/uploads/2018/09/1536307676471.jpg">https://static.hhtjim.com/wp-content/uploads/2018/09/1536307676471.jpg</a>)</p><blockquote><p>é…ç½®æ‰§è¡Œè„šæœ¬ä»¥åŠè§¦å‘çš„å…³é”®å­—</p></blockquote><p><code>keyword</code>ä¸ºè§¦å‘çš„å…³é”®å­— æ¯”å¦‚ alfred å¯åŠ¨æ¡†æ¡†ä¸­è¾“å…¥<code>baidu ç©ºæ ¼ query</code>,<code>baidu</code>å°±æ˜¯è§¦å‘è„šæœ¬çš„è‡ªå®šä¹‰å…³é”®å­—ï¼Œç©ºæ ¼åé¢çš„ query å³ä¸ºæŸ¥è¯¢çš„å‚æ•°<code>ä¸‹é¢çš„</code>Language`å³ä¸ºè„šæœ¬è¯­è¨€ è¿™é‡Œç”¨çš„ç³»ç»Ÿè‡ªå¸¦çš„æƒé™è„šæœ¬ã€‚</p><p>[<img src="https://static.hhtjim.com/wp-content/uploads/2018/09/1536308188-300x243.png#alt="></p><p>](<a href="https://static.hhtjim.com/wp-content/uploads/2018/09/1536308188.png">https://static.hhtjim.com/wp-content/uploads/2018/09/1536308188.png</a>)</p><pre><code>#!/bin/baship=$(ifconfig en0 | grep 'inet .*'  | sed 's/^.*inet//g' | sed 's/ netmask.*//g')cat &lt;&lt; EOF{"items": [    {        "title": "${ip}",        "subtitle": "å±€åŸŸç½‘en0 ip",        "arg": "${ip}"    }]}EOF</code></pre><p>è¯´æ˜ï¼š</p><p>ä½¿ç”¨ç³»ç»Ÿ bash æŸ¥è¯¢<code>ifconfig</code>å‘½ä»¤ en0 ç½‘å¡çš„ IP ä¿¡æ¯ ç®¡é“å‘½ä»¤ç¬¦<code>|</code>ç»§ç»­å¤„ç†<code>sed</code>æˆªå–è¾“å‡ºç»“æœã€‚</p><p>æœ€åä½¿ç”¨<code>cat</code>è¾“å‡º json æ•°æ®ç”¨äº Alfred è¯»å–å¹¶æ˜¾ç¤ºåˆ°ç»“æœåˆ—è¡¨</p><p>items å…·ä½“å‚æ•°é‡Šä¹‰å‚è€ƒä¸‹æ–¹ alfredapp.com é“¾æ¥ã€‚</p><p>è¿™é‡Œ<code>arg</code>æ˜¯ç”¨äºå¤åˆ¶ç²˜è´´ / é€šçŸ¥ç­‰æ“ä½œçš„ Alfred å˜é‡èµ‹å€¼ï¼Œå¦åˆ™ä¼šæ²¡ååº”ã€‚å¦‚æœåªæ˜¯æ˜¾ç¤ºæŸ¥çœ‹ å¯ä»¥åªè®¾ç½®<code>title</code>ï¼Œ<code>subtitle</code> æ•ˆæœå°±å·²ç»æ¯”è¾ƒå¥½äº†ã€‚</p><blockquote><p>ç‚¹å‡»<code>save</code>ä¿å­˜</p></blockquote><h3 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>çª—å£å³è¾¹æœ‰èœ˜è››ã€Œ<img src="https://twemoji.maxcdn.com/svg/1f577.svg#alt="></p><p>ã€å›¾æ ‡ ä¸‹æ–¹çš„<code>Log</code>ä¸‹æ‹‰æ¡† é€‰æ‹© <code>all information</code>ä¾¿äºæŸ¥çœ‹è°ƒè¯•ä¿¡æ¯</p><p><img src="https://static.hhtjim.com/wp-content/uploads/2018/09/1536311428.png#alt="></p><h3 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h3><p><code>option</code>+<code>space</code>å¯åŠ¨ è¾“å…¥è§¦å‘å…³é”®å­—</p><p><img src="https://static.hhtjim.com/wp-content/uploads/2018/09/1536310574.png#alt="></p><h3 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h3><p>ä¸Šé¢åªæ˜¯æ“ä½œè®°å½• è¿™é‡Œå¯ä»¥ç›´æ¥ä¸‹è½½ï¼š<a href="https://www.hhtjim.com/wp-content/uploads/2018/09/local-ip.alfredworkflow.zip">local ip.alfredworkflow</a></p><p>è§£å‹ç¼© ç›´æ¥æ‰“å¼€ alfredworkflow æ–‡ä»¶ import å¯¼å…¥</p><blockquote><p>å‚è€ƒï¼š<a href="https://www.hhtjim.com/alfred-workflow-instances-workflows-query-local-ip.html">https://www.hhtjim.com/alfred-workflow-instances-workflows-query-local-ip.html</a></p></blockquote><p><a href="https://www.hhtjim.com/alfred-workflow-instances-workflows-query-local-ip.html">https://www.hhtjim.com/alfred-workflow-instances-workflows-query-local-ip.html</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>linux å¤§æ–‡ä»¶æ’åºã€å»é‡</title>
      <link href="/2020/12/25/linux-da-wen-jian-pai-xu-qu-chong/"/>
      <url>/2020/12/25/linux-da-wen-jian-pai-xu-qu-chong/</url>
      
        <content type="html"><![CDATA[<ul><li>ç¼–å†™ shell è„šæœ¬ <code>vim sort_bigfile.sh</code></li></ul><pre><code>#!/bin/bashlines=$(wc -l $1 | sed 's/ .*//g')let lines_per_file=lines/$3split -d -l $lines_per_file $1 part$1for file in part*do{sort file}donewaitsort -smu sort_* &gt; $2rm -f partrm -f sort_</code></pre><p>_</p><ul><li>æ‰§è¡Œ shell, ç›®æ ‡å¤§æ–‡ä»¶ bigfile.txtï¼Œæœ€ç»ˆç”Ÿæˆçš„æ–‡ä»¶ final.txtï¼Œåˆ‡å‰²æ–‡ä»¶åˆ†æ•° 30<br><code>bash sort_bigfile.sh bigfile.txt final.txt 30</code></li></ul><blockquote><p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://www.jianshu.com/p/62bbb72d6bcf">https://www.jianshu.com/p/62bbb72d6bcf</a></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>terrafrom æ ¹æ®å˜é‡åˆ¤æ–­æ˜¯å¦åˆ›å»ºèµ„æº</title>
      <link href="/2020/12/08/terrafrom-gen-ju-bian-liang-pan-duan-shi-fou-chuang-jian-zi-yuan/"/>
      <url>/2020/12/08/terrafrom-gen-ju-bian-liang-pan-duan-shi-fou-chuang-jian-zi-yuan/</url>
      
        <content type="html"><![CDATA[<p>ä¸‹é¢çš„é…ç½®ä¸­ï¼Œè‹¥ var.target_group_addition&nbsp; ä¸º true ï¼Œåˆ™åˆ›å»º aws_lb_target_groupï¼Œè‹¥ var.target_group_addition&nbsp; ä¸º false ï¼Œåˆ™ä¸åˆ›å»ºã€‚</p><pre class=" language-bash"><code class="language-bash">resource <span class="token string">"aws_lb_target_group"</span> <span class="token string">"tg"</span> <span class="token punctuation">{</span>  count <span class="token operator">=</span> var.target_group_addition ? 1 <span class="token keyword">:</span> 0  name                 <span class="token operator">=</span> <span class="token string">"tg-<span class="token variable">${var.name}</span>"</span>  port                 <span class="token operator">=</span> var.tg_port  protocol             <span class="token operator">=</span> var.tg_protocol  vpc_id               <span class="token operator">=</span> var.vpc_id  deregistration_delay <span class="token operator">=</span> var.tg_deregistration_delay  health_check <span class="token punctuation">{</span>    interval            <span class="token operator">=</span> var.tg_healthcheck_interval    path                <span class="token operator">=</span> var.tg_healthcheck_path    port                <span class="token operator">=</span> <span class="token string">"traffic-port"</span>    protocol            <span class="token operator">=</span> var.tg_protocol    <span class="token function">timeout</span>             <span class="token operator">=</span> 5    healthy_threshold   <span class="token operator">=</span> 2    unhealthy_threshold <span class="token operator">=</span> 2    matcher             <span class="token operator">=</span> var.tg_healthcheck_success_code  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> terrafrom </category>
          
      </categories>
      
      
        <tags>
            
            <tag> terrafrom </tag>
            
            <tag> è‡ªåŠ¨åŒ– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¨å›½ DNS</title>
      <link href="/2020/12/08/quan-guo-dns/"/>
      <url>/2020/12/08/quan-guo-dns/</url>
      
        <content type="html"><![CDATA[<p>å‚è€ƒï¼š<a href="https://ip.cn/dns.html">ip.cn</a></p><table><thead><tr><th>åç§°</th><th>DNS æœåŠ¡å™¨ IP åœ°å€</th><th></th></tr></thead><tbody><tr><td>114 DNS</td><td>114.114.114.114</td><td>114.114.115.115</td></tr><tr><td>é˜¿é‡Œ AliDNS</td><td>223.5.5.5</td><td>223.6.6.6</td></tr><tr><td>ç™¾åº¦ BaiduDNS</td><td>180.76.76.76</td><td></td></tr><tr><td>DNSPod DNS+</td><td>119.29.29.29</td><td>119.29.29.29</td></tr><tr><td>CNNIC SDNS</td><td>1.2.4.8</td><td>210.2.4.8</td></tr><tr><td>oneDNS</td><td>117.50.11.11</td><td>52.80.66.66</td></tr></tbody></table><table><thead><tr><th>åç§°</th><th>DNS æœåŠ¡å™¨ IP åœ°å€</th><th></th><th></th></tr></thead><tbody><tr><td>ç”µä¿¡ / ç§»åŠ¨ / é“é€š</td><td></td><td>101.226.4.6</td><td>218.30.118.6</td></tr><tr><td>DNS æ´¾ è”é€š</td><td>123.125.81.6</td><td>140.207.198.6</td><td></td></tr><tr><td>Google DNS</td><td>8.8.8.8</td><td>8.8.4.4</td><td></td></tr><tr><td>IBM Quad9</td><td>9.9.9.9</td><td></td><td></td></tr><tr><td>OpenDNS</td><td>208.67.222.222</td><td>208.67.220.220</td><td></td></tr><tr><td>V2EX DNS</td><td>199.91.73.222</td><td>178.79.131.110</td><td></td></tr></tbody></table><table><thead><tr><th>åç§°</th><th>DNS æœåŠ¡å™¨ IP åœ°å€</th><th></th></tr></thead><tbody><tr><td>å®‰å¾½ç”µä¿¡ DNS</td><td>61.132.163.68</td><td>202.102.213.68</td></tr><tr><td>åŒ—äº¬ç”µä¿¡ DNS</td><td>219.141.136.10</td><td>219.141.140.10</td></tr><tr><td>é‡åº†ç”µä¿¡ DNS</td><td>61.128.192.68</td><td>61.128.128.68</td></tr><tr><td>ç¦å»ºç”µä¿¡ DNS</td><td>218.85.152.99</td><td>218.85.157.99</td></tr><tr><td>ç”˜è‚ƒç”µä¿¡ DNS</td><td>202.100.64.68</td><td>61.178.0.93</td></tr><tr><td>å¹¿ä¸œç”µä¿¡ DNS</td><td>202.96.128.86</td><td>202.96.128.166</td></tr><tr><td>202.96.134.33</td><td>202.96.128.68</td><td></td></tr><tr><td>å¹¿è¥¿ç”µä¿¡ DNS</td><td>202.103.225.68</td><td>202.103.224.68</td></tr><tr><td>è´µå·ç”µä¿¡ DNS</td><td>202.98.192.67</td><td>202.98.198.167</td></tr><tr><td>æ²³å—ç”µä¿¡ DNS</td><td>222.88.88.88</td><td>222.85.85.85</td></tr><tr><td>é»‘é¾™æ±Ÿç”µä¿¡</td><td>219.147.198.230</td><td>219.147.198.242</td></tr><tr><td>æ¹–åŒ—ç”µä¿¡ DNS</td><td>202.103.24.68</td><td>202.103.0.68</td></tr><tr><td>æ¹–å—ç”µä¿¡ DNS</td><td>222.246.129.80</td><td>59.51.78.211</td></tr><tr><td>æ±Ÿè‹ç”µä¿¡ DNS</td><td>218.2.2.2</td><td>218.4.4.4</td></tr><tr><td>61.147.37.1</td><td>218.2.135.1</td><td></td></tr><tr><td>æ±Ÿè¥¿ç”µä¿¡ DNS</td><td>202.101.224.69</td><td>202.101.226.68</td></tr><tr><td>å†…è’™å¤ç”µä¿¡</td><td>219.148.162.31</td><td>222.74.39.50</td></tr><tr><td>å±±ä¸œç”µä¿¡ DNS</td><td>219.146.1.66</td><td>219.147.1.66</td></tr><tr><td>é™•è¥¿ç”µä¿¡ DNS</td><td>218.30.19.40</td><td>61.134.1.4</td></tr><tr><td>ä¸Šæµ·ç”µä¿¡ DNS</td><td>202.96.209.133</td><td>116.228.111.118</td></tr><tr><td>202.96.209.5</td><td>180.168.255.118</td><td></td></tr><tr><td>å››å·ç”µä¿¡ DNS</td><td>61.139.2.69</td><td>218.6.200.139</td></tr><tr><td>å¤©æ´¥ç”µä¿¡ DNS</td><td>219.150.32.132</td><td>219.146.0.132</td></tr><tr><td>äº‘å—ç”µä¿¡ DNS</td><td>222.172.200.68</td><td>61.166.150.123</td></tr><tr><td>æµ™æ±Ÿç”µä¿¡ DNS</td><td>202.101.172.35</td><td>61.153.177.196</td></tr><tr><td>61.153.81.75</td><td>60.191.244.5</td><td></td></tr></tbody></table><table><thead><tr><th>åç§°</th><th>DNS æœåŠ¡å™¨ IP åœ°å€</th><th></th></tr></thead><tbody><tr><td>åŒ—äº¬è”é€š DNS</td><td>123.123.123.123</td><td>123.123.123.124</td></tr><tr><td>202.106.0.20</td><td>202.106.195.68</td><td></td></tr><tr><td>é‡åº†è”é€š DNS</td><td>221.5.203.98</td><td>221.7.92.98</td></tr><tr><td>å¹¿ä¸œè”é€š DNS</td><td>210.21.196.6</td><td>221.5.88.88</td></tr><tr><td>æ²³åŒ—è”é€š DNS</td><td>202.99.160.68</td><td>202.99.166.4</td></tr><tr><td>æ²³å—è”é€š DNS</td><td>202.102.224.68</td><td>202.102.227.68</td></tr><tr><td>é»‘é¾™æ±Ÿè”é€š</td><td>202.97.224.69</td><td>202.97.224.68</td></tr><tr><td>å‰æ—è”é€š DNS</td><td>202.98.0.68</td><td>202.98.5.68</td></tr><tr><td>æ±Ÿè‹è”é€š DNS</td><td>221.6.4.66</td><td>221.6.4.67</td></tr><tr><td>å†…è’™å¤è”é€š</td><td>202.99.224.68</td><td>202.99.224.8</td></tr><tr><td>å±±ä¸œè”é€š DNS</td><td>202.102.128.68</td><td>202.102.152.3</td></tr><tr><td>202.102.134.68</td><td>202.102.154.3</td><td></td></tr><tr><td>å±±è¥¿è”é€š DNS</td><td>202.99.192.66</td><td>202.99.192.68</td></tr><tr><td>é™•è¥¿è”é€š DNS</td><td>221.11.1.67</td><td>221.11.1.68</td></tr><tr><td>ä¸Šæµ·è”é€š DNS</td><td>210.22.70.3</td><td>210.22.84.3</td></tr><tr><td>å››å·è”é€š DNS</td><td>119.6.6.6</td><td>124.161.87.155</td></tr><tr><td>å¤©æ´¥è”é€š DNS</td><td>202.99.104.68</td><td>202.99.96.68</td></tr><tr><td>æµ™æ±Ÿè”é€š DNS</td><td>221.12.1.227</td><td>221.12.33.227</td></tr><tr><td>è¾½å®è”é€š DNS</td><td>202.96.69.38</td><td>202.96.64.68</td></tr></tbody></table><table><thead><tr><th>åç§°</th><th>DNS æœåŠ¡å™¨ IP åœ°å€</th><th></th></tr></thead><tbody><tr><td>æ±Ÿè‹ç§»åŠ¨ DNS</td><td>221.131.143.69</td><td>112.4.0.55</td></tr><tr><td>å®‰å¾½ç§»åŠ¨ DNS</td><td>211.138.180.2</td><td>211.138.180.3</td></tr><tr><td>å±±ä¸œç§»åŠ¨ DNS</td><td>218.201.96.130</td><td>211.137.191.26</td></tr></tbody></table><p><a href="https://ip.cn/dns.html">https://ip.cn/dns.html</a></p>]]></content>
      
      
      <categories>
          
          <category> ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dns </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>go æŒ‡å®š dns æµ‹è¯• dns server è§£ææƒ…å†µ</title>
      <link href="/2020/12/08/go-zhi-ding-dns-ce-shi-dns-server-jie-xi-qing-kuang/"/>
      <url>/2020/12/08/go-zhi-ding-dns-ce-shi-dns-server-jie-xi-qing-kuang/</url>
      
        <content type="html"><![CDATA[<pre class=" language-go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span>    <span class="token string">"log"</span>    <span class="token string">"github.com/bogdanovich/dns_resolver"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    resolver <span class="token operator">:=</span> dns_resolver<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"8.8.8.8"</span><span class="token punctuation">,</span> <span class="token string">"8.8.4.4"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// OR</span>    <span class="token comment" spellcheck="true">// resolver := dns_resolver.NewFromResolvConf("resolv.conf")</span>    <span class="token comment" spellcheck="true">// In case of i/o timeout</span>    resolver<span class="token punctuation">.</span>RetryTimes <span class="token operator">=</span> <span class="token number">5</span>    ip<span class="token punctuation">,</span> err <span class="token operator">:=</span> resolver<span class="token punctuation">.</span><span class="token function">LookupHost</span><span class="token punctuation">(</span><span class="token string">"google.com"</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    log<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// Output [216.58.192.46]</span><span class="token punctuation">}</span></code></pre><p><a href="https://github.com/bogdanovich/dns_resolver">https://github.com/bogdanovich/dns_resolver</a></p>]]></content>
      
      
      <categories>
          
          <category> go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dns </tag>
            
            <tag> go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginx ä¹‹ proxy_passè¯¦è§£</title>
      <link href="/2020/12/08/nginx-zhi-proxy-pass-xiang-jie/"/>
      <url>/2020/12/08/nginx-zhi-proxy-pass-xiang-jie/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ nginx ä¸­é…ç½® proxy_pass ä»£ç†è½¬å‘æ—¶ï¼Œå¦‚æœåœ¨ proxy_pass åé¢çš„ url åŠ  /ï¼Œè¡¨ç¤ºç»å¯¹æ ¹è·¯å¾„ï¼›å¦‚æœæ²¡æœ‰ /ï¼Œè¡¨ç¤ºç›¸å¯¹è·¯å¾„ï¼ŒæŠŠåŒ¹é…çš„è·¯å¾„éƒ¨åˆ†ä¹Ÿç»™ä»£ç†èµ°ã€‚</p><p>å‡è®¾ä¸‹é¢å››ç§æƒ…å†µåˆ†åˆ«ç”¨ <a href="http://192.168.1.1/proxy/test.html">http://192.168.1.1/proxy/test.html</a> è¿›è¡Œè®¿é—®ã€‚</p><p>ç¬¬ä¸€ç§ï¼š</p><pre><code>location /proxy/ {    proxy_pass http://127.0.0.1/;}</code></pre><p>ä»£ç†åˆ° URLï¼š<a href="http://127.0.0.1/test.html">http://127.0.0.1/test.html</a></p><p>ç¬¬äºŒç§ï¼ˆç›¸å¯¹äºç¬¬ä¸€ç§ï¼Œæœ€åå°‘ä¸€ä¸ª / ï¼‰</p><pre><code>location /proxy/ {    proxy_pass http://127.0.0.1;}</code></pre><p>ä»£ç†åˆ° URLï¼š<a href="http://127.0.0.1/proxy/test.html">http://127.0.0.1/proxy/test.html</a></p><p>ç¬¬ä¸‰ç§ï¼š</p><pre><code>location /proxy/ {   proxy_pass [http://127.0.0.1/aaa/](http://127.0.0.1/aaa/);}</code></pre><p>ä»£ç†åˆ° URLï¼š<a href="http://127.0.0.1/aaa/test.html">http://127.0.0.1/aaa/test.html</a></p><p>ç¬¬å››ç§ï¼ˆç›¸å¯¹äºç¬¬ä¸‰ç§ï¼Œæœ€åå°‘ä¸€ä¸ª / ï¼‰</p><pre><code>location /proxy/ {    proxy_pass [http://127.0.0.1/aaa](http://127.0.0.1/aaa);}</code></pre><p>ä»£ç†åˆ° URLï¼š<a href="http://127.0.0.1/aaatest.html">http://127.0.0.1/aaatest.html</a></p><p>nginx ä¸­æœ‰ä¸¤ä¸ªæ¨¡å—éƒ½æœ‰<code>proxy_pass</code>æŒ‡ä»¤ã€‚</p><ul><li><code>ngx_http_proxy_module</code>çš„<code>proxy_pass</code>ï¼š<br>è¯­æ³•: proxy_pass URL;åœºæ™¯: location, if in location, limit_except è¯´æ˜: è®¾ç½®åç«¯ä»£ç†æœåŠ¡å™¨çš„åè®®(protocol)å’Œåœ°å€(address),ä»¥åŠ location ä¸­å¯ä»¥åŒ¹é…çš„ä¸€ä¸ªå¯é€‰çš„ URIã€‚åè®®å¯ä»¥æ˜¯â€httpâ€æˆ–â€httpsâ€ã€‚åœ°å€å¯ä»¥æ˜¯ä¸€ä¸ªåŸŸåæˆ– ip åœ°å€å’Œç«¯å£ï¼Œæˆ–è€…ä¸€ä¸ª unix-domain socket è·¯å¾„ã€‚ &nbsp; è¯¦è§å®˜æ–¹æ–‡æ¡£: <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_passURI%E7%9A%84%E5%8C%B9%E9%85%8D%EF%BC%8C%E6%9C%AC%E6%96%87%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86%E9%87%8D%E7%82%B9%E8%AE%A8%E8%AE%BA%E3%80%82">http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_passURIçš„åŒ¹é…ï¼Œæœ¬æ–‡ç¬¬å››éƒ¨åˆ†é‡ç‚¹è®¨è®ºã€‚</a></li><li><code>ngx_stream_proxy_module</code>çš„<code>proxy_pass</code>ï¼š<br>è¯­æ³•: proxy_pass address;åœºæ™¯: server è¯´æ˜: è®¾ç½®åç«¯ä»£ç†æœåŠ¡å™¨çš„åœ°å€ã€‚è¿™ä¸ªåœ°å€(address)å¯ä»¥æ˜¯ä¸€ä¸ªåŸŸåæˆ– ip åœ°å€å’Œç«¯å£ï¼Œæˆ–è€…ä¸€ä¸ª unix-domain socket è·¯å¾„ã€‚ &nbsp; è¯¦è§å®˜æ–¹æ–‡æ¡£: <a href="http://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_pass">http://nginx.org/en/docs/stream/ngx_stream_proxy_module.html#proxy_pass</a></li></ul><h2 id="äºŒã€ä¸¤ä¸ªproxy-passçš„å…³ç³»å’ŒåŒºåˆ«"><a href="#äºŒã€ä¸¤ä¸ªproxy-passçš„å…³ç³»å’ŒåŒºåˆ«" class="headerlink" title="äºŒã€ä¸¤ä¸ªproxy_passçš„å…³ç³»å’ŒåŒºåˆ«"></a>äºŒã€ä¸¤ä¸ª<code>proxy_pass</code>çš„å…³ç³»å’ŒåŒºåˆ«</h2><p>åœ¨ä¸¤ä¸ªæ¨¡å—ä¸­ï¼Œä¸¤ä¸ª<code>proxy_pass</code>éƒ½æ˜¯ç”¨æ¥åšåç«¯ä»£ç†çš„æŒ‡ä»¤ã€‚<br><code>ngx_stream_proxy_module</code>æ¨¡å—çš„<code>proxy_pass</code>æŒ‡ä»¤åªèƒ½åœ¨ server æ®µä½¿ç”¨ä½¿ç”¨, åªéœ€è¦æä¾›åŸŸåæˆ– ip åœ°å€å’Œç«¯å£ã€‚å¯ä»¥ç†è§£ä¸ºç«¯å£è½¬å‘ï¼Œå¯ä»¥æ˜¯ tcp ç«¯å£ï¼Œä¹Ÿå¯ä»¥æ˜¯ udp ç«¯å£ã€‚<br><code>ngx_http_proxy_module</code>æ¨¡å—çš„<code>proxy_pass</code>æŒ‡ä»¤éœ€è¦åœ¨ location æ®µï¼Œlocation ä¸­çš„ if æ®µï¼Œlimit_except æ®µä¸­ä½¿ç”¨ï¼Œå¤„ç†éœ€è¦æä¾›åŸŸåæˆ– ip åœ°å€å’Œç«¯å£å¤–ï¼Œè¿˜éœ€è¦æä¾›åè®®ï¼Œå¦‚ â€œhttpâ€ æˆ– â€œhttpsâ€ï¼Œè¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„ uri å¯ä»¥é…ç½®ã€‚</p><h2 id="ä¸‰ã€proxy-pass-çš„å…·ä½“ç”¨æ³•"><a href="#ä¸‰ã€proxy-pass-çš„å…·ä½“ç”¨æ³•" class="headerlink" title="ä¸‰ã€proxy_pass çš„å…·ä½“ç”¨æ³•"></a>ä¸‰ã€proxy_pass çš„å…·ä½“ç”¨æ³•</h2><h3 id="ngx-stream-proxy-moduleæ¨¡å—çš„proxy-passæŒ‡ä»¤"><a href="#ngx-stream-proxy-moduleæ¨¡å—çš„proxy-passæŒ‡ä»¤" class="headerlink" title="ngx_stream_proxy_moduleæ¨¡å—çš„proxy_passæŒ‡ä»¤"></a><code>ngx_stream_proxy_module</code>æ¨¡å—çš„<code>proxy_pass</code>æŒ‡ä»¤</h3><pre><code>server {    listen 127.0.0.1:12345;    proxy_pass 127.0.0.1:8080;}server {    listen 12345;    proxy_connect_timeout 1s;    proxy_timeout 1m;    proxy_pass example.com:12345;}server {    listen 53 udp;    proxy_responses 1;    proxy_timeout 20s;    proxy_pass dns.example.com:53;}server {    listen [::1]:12345;    proxy_pass unix:/tmp/stream.socket;}</code></pre><h3 id="ngx-http-proxy-moduleæ¨¡å—çš„proxy-passæŒ‡ä»¤"><a href="#ngx-http-proxy-moduleæ¨¡å—çš„proxy-passæŒ‡ä»¤" class="headerlink" title="ngx_http_proxy_moduleæ¨¡å—çš„proxy_passæŒ‡ä»¤"></a><code>ngx_http_proxy_module</code>æ¨¡å—çš„<code>proxy_pass</code>æŒ‡ä»¤</h3><pre><code>server {    listen      80;    server_name www.test.com;    location /some/path/ {        proxy_pass http:    }    location /testb {        proxy_pass http:    }    location /google {        if ( $geoip_country_code ~ (RU|CN) ) {            proxy_pass http:        }    }    location /yongfu/ {        proxy_pass http:        limit_except PUT DELETE {            proxy_pass http:        }    }}</code></pre><h2 id="å››ã€proxy-passåï¼Œåç«¯æœåŠ¡å™¨çš„url-request-uri-æƒ…å†µåˆ†æ"><a href="#å››ã€proxy-passåï¼Œåç«¯æœåŠ¡å™¨çš„url-request-uri-æƒ…å†µåˆ†æ" class="headerlink" title="å››ã€proxy_passåï¼Œåç«¯æœåŠ¡å™¨çš„url(request_uri) æƒ…å†µåˆ†æ"></a>å››ã€<code>proxy_pass</code>åï¼Œåç«¯æœåŠ¡å™¨çš„<code>url</code>(<code>request_uri</code>) æƒ…å†µåˆ†æ</h2><pre><code>server {    listen      80;    server_name www.test.com;    # æƒ…å½¢A    # è®¿é—® http://www.test.com/testa/aaaa    # åç«¯çš„request_uriä¸º: /testa/aaaa    location ^~ /testa/ {        proxy_pass http://127.0.0.1:8801;    }    # æƒ…å½¢B    # è®¿é—® http://www.test.com/testb/bbbb    # åç«¯çš„request_uriä¸º: /bbbb    location ^~ /testb/ {        proxy_pass http://127.0.0.1:8801/;    }    # æƒ…å½¢C    # ä¸‹é¢è¿™æ®µlocationæ˜¯æ­£ç¡®çš„    location ~ /testc {        proxy_pass http://127.0.0.1:8801;    }    # æƒ…å½¢D    # ä¸‹é¢è¿™æ®µlocationæ˜¯é”™è¯¯çš„    #    # nginx -t æ—¶ï¼Œä¼šæŠ¥å¦‚ä¸‹é”™è¯¯:    #    # nginx: [emerg] "proxy_pass" cannot have URI part in location given by regular    # expression, or inside named location, or inside "if" statement, or inside    # "limit_except" block in /opt/app/nginx/conf/vhost/test.conf:17    #    # å½“locationä¸ºæ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œproxy_pass ä¸èƒ½åŒ…å«URIéƒ¨åˆ†ã€‚æœ¬ä¾‹ä¸­åŒ…å«äº†"/"    location ~ /testd {        proxy_pass http://127.0.0.1:8801/;   # è®°ä½ï¼Œlocationä¸ºæ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œä¸èƒ½è¿™æ ·å†™ï¼ï¼ï¼    }    # æƒ…å½¢E    # è®¿é—® http://www.test.com/ccc/bbbb    # åç«¯çš„request_uriä¸º: /aaa/ccc/bbbb    location /ccc/ {        proxy_pass http://127.0.0.1:8801/aaa$request_uri;    }    # æƒ…å½¢F    # è®¿é—® http://www.test.com/namea/ddd    # åç«¯çš„request_uriä¸º: /yongfu?namea=ddd    location /namea/ {        rewrite    /namea/([^/]+) /yongfu?namea=$1 break;        proxy_pass http://127.0.0.1:8801;    }    # æƒ…å½¢G    # è®¿é—® http://www.test.com/nameb/eee    # åç«¯çš„request_uriä¸º: /yongfu?nameb=eee    location /nameb/ {        rewrite    /nameb/([^/]+) /yongfu?nameb=$1 break;        proxy_pass http://127.0.0.1:8801/;    }    access_log /data/logs/www/www.test.com.log;}server {    listen      8801;    server_name www.test.com;    root        /data/www/test;    index       index.php index.html;    rewrite ^(.*)$ /test.php?u=$1 last;    location ~ \.php$ {        try_files $uri =404;        fastcgi_pass unix:/tmp/php-cgi.sock;        fastcgi_index index.php;        include fastcgi.conf;    }    access_log /data/logs/www/www.test.com.8801.log;}</code></pre><p>æ–‡ä»¶: <code>/data/www/test/test.php</code></p><pre><code>&lt;?phpecho '$_SERVER[REQUEST_URI]:' . $_SERVER['REQUEST_URI'];</code></pre><p>é€šè¿‡æŸ¥çœ‹ $_SERVER[â€˜REQUEST_URIâ€™] çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯æ¬¡è¯·æ±‚çš„åç«¯çš„ request_uri çš„å€¼ï¼Œè¿›è¡ŒéªŒè¯ã€‚</p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>æƒ…å½¢ A å’Œæƒ…å½¢ B è¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥çŸ¥é“<code>proxy_pass</code>åå¸¦ä¸€ä¸ª URI, å¯ä»¥æ˜¯æ–œæ  (/) ä¹Ÿå¯ä»¥æ˜¯å…¶ä»– uriï¼Œå¯¹åç«¯<code>request_uri</code>å˜é‡çš„å½±å“ã€‚<br>æƒ…å½¢ D è¯´æ˜ï¼Œå½“ location ä¸ºæ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œ<code>proxy_pass</code>ä¸èƒ½åŒ…å« URI éƒ¨åˆ†ã€‚<br>æƒ…å½¢ E é€šè¿‡å˜é‡ ($request_uri, ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å˜é‡)ï¼Œå¯¹åç«¯çš„<code>request_uri</code>è¿›è¡Œæ”¹å†™ã€‚<br>æƒ…å½¢ F å’Œæƒ…å½¢ G é€šè¿‡ rewrite é…åˆ break æ ‡å¿—, å¯¹ url è¿›è¡Œæ”¹å†™ï¼Œå¹¶æ”¹å†™åç«¯çš„<code>request_uri</code>ã€‚éœ€è¦æ³¨æ„ï¼Œ<code>proxy_pass</code>åœ°å€çš„ URI éƒ¨åˆ†åœ¨æƒ…å½¢ G ä¸­æ— æ•ˆï¼Œä¸ç®¡å¦‚ä½•è®¾ç½®ï¼Œéƒ½ä¼šè¢«å¿½ç•¥ã€‚</p><p>å‚è€ƒï¼š<a href="https://www.jianshu.com/p/b010c9302cd0">https://www.jianshu.com/p/b010c9302cd0</a><br><a href="https://www.jianshu.com/p/b010c9302cd0">https://www.jianshu.com/p/b010c9302cd0</a></p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº”åˆ†é’Ÿäº†è§£LogQL</title>
      <link href="/2020/11/26/wu-fen-zhong-liao-jie-logql/"/>
      <url>/2020/11/26/wu-fen-zhong-liao-jie-logql/</url>
      
        <content type="html"><![CDATA[<p>å— PromQL çš„å¯å‘ï¼ŒLoki ä¹Ÿæœ‰è‡ªå·±çš„ LogQL æŸ¥è¯¢è¯­å¥ã€‚æ ¹æ®å®˜æ–¹çš„è¯´æ³•ï¼Œå®ƒå°±åƒä¸€ä¸ª<code>åˆ†å¸ƒå¼çš„ grep æ—¥å¿—èšåˆæŸ¥çœ‹å™¨</code>ã€‚å’Œ PromeQL ä¸€æ ·ï¼ŒLogQL ä¹Ÿæ˜¯ä½¿ç”¨æ ‡ç­¾å’Œè¿ç®—ç¬¦è¿›è¡Œè¿‡æ»¤ï¼Œå®ƒä¸»è¦åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>log stream selector ï¼ˆæ—¥å¿—æµé€‰æ‹©å™¨ï¼‰</li><li>filter expression ï¼ˆè¿‡æ»¤å™¨è¡¨è¾¾å¼ï¼‰</li></ul><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f9ceca16a2844e63bb39298f06076abf~tplv-k3u1fbpfcp-watermark.image#align=left&amp;display=inline&amp;height=211&amp;margin=%5Bobject%20Object%5D&amp;originHeight=211&amp;originWidth=908&amp;status=done&amp;style=none&amp;width=908"><br>æˆ‘ä»¬ç”¨è¿™ä¸¤éƒ¨åˆ†å°±å¯ä»¥åœ¨ Loki ä¸­ç»„åˆå‡ºæˆ‘ä»¬æƒ³è¦çš„åŠŸèƒ½ï¼Œé€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥æ‹¿æ¥åšå¦‚ä¸‹åŠŸèƒ½</p><ul><li>æ ¹æ®æ—¥å¿—æµé€‰æ‹©å™¨æŸ¥çœ‹æ—¥å¿—å†…å®¹</li><li>é€šè¿‡è¿‡æ»¤è§„åˆ™åœ¨æ—¥å¿—æµä¸­è®¡ç®—ç›¸å…³çš„åº¦é‡æŒ‡æ ‡</li></ul><h4 id="log-stream-selector"><a href="#log-stream-selector" class="headerlink" title="log stream selector"></a>log stream selector</h4><p>æ—¥å¿—æµé€‰æ‹©å™¨è¿™éƒ¨åˆ†å’Œ PromQL çš„è¯­æ³•ä¸€æ ·ï¼Œä¸»è¦ä¹Ÿæ˜¯é€šè¿‡é‡‡é›†ä¸Šæ¥çš„æ—¥å¿— label æ¥ç¡®å®šä½ è¦æŸ¥è¯¢çš„æ—¥å¿—æµã€‚é€šå¸¸ label çš„åŒ¹é…è¿ç®—æ”¯æŒä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>=: å®Œå…¨åŒ¹é…</li><li>!=: ä¸åŒ¹é…</li><li>=~: æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</li><li>!~: æ­£åˆ™è¡¨è¾¾å¼ä¸åŒ¹é…</li></ul><p>ä¸¾ä¸ªä¾‹å­</p><pre><code>{name=~"mysql.+", env="prod"}{name!~"mysql.+", env="prod"}{name!~`mysql-\d+`,env="prod"}å¤åˆ¶ä»£ç </code></pre><p>ä»¥ä¸Šè¯­å¥éƒ½å¯ä»¥æŸ¥å‡ºæ‰€æœ‰ä¸ä¹‹åŒ¹é…çš„æ—¥å¿—å†…å®¹</p><h4 id="filter-expression"><a href="#filter-expression" class="headerlink" title="filter expression"></a>filter expression</h4><p>åœ¨æŸ¥çœ‹å…¨æ–‡çš„æ—¥å¿—æ—¶ï¼Œé€šå¸¸ä¼šç”¨<code>grep</code>ç­‰ä¸€äº›å·¥å…·æ¥æŸ¥æ‰¾æˆ‘ä»¬å…³å¿ƒçš„æ—¥å¿—å†…å®¹ã€‚LogQL çš„è¡¨è¾¾å¼å°±æ˜¯å¹²è¿™ä¸ªçš„ã€‚å½“å‰ï¼Œè¿‡æ»¤çš„è¡¨è¾¾å¼ä¸»è¦æ”¯æŒå¦‚ä¸‹ 4 ç§ï¼š</p><ul><li>|=ï¼šæ—¥å¿—è¡ŒåŒ…å«çš„å­—ç¬¦ä¸²</li><li>!=ï¼šæ—¥å¿—è¡Œä¸åŒ…å«çš„å­—ç¬¦ä¸²</li><li>|~ï¼šæ—¥å¿—è¡ŒåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼</li><li>!~ï¼šæ—¥å¿—è¡Œä¸æ­£åˆ™è¡¨è¾¾å¼ä¸åŒ¹é…</li></ul><p>ä¸¾ä¸ªä¾‹å­</p><pre><code>{job="mysql"} |= "error"{name="kafka"} |~ "tsdb-ops.*io:2003"{name="cassandra"} |~  `error=\w+`{instance=~"kafka-[23]",name="kafka"} != "kafka.server:type=ReplicaManager"å¤åˆ¶ä»£ç </code></pre><p>å¦‚æœè¦è¿›è¡Œå¤šæ¬¡åŒ¹é…çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¹Ÿå¯ä»¥åƒåœ¨ linux ç”¨ç®¡é“çš„æ–¹å¼è¿½åŠ è§„åˆ™ï¼š</p><pre><code>{job="mysql"} |= "error" != "timeout"å¤åˆ¶ä»£ç </code></pre><h4 id="æ—¥å¿—åº¦é‡"><a href="#æ—¥å¿—åº¦é‡" class="headerlink" title="æ—¥å¿—åº¦é‡"></a>æ—¥å¿—åº¦é‡</h4><p>LogQL åŒæ ·æ”¯æŒé€šè¿‡å‡½æ•°æ–¹å¼å°†æ—¥å¿—æµè¿›è¡Œåº¦é‡ï¼Œé€šå¸¸æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è®¡ç®—æ¶ˆæ¯çš„é”™è¯¯ç‡æˆ–è€…æ’åºä¸€æ®µæ—¶é—´å†…çš„åº”ç”¨æ—¥å¿—è¾“å‡º Top Nã€‚</p><h5 id="åŒºé—´å‘é‡"><a href="#åŒºé—´å‘é‡" class="headerlink" title="åŒºé—´å‘é‡"></a>åŒºé—´å‘é‡</h5><p>LogQL åŒæ ·ä¹Ÿæ”¯æŒæœ‰é™çš„<code>åŒºé—´å‘é‡</code>åº¦é‡è¯­å¥ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿå’Œ PromQL ç±»ä¼¼ï¼Œå¸¸ç”¨å‡½æ•°ä¸»è¦æ˜¯å¦‚ä¸‹ 4 ä¸ªï¼š</p><ul><li>rate: è®¡ç®—æ¯ç§’çš„æ—¥å¿—æ¡ç›®</li><li>count_over_time: å¯¹æŒ‡å®šèŒƒå›´å†…çš„æ¯ä¸ªæ—¥å¿—æµçš„æ¡ç›®è¿›è¡Œè®¡æ•°</li><li>bytes_rate: è®¡ç®—æ—¥å¿—æµæ¯ç§’çš„å­—èŠ‚æ•°</li><li>bytes_over_time: å¯¹æŒ‡å®šèŒƒå›´å†…çš„æ¯ä¸ªæ—¥å¿—æµçš„ä½¿ç”¨çš„å­—èŠ‚æ•°</li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><pre><code>#è®¡ç®—nginxçš„qpsrate({filename="/var/log/nginx/access.log"}[5m]))#è®¡ç®—kernelè¿‡å»5åˆ†é’Ÿå‘ç”Ÿoomçš„æ¬¡æ•°count_over_time({filename="/var/log/message"} |~ "oom_kill_process" [5m]))å¤åˆ¶ä»£ç </code></pre><h5 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h5><p>LogQL ä¹Ÿæ”¯æŒèšåˆè¿ç®—ï¼Œæˆ‘ä»¬å¯ç”¨å®ƒæ¥èšåˆå•ä¸ªå‘é‡å†…çš„å…ƒç´ ï¼Œä»è€Œäº§ç”Ÿä¸€ä¸ªå…·æœ‰è¾ƒå°‘å…ƒç´ çš„æ–°å‘é‡ï¼Œå½“å‰æ”¯æŒçš„èšåˆå‡½æ•°å¦‚ä¸‹ï¼š</p><ul><li>sumï¼šæ±‚å’Œ</li><li>minï¼šæœ€å°å€¼</li><li>maxï¼šæœ€å¤§å€¼</li><li>avgï¼šå¹³å‡å€¼</li><li>stddevï¼šæ ‡å‡†å·®</li><li>stdvarï¼šæ ‡å‡†æ–¹å·®</li><li>countï¼šè®¡æ•°</li><li>bottomkï¼šæœ€å°çš„ k ä¸ªå…ƒç´ </li><li>topkï¼šæœ€å¤§çš„ k ä¸ªå…ƒç´ </li></ul><p>èšåˆå‡½æ•°é€šå¸¸æˆ‘ä»¬ç”¨å¦‚ä¸‹è¡¨è¾¾å¼æè¿°ï¼š</p><pre><code>&lt;aggr-op&gt;([parameter,] &lt;vector expression&gt;) [without|by (&lt;label list&gt;)]å¤åˆ¶ä»£ç </code></pre><p>å¯¹äºéœ€è¦å¯¹æ ‡ç­¾è¿›è¡Œåˆ†ç»„æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code>without</code>æˆ–è€…<code>by</code>æ¥åŒºåˆ†ï¼Œæ¯”å¦‚</p><pre><code>#è®¡ç®—nginxçš„qpsï¼Œå¹¶æŒ‰ç…§pod_nameæ¥åˆ†ç»„sum(rate({filename="/var/log/nginx/access.log"}[5m])) by (pod_name)å¤åˆ¶ä»£ç </code></pre><p>åªæœ‰åœ¨ä½¿ç”¨ bottomk å’Œ topk å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å‡½æ•°è¾“å…¥ç›¸å…³çš„å‚æ•°ï¼Œæ¯”å¦‚</p><pre><code>#è®¡ç®—nginxçš„qpsæœ€å¤§çš„å‰5ä¸ªï¼Œå¹¶æŒ‰ç…§pod_nameæ¥åˆ†ç»„topk(5,sum(rate({filename="/var/log/nginx/access.log"}[5m])) by (pod_name))å¤åˆ¶ä»£ç </code></pre><h5 id="æ•°å­¦è®¡ç®—"><a href="#æ•°å­¦è®¡ç®—" class="headerlink" title="æ•°å­¦è®¡ç®—"></a>æ•°å­¦è®¡ç®—</h5><p>æœ‰åŒå­¦è¦é—®äº†ï¼ŒLoki å­˜çš„ä¸æ˜¯æ—¥å¿—å—ï¼Ÿéƒ½æ˜¯æ–‡æœ¬ï¼Œæ€ä¹ˆè®¡ç®—å•Šï¼Ÿæ˜¾ç„¶ LogQL ä¸­çš„æ•°å­¦è¿ç®—è¿˜æ˜¯é¢å‘åŒºé—´å‘é‡æ“ä½œçš„ã€‚LogQL ä¸­çš„æ”¯æŒçš„äºŒè¿›åˆ¶è¿ç®—ç¬¦å¦‚ä¸‹ï¼š</p><ul><li>+ï¼š åŠ æ³•</li><li>-ï¼š å‡æ³•</li><li>*ï¼š ä¹˜æ³•</li><li>/ï¼š é™¤æ³•</li><li>%ï¼š æ±‚æ¨¡</li><li>^ï¼š æ±‚å¹‚</li></ul><p>æ¯”å¦‚æˆ‘ä»¬è¦æ‰¾åˆ°æŸä¸ªä¸šåŠ¡æ—¥å¿—é‡Œé¢çš„é”™è¯¯ç‡ï¼Œå°±å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼è®¡ç®—ï¼š</p><pre><code>#è®¡ç®—æ—¥å¿—å†…çš„é”™è¯¯ç‡sum(rate({app="foo", level="error"}[1m])) / sum(rate({app="foo"}[1m]))å¤åˆ¶ä»£ç </code></pre><h5 id="é›†åˆè¿ç®—"><a href="#é›†åˆè¿ç®—" class="headerlink" title="é›†åˆè¿ç®—"></a>é›†åˆè¿ç®—</h5><p>é›†åˆè¿ç®—ä»…åœ¨åŒºé—´å‘é‡èŒƒå›´å†…æœ‰æ•ˆï¼Œå½“å‰æ”¯æŒ</p><ul><li>andï¼šå¹¶ä¸”</li><li>orï¼šæˆ–è€…</li><li>unlessï¼šæ’é™¤</li></ul><blockquote><p>å°ç™½å½“å‰è¿˜æ²¡æ‰¾åˆ° LogQL é‡Œé¢é›†åˆè¿ç®—çš„æ¡ˆä¾‹ï¼Œæš‚ä¸”è·³è¿‡</p></blockquote><h5 id="æ¯”è¾ƒè¿ç®—"><a href="#æ¯”è¾ƒè¿ç®—" class="headerlink" title="æ¯”è¾ƒè¿ç®—"></a>æ¯”è¾ƒè¿ç®—</h5><p>LogQL æ”¯æŒçš„æ¯”è¾ƒè¿ç®—ç¬¦åˆ PromQL ä¸€æ ·ï¼Œå‡ä¸ºä»¥ä¸‹å†…å®¹ï¼š</p><ul><li><p>==ï¼š ç­‰äº</p></li><li><p>!=ï¼š ä¸ç­‰äº</p></li><li><blockquote><p>ï¼š å¤§äº</p></blockquote></li><li><blockquote><p>=: å¤§äºæˆ–ç­‰äº</p></blockquote></li><li><p>&lt;ï¼š å°äº</p></li><li><p>&lt;=: å°äºæˆ–ç­‰äº</p></li></ul><p>é€šå¸¸æˆ‘ä»¬ä½¿ç”¨åŒºé—´å‘é‡è®¡ç®—åä¼šåšä¸€ä¸ªé˜ˆå€¼çš„æ¯”è¾ƒï¼Œè¿™å¯¹åº”å‘Šè­¦æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œæ¯”å¦‚ï¼š</p><pre><code># ç»Ÿè®¡5åˆ†é’Ÿå†…errorçº§åˆ«æ—¥å¿—æ¡ç›®å¤§äº10çš„æƒ…å†µcount_over_time({app="foo", level="error"}[5m]) &gt; 10å¤åˆ¶ä»£ç </code></pre><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å¸ƒå°”è®¡ç®—æ¥è¡¨è¾¾ï¼Œæ¯”å¦‚ï¼š</p><pre><code># ç»Ÿè®¡5åˆ†é’Ÿå†…errorçº§åˆ«æ—¥å¿—æ¡ç›®å¤§äº10ä¸ºçœŸï¼Œåæ­£åˆ™ä¸ºå‡count_over_time({app="foo", level="error"}[5m]) &gt; bool 10å¤åˆ¶ä»£ç </code></pre><blockquote><p>è¿™éƒ¨åˆ†åé¢ç»“åˆ Loki ruler ä½¿ç”¨ä¼šæœ‰æ›´å¤šçš„ä½¿ç”¨åœºæ™¯ï¼Œå»ºè®®é…åˆã€ŠLoki å‘Šè­¦çš„æ­£ç¡®å§¿åŠ¿ã€‹ä¸€èµ·é£Ÿç”¨</p></blockquote><h5 id="è¿ç®—ä¼˜å…ˆçº§"><a href="#è¿ç®—ä¼˜å…ˆçº§" class="headerlink" title="è¿ç®—ä¼˜å…ˆçº§"></a>è¿ç®—ä¼˜å…ˆçº§</h5><p>LogQL çš„è¿ç®—ä¼˜å…ˆçº§ä¹Ÿä¿æŒäº†å¸¸è§„çš„æ•°å­¦æ“ä½œé¡ºåºï¼Œå³å¦‚ä¸‹è§„åˆ™ï¼š</p><ol><li>^</li><li>*ï¼Œ /ï¼Œ %</li><li>+ï¼Œ -</li><li>==ï¼Œ!=ï¼Œ &lt;=ï¼Œ &lt;ï¼Œ&gt;=ï¼Œ &gt;</li><li>andï¼Œ unless</li><li>or</li></ol><hr><p>ä½“éªŒæ›´å¥½çš„äº‘åŸç”Ÿæ—¥å¿—æŸ¥è¯¢ç³»ç»Ÿï¼Ÿè¯·å…³æ³¨æˆ‘ä»¬çš„å¼€æºé¡¹ç›®<a href="https://juejin.im/post/6887788337512316941">Dagger</a></p><hr><p><a href="https://juejin.cn/post/6885882888995209224">https://juejin.cn/post/6885882888995209224</a><br><a href="https://juejin.cn/post/6885882888995209224">https://juejin.cn/post/6885882888995209224</a></p>]]></content>
      
      
      <categories>
          
          <category> logging </category>
          
      </categories>
      
      
        <tags>
            
            <tag> logging </tag>
            
            <tag> logql </tag>
            
            <tag> loki </tag>
            
            <tag> grafana </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockeræ­å»ºSVN</title>
      <link href="/2020/11/23/docker-da-jian-svn/"/>
      <url>/2020/11/23/docker-da-jian-svn/</url>
      
        <content type="html"><![CDATA[<h3 id="1-åŸºç¡€ç¯å¢ƒ"><a href="#1-åŸºç¡€ç¯å¢ƒ" class="headerlink" title="1. åŸºç¡€ç¯å¢ƒ"></a>1. åŸºç¡€ç¯å¢ƒ</h3><ul><li>Docker</li><li>docker-compose</li></ul><h3 id="2-å¼€å¯ç®€å•çš„å®¹å™¨å®ä¾‹"><a href="#2-å¼€å¯ç®€å•çš„å®¹å™¨å®ä¾‹" class="headerlink" title="2. å¼€å¯ç®€å•çš„å®¹å™¨å®ä¾‹"></a>2. å¼€å¯ç®€å•çš„å®¹å™¨å®ä¾‹</h3><p>åˆ›å»º docker-compose.yml</p><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># filename: docker-compose.yml</span><span class="token key atrule">svn</span><span class="token punctuation">:</span>  <span class="token key atrule">image</span><span class="token punctuation">:</span> elleflorio/svn<span class="token punctuation">-</span>server  <span class="token key atrule">container_name</span><span class="token punctuation">:</span> svn<span class="token punctuation">-</span>server  <span class="token key atrule">ports</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">"80:80"</span>    <span class="token punctuation">-</span> <span class="token string">"3690:3690"</span>  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> ./svn/svn_repo/<span class="token punctuation">:</span>/home/svn/ <span class="token comment" spellcheck="true"># æŒ‚è½½å­˜æ”¾ç‰ˆæœ¬æ–‡ä»¶å¤¹</span>    <span class="token punctuation">-</span> ./svn/svn_config/<span class="token punctuation">:</span>/etc/subversion/ <span class="token comment" spellcheck="true"># æŒ‚è½½å­˜æ”¾svné…ç½®æ–‡ä»¶å¤¹</span>    <span class="token punctuation">-</span> /etc/localtime<span class="token punctuation">:</span>/etc/localtime<span class="token punctuation">:</span>ro <span class="token comment" spellcheck="true"># ä¸»æœºçš„æ—¶é—´åŒæ­¥åˆ°å®¹å™¨</span>  <span class="token key atrule">restart</span><span class="token punctuation">:</span> always</code></pre><p>å¯åŠ¨ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®¹å™¨</p><pre class=" language-bash"><code class="language-bash">docker-compose up -d</code></pre><h3 id="3-åœ¨æœåŠ¡å™¨åˆ›å»ºä»£ç ä»“åº“"><a href="#3-åœ¨æœåŠ¡å™¨åˆ›å»ºä»£ç ä»“åº“" class="headerlink" title="3. åœ¨æœåŠ¡å™¨åˆ›å»ºä»£ç ä»“åº“"></a>3. åœ¨æœåŠ¡å™¨åˆ›å»ºä»£ç ä»“åº“</h3><pre><code># åˆ›å»ºä»£ç ä»“åº“docker exec -t svn-server svnadmin create /home/svn/test</code></pre><p>ä»¥ä¸Šä»£ç ä¸­ï¼Œåœ¨å®¹å™¨ä¸­çš„ / home/svn/test ç›®å½•åˆ›å»ºä»£ç ä»“åº“ï¼Œä¼šåŒæ­¥åˆ°æœ¬æœºçš„ / var/svn ç›®å½•ã€‚æˆ‘ä»¬å…ˆè¿›è¡Œ svn ä»“åº“é…ç½®ã€‚</p><blockquote><p>SVN åº“ä¸­çš„é…ç½®ç›®å½• conf æœ‰ä¸‰ä¸ªæ–‡ä»¶:</p><ul><li>authz æ˜¯æƒé™æ§åˆ¶æ–‡ä»¶</li><li>passwd æ˜¯å¸å·å¯†ç æ–‡ä»¶</li><li>svnserve.conf æ˜¯ SVN æœåŠ¡ç»¼åˆé…ç½®æ–‡ä»¶</li></ul></blockquote><p><strong>é…ç½®æƒé™é…ç½®æ–‡ä»¶ authz</strong><br>ç¼–è¾‘ authz ï¼Œå†…å®¹å‚è€ƒå¦‚ä¸‹ï¼š<br><em>ç¤ºä¾‹ä»£ç ï¼š/var/svn/test/conf/authz</em></p><pre><code>[groups]#ç”¨æˆ·ç»„admin = master,master#ç”¨æˆ·ç»„æ‰€å¯¹åº”çš„ç›®å½•[/]#åº“ç›®å½•æƒé™@admin = rw#ç”¨æˆ·ç»„æƒé™*=r</code></pre><p><strong>é…ç½®è´¦å·å¯†ç æ–‡ä»¶ passwd</strong><br>ç¼–è¾‘ passwd ï¼Œå†…å®¹å‚è€ƒå¦‚ä¸‹ï¼š<br><em>ç¤ºä¾‹ä»£ç ï¼š/var/svn/test/conf/passwd</em></p><pre><code>[users]# harry = harryssecret# sally = sallyssecretmaster = masteradmin = admin</code></pre><p><strong>é…ç½® SVN æœåŠ¡ç»¼åˆé…ç½®æ–‡ä»¶ svnserve.conf</strong><br>ç¼–è¾‘ svnserve.conf ï¼Œå†…å®¹å‚è€ƒå¦‚ä¸‹ï¼š<br><em>ç¤ºä¾‹ä»£ç ï¼š/var/svn/test/conf/svnserve.conf</em></p><pre><code>[general]# force-username-case = none# åŒ¿åè®¿é—®çš„æƒé™ å¯ä»¥æ˜¯readã€writeï¼Œnoneï¼Œé»˜è®¤ä¸ºreadanon-access = none#ä½¿æˆæƒç”¨æˆ·æœ‰å†™æƒé™auth-access = write#å¯†ç æ•°æ®åº“çš„è·¯å¾„password-db = passwd#è®¿é—®æ§åˆ¶æ–‡ä»¶authz-db = authz#è®¤è¯å‘½åç©ºé—´ï¼ŒSVNä¼šåœ¨è®¤è¯æç¤ºé‡Œæ˜¾ç¤ºï¼Œå¹¶ä¸”ä½œä¸ºå‡­è¯ç¼“å­˜çš„å…³é”®å­—realm = /var/svn/test[sasl]</code></pre><p>å®Œæˆä»¥ä¸Šé…ç½®ä¹‹åï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯æœåŠ¡å™¨ä»£ç ä¸æœ¬åœ°ä»£ç åŒæ­¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20191127221033440.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0MzMwMjg2,size_16,color_FFFFFF,t_70#align=left&amp;display=inline&amp;height=523&amp;margin=%5Bobject%20Object%5D&amp;originHeight=523&amp;originWidth=1056&amp;status=done&amp;style=none&amp;width=1056"></p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†æœ¬æœºç”µè„‘ä»£ç æ¨é€åˆ° SVN ä»“åº“åï¼ŒæœåŠ¡å™¨åˆå°†ä»£ç åŒæ­¥åˆ°é¡¹ç›®ç›®å½•ã€‚</p><h3 id="4-åŒæ­¥ä»£ç åˆ°æœåŠ¡å™¨é¡¹ç›®ç›®å½•"><a href="#4-åŒæ­¥ä»£ç åˆ°æœåŠ¡å™¨é¡¹ç›®ç›®å½•" class="headerlink" title="4. åŒæ­¥ä»£ç åˆ°æœåŠ¡å™¨é¡¹ç›®ç›®å½•"></a>4. åŒæ­¥ä»£ç åˆ°æœåŠ¡å™¨é¡¹ç›®ç›®å½•</h3><p><strong>(1) åœ¨ PC ä¸Šå°†ä»£ç ä¸Šä¼ åˆ° svn ä»“åº“ï¼ˆPC ä¸Šå¿…é¡»å®‰è£… SVNï¼‰</strong></p><pre><code># å°†ä»“åº“ä¸­çš„ä»£ç pullåˆ°æœ¬åœ°,ä¸‹é¢çš„123.123.123.123ä»£è¡¨çš„æ˜¯æœåŠ¡å™¨IPåœ°å€ï¼Œä»¥ä¸‹è¿‡ç¨‹å¯èƒ½ä¼šéœ€è¦è¾“å…¥svnè´¦å·å’Œå¯†ç svn checkout svn://123.123.123.123/test# è¿›å…¥ä»£ç ç›®å½•cd test# åˆ›å»ºç¤ºä¾‹æ–‡ä»¶echo "hello" &gt;&gt; test.txt# æäº¤ä»£ç åˆ°SVNä»“åº“svn add test.txtsvn commit test.txt -m 'test'</code></pre><p><strong>(2) æœåŠ¡å™¨åŒæ­¥ä»£ç </strong></p><pre><code># å°†ä»£ç åŒæ­¥åˆ°é¡¹ç›®ç›®å½•docker exec -t svn-server svn checkout svn://127.0.0.1/test /var/www/html/test --username master --password master --force --no-auth-cache</code></pre><p><strong>(3) è‡ªåŠ¨åŒæ­¥ä»£ç </strong></p><p>å®é™…ä¸Šï¼Œå¦‚æœæˆ‘ä»¬ç”¨äºå¼€å‘çš„ PC æ¯ä¸€æ¬¡å‘æœåŠ¡å™¨æäº¤ä¸€æ¬¡ä»£ç ï¼ŒæœåŠ¡å™¨éƒ½éœ€è¦æ‰‹åŠ¨æ‰§è¡Œä¸€ä¸‹åŒæ­¥å‘½ä»¤ï¼Œæœ¬åœ°ä»£ç æ‰ä¼šåŒæ­¥åˆ°æœåŠ¡å™¨çš„é¡¹ç›®ç›®å½•ã€‚æƒ³å¿…å¾ˆéº»çƒ¦ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ SVN æä¾›çš„é’©å­å»å®ç°ä»£ç è‡ªåŠ¨æ›´æ–°ã€‚</p><pre><code># è¿›å…¥é’©å­é…ç½®æ–‡ä»¶ç›®å½•cd /var/svn/test/hooks# å¤åˆ¶é’©å­æ–‡ä»¶cp post-commit.tmpl post-commit</code></pre><p>æˆ‘ä»¬å°† post-commit.tmpl é’©å­æ–‡ä»¶çš„åç¼€åå»æ‰å³å¯ç”Ÿæ•ˆï¼Œäºæ˜¯æˆ‘ä»¬å¤åˆ¶ä¸€ä»½ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç¼–è¾‘ post-commit æ–‡ä»¶ï¼Œæ³¨é‡Šæ‰å‘é€é‚®ä»¶çš„ä»£ç ã€‚ç„¶ååœ¨ä¸‹é¢åŠ ä¸Šä¸¤è¡Œä»£ç å³å¯ï¼Œå¦‚ä¸‹ï¼š</p><pre><code>REPOS="$1"REV="$2"TXN_NAME="$3"#mailer.py commit "$REPOS" "$REV" /path/to/mailer.conf# è®¾ç½®ç¼–ç export LANG="en_US.UTF-8"# æ›´æ–°ä»£ç åˆ°é¡¹ç›®ç›®å½•svn update --username master --password master /var/www/html/test</code></pre><p>ç¼–è¾‘å®Œæˆé…ç½®æ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦ä¿å­˜å³å¯ï¼Œè‡ªåŠ¨ç”Ÿæ•ˆã€‚æ­¤æ—¶åœ¨ PC ä¸Šä¿®æ”¹é¡¹ç›®å†…å®¹ï¼Œå†æ¬¡æäº¤åˆ°ä»£ç ä»“åº“ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨çš„é¡¹ç›®ç›®å½•ã€‚ä¸å†éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ svn checkout æŒ‡ä»¤</p><hr><blockquote><p>å‚è€ƒæ–‡æ¡£ï¼š<br><a href="https://blog.csdn.net/qq_34330286/article/details/103284582">https://blog.csdn.net/qq_34330286/article/details/103284582</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç‰ˆæœ¬ç®¡ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> svn </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SVNå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2020/11/23/svn-chang-yong-ming-ling/"/>
      <url>/2020/11/23/svn-chang-yong-ming-ling/</url>
      
        <content type="html"><![CDATA[<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># checkoutä»£ç </span>svn co svn://svnbucket.com/xxx/xxx<span class="token comment" spellcheck="true"># æ›´æ–°ä»£ç </span>svn up<span class="token comment" spellcheck="true"># æ·»åŠ æ–°æ–‡ä»¶åˆ°ç‰ˆæœ¬åº“</span>svn add filename<span class="token comment" spellcheck="true"># æ·»åŠ å½“å‰ç›®å½•ä¸‹æ‰€æœ‰phpæ–‡ä»¶</span>svn add *.php<span class="token comment" spellcheck="true"># é€’å½’æ·»åŠ å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–°æ–‡ä»¶</span>svn add <span class="token keyword">.</span> --no-ignore --force<span class="token comment" spellcheck="true"># æäº¤ä»£ç </span>svn commit -m <span class="token string">"æäº¤æè¿°"</span><span class="token comment" spellcheck="true"># æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„æ‰€æœ‰log</span>svn log test.php<span class="token comment" spellcheck="true"># æŸ¥çœ‹æŒ‡å®šç‰ˆæœ¬å·çš„log</span>svn log -r 100<span class="token comment" spellcheck="true"># æ’¤é”€æœ¬åœ°æ–‡ä»¶çš„ä¿®æ”¹ï¼ˆè¿˜æ²¡æäº¤çš„ï¼‰</span>svn revert test.phpsvn revert -r ç›®å½•å<span class="token comment" spellcheck="true"># æ’¤é”€ç›®å½•ä¸‹æ‰€æœ‰æœ¬åœ°ä¿®æ”¹</span>svn revert --recursive ç›®å½•å<span class="token comment" spellcheck="true"># æŸ¥çœ‹å½“å‰å·¥ä½œåŒºçš„æ‰€æœ‰æ”¹åŠ¨</span>svn <span class="token function">diff</span><span class="token comment" spellcheck="true"># æŸ¥çœ‹å½“å‰å·¥ä½œåŒºtest.phpæ–‡ä»¶ä¸æœ€æ–°ç‰ˆæœ¬çš„å·®å¼‚</span>svn <span class="token function">diff</span> test.php<span class="token comment" spellcheck="true"># æŒ‡å®šç‰ˆæœ¬å·æ¯”è¾ƒå·®å¼‚</span>svn <span class="token function">diff</span> -r 200:201 test.php<span class="token comment" spellcheck="true"># æŸ¥çœ‹å½“å‰å·¥ä½œåŒºå’Œç‰ˆæœ¬301ä¸­binç›®å½•çš„å·®å¼‚</span>svn <span class="token function">diff</span> -r 301 bin<span class="token comment" spellcheck="true"># æŸ¥çœ‹å½“å‰å·¥ä½œåŒºçš„çŠ¶æ€</span>svn status<span class="token comment" spellcheck="true"># æŸ¥çœ‹svnä¿¡æ¯</span>svn info<span class="token comment" spellcheck="true"># æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨ï¼Œå¯ä»¥æŒ‡å®š-ræŸ¥çœ‹ï¼ŒæŸ¥çœ‹æŒ‡å®šç‰ˆæœ¬å·çš„æ–‡ä»¶åˆ—è¡¨</span>svn <span class="token function">ls</span>svn <span class="token function">ls</span> -r 100<span class="token comment" spellcheck="true"># æ˜¾ç¤ºæ–‡ä»¶çš„æ¯ä¸€è¡Œæœ€åæ˜¯è°ä¿®æ”¹çš„ï¼ˆå‡ºäº†BUGï¼Œç»å¸¸ç”¨æ¥æŸ¥è¿™æ®µä»£ç æ˜¯è°æ”¹çš„ï¼‰</span>svn blame filename.php<span class="token comment" spellcheck="true"># æŸ¥çœ‹æŒ‡å®šç‰ˆæœ¬çš„æ–‡ä»¶å†…å®¹ï¼Œä¸åŠ ç‰ˆæœ¬å·å°±æ˜¯æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬çš„</span>svn <span class="token function">cat</span> test.py -r 2<span class="token comment" spellcheck="true"># æ¸…ç†</span>svn cleanup<span class="token comment" spellcheck="true"># è‹¥æƒ³åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”æŠŠå®ƒåŠ å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œä½†å¿½ç•¥æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹</span>$ svn <span class="token function">mkdir</span> spool$ svn propset svn:ignore <span class="token string">'*'</span> spool$ svn ci -m <span class="token string">'Adding "spool" and ignoring its contents.'</span><span class="token comment" spellcheck="true"># è‹¥æƒ³åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½†ä¸åŠ å…¥ç‰ˆæœ¬æ§åˆ¶ï¼Œå³å¿½ç•¥è¿™ä¸ªæ–‡ä»¶å¤¹</span>$ <span class="token function">mkdir</span> spool$ svn propset svn:ignore <span class="token string">'spool'</span> <span class="token keyword">.</span>$ svn ci -m <span class="token string">'Ignoring a directory called "spool".'</span><span class="token comment" spellcheck="true"># åˆ‡æ¢å½“å‰é¡¹ç›®åˆ°æŒ‡å®šåˆ†æ”¯ã€‚æœåŠ¡å™¨ä¸Šæ›´æ–°æ–°ç‰ˆæœ¬æˆ‘ä»¬ç»å¸¸å°±ç”¨è¿™ä¸ªå‘½ä»¤æ¥æŠŠå½“å‰ä»£ç åˆ‡æ¢åˆ°æ–°çš„åˆ†æ”¯</span>svn switch svn://svnbucket.com/test/branches/online1.0<span class="token comment" spellcheck="true"># é‡å®šå‘ä»“åº“åœ°å€åˆ°æ–°åœ°å€</span>svn switch --relocate åŸsvnåœ°å€ æ–°svnåœ°å€<span class="token comment" spellcheck="true"># åˆ›å»ºåˆ†æ”¯ï¼Œä»ä¸»å¹²åˆ›å»ºä¸€ä¸ªåˆ†æ”¯ä¿å­˜åˆ°branches/online1.0</span>svn <span class="token function">cp</span> -m <span class="token string">"æè¿°å†…å®¹"</span> http://svnbucket.com/repos/trunk http://svnbucket.com/repos/branches/online1.0<span class="token comment" spellcheck="true"># åˆå¹¶ä¸»å¹²ä¸Šçš„æœ€æ–°ä»£ç åˆ°åˆ†æ”¯ä¸Š</span><span class="token function">cd</span> branches/online1.0svn merge http://svnbucket.com/repos/trunk<span class="token comment" spellcheck="true"># åˆ†æ”¯åˆå¹¶åˆ°ä¸»å¹²</span>svn merge --reintegrate http://svnbucket.com/repos/branches/online1.0<span class="token comment" spellcheck="true"># åˆ é™¤åˆ†æ”¯</span>svn <span class="token function">rm</span> http://svnbucket.com/repos/branches/online1.0<span class="token comment" spellcheck="true"># æŸ¥çœ‹SVNå¸®åŠ©</span>svn <span class="token function">help</span><span class="token comment" spellcheck="true"># æŸ¥çœ‹æŒ‡å®šå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯</span>svn <span class="token function">help</span> commit</code></pre>]]></content>
      
      
      <categories>
          
          <category> ç‰ˆæœ¬ç®¡ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> svn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git åˆ é™¤è¿œç¨‹ tagã€åˆ†æ”¯</title>
      <link href="/2020/03/26/git-shan-chu-yuan-cheng-tag-fen-zhi/"/>
      <url>/2020/03/26/git-shan-chu-yuan-cheng-tag-fen-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ é™¤è¿œç¨‹-Tag"><a href="#åˆ é™¤è¿œç¨‹-Tag" class="headerlink" title="åˆ é™¤è¿œç¨‹ Tag"></a>åˆ é™¤è¿œç¨‹ Tag</h2><p>æ˜¾ç¤ºæœ¬åœ° tag</p><pre><code>git tagRemote_Systems_Operation</code></pre><p>åˆ é™¤æœ¬åœ° tag</p><pre><code>git tag -d Remote_Systems_Operation</code></pre><p>ç”¨ push, åˆ é™¤è¿œç¨‹ tag</p><pre><code>git push origin :refs/tags/Remote_Systems_Operation</code></pre><h2 id="åˆ é™¤è¿œç¨‹åˆ†æ”¯"><a href="#åˆ é™¤è¿œç¨‹åˆ†æ”¯" class="headerlink" title="åˆ é™¤è¿œç¨‹åˆ†æ”¯"></a>åˆ é™¤è¿œç¨‹åˆ†æ”¯</h2><pre><code>git branch -r -d origin/branch-namegit push origin :branch-name</code></pre><p><a href="https://blog.csdn.net/u011974987"><img src="https://profile.csdnimg.cn/8/4/3/3_u011974987#align=left&amp;display=inline&amp;height=75&amp;margin=%5Bobject%20Object%5D&amp;originHeight=75&amp;originWidth=75&amp;status=done&amp;style=none&amp;width=75"><br><img src="https://g.csdnimg.cn/static/user-reg-year/2x/7.png#align=left&amp;display=inline&amp;height=44&amp;margin=%5Bobject%20Object%5D&amp;originHeight=44&amp;originWidth=44&amp;status=done&amp;style=none&amp;width=44"></a></p><p>å‘å¸ƒäº† 81 ç¯‡åŸåˆ›æ–‡ç«  Â· è·èµ 322 Â· è®¿é—®é‡ 57 ä¸‡ +</p>]]></content>
      
      
      <categories>
          
          <category> ç‰ˆæœ¬ç®¡ç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker é•œåƒåŠ é€Ÿé…ç½®</title>
      <link href="/2020/03/21/docker-jing-xiang-jia-su-pei-zhi/"/>
      <url>/2020/03/21/docker-jing-xiang-jia-su-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p>å›½å†…ä» Docker Hub æ‹‰å–é•œåƒæœ‰æ—¶ä¼šé‡åˆ°å›°éš¾ï¼Œæ­¤æ—¶å¯ä»¥é…ç½®é•œåƒåŠ é€Ÿå™¨ã€‚å›½å†…å¾ˆå¤šäº‘æœåŠ¡å•†éƒ½æä¾›äº†å›½å†…åŠ é€Ÿå™¨æœåŠ¡ï¼Œä¾‹å¦‚ï¼š</p><ul><li><a href="https://github.com/Azure/container-service-for-azure-china/blob/master/aks/README.md#22-container-registry-proxy">Azure ä¸­å›½é•œåƒ <code>https://dockerhub.azk8s.cn</code></a></li><li><a href="https://cr.console.aliyun.com/cn-hangzhou/mirrors">é˜¿é‡Œäº‘åŠ é€Ÿå™¨(éœ€ç™»å½•è´¦å·è·å–)</a></li><li><a href="https://www.163yun.com/help/documents/56918246390157312">ç½‘æ˜“äº‘åŠ é€Ÿå™¨ <code>https://hub-mirror.c.163.com</code></a></li></ul><blockquote><p>ç”±äºé•œåƒæœåŠ¡å¯èƒ½å‡ºç°å®•æœºï¼Œå»ºè®®åŒæ—¶é…ç½®å¤šä¸ªé•œåƒã€‚å„ä¸ªé•œåƒç«™æµ‹è¯•ç»“æœè¯·åˆ° <a href="https://github.com/docker-practice/docker-registry-cn-mirror-test/actions">docker-practice/docker-registry-cn-mirror-test</a> æŸ¥çœ‹ã€‚<br>å›½å†…å„å¤§äº‘æœåŠ¡å•†å‡æä¾›äº† Docker é•œåƒåŠ é€ŸæœåŠ¡ï¼Œå»ºè®®æ ¹æ®è¿è¡Œ Docker çš„äº‘å¹³å°é€‰æ‹©å¯¹åº”çš„é•œåƒåŠ é€ŸæœåŠ¡ï¼Œå…·ä½“è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚</p></blockquote><p>æœ¬èŠ‚æˆ‘ä»¬ä»¥ Azure ä¸­å›½é•œåƒ <code>https://dockerhub.azk8s.cn</code> ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚</p><h2 id="Ubuntu-16-04-ã€Debian-8-ã€CentOS-7"><a href="#Ubuntu-16-04-ã€Debian-8-ã€CentOS-7" class="headerlink" title="Ubuntu 16.04+ã€Debian 8+ã€CentOS 7"></a>Ubuntu 16.04+ã€Debian 8+ã€CentOS 7</h2><p>å¯¹äºä½¿ç”¨ <a href="https://www.freedesktop.org/wiki/Software/systemd/">systemd</a> çš„ç³»ç»Ÿï¼Œè¯·åœ¨ <code>/etc/docker/daemon.json</code> ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨è¯·æ–°å»ºè¯¥æ–‡ä»¶ï¼‰</p><pre class=" language-html"><code class="language-html">{ "registry-mirrors": [ "https://dockerhub.azk8s.cn","https://hub-mirror.c.163.com", "https://reg-mirror.qiniu.com","https://registry.docker-cn.com" ] }</code></pre><blockquote><p>æ³¨æ„ï¼Œä¸€å®šè¦ä¿è¯è¯¥æ–‡ä»¶ç¬¦åˆ json è§„èŒƒï¼Œå¦åˆ™ Docker å°†ä¸èƒ½å¯åŠ¨ã€‚</p></blockquote><p>ä¹‹åé‡æ–°å¯åŠ¨æœåŠ¡ã€‚</p><pre><code>$ sudo systemctl daemon-reload$ sudo systemctl restart docker</code></pre><blockquote><p>æ³¨æ„ï¼šå¦‚æœæ‚¨ä¹‹å‰æŸ¥çœ‹æ—§æ•™ç¨‹ï¼Œä¿®æ”¹äº† <code>docker.service</code> æ–‡ä»¶å†…å®¹ï¼Œè¯·å»æ‰æ‚¨æ·»åŠ çš„å†…å®¹ï¼ˆ<code>--registry-mirror=https://dockerhub.azk8s.cn</code>ï¼‰ã€‚</p></blockquote><h2 id="Windows-10"><a href="#Windows-10" class="headerlink" title="Windows 10"></a>Windows 10</h2><p>å¯¹äºä½¿ç”¨ <code>Windows 10</code> çš„ç”¨æˆ·ï¼Œåœ¨ä»»åŠ¡æ æ‰˜ç›˜ Docker å›¾æ ‡å†…å³é”®èœå•é€‰æ‹© <code>Settings</code>ï¼Œæ‰“å¼€é…ç½®çª—å£ååœ¨å·¦ä¾§å¯¼èˆªèœå•é€‰æ‹© <code>Docker Engine</code>ï¼Œåœ¨å³ä¾§åƒä¸‹è¾¹ä¸€æ ·ç¼–è¾‘ json æ–‡ä»¶ï¼Œä¹‹åç‚¹å‡» <code>Apply &amp; Restart</code> ä¿å­˜å Docker å°±ä¼šé‡å¯å¹¶åº”ç”¨é…ç½®çš„é•œåƒåœ°å€äº†ã€‚</p><pre><code>{  "registry-mirrors": [    "https://dockerhub.azk8s.cn",    "https://hub-mirror.c.163.com"  ]}</code></pre><h2 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h2><p>å¯¹äºä½¿ç”¨ macOS çš„ç”¨æˆ·ï¼Œåœ¨ä»»åŠ¡æ ç‚¹å‡» Docker Desktop åº”ç”¨å›¾æ ‡ -&gt; <code>Perferences</code>ï¼Œåœ¨å·¦ä¾§å¯¼èˆªèœå•é€‰æ‹© <code>Docker Engine</code>ï¼Œåœ¨å³ä¾§åƒä¸‹è¾¹ä¸€æ ·ç¼–è¾‘ json æ–‡ä»¶ã€‚ä¿®æ”¹å®Œæˆä¹‹åï¼Œç‚¹å‡» <code>Apply &amp; Restart</code> æŒ‰é’®ï¼ŒDocker å°±ä¼šé‡å¯å¹¶åº”ç”¨é…ç½®çš„é•œåƒåœ°å€äº†ã€‚</p><pre><code>{  "registry-mirrors": [    "https://dockerhub.azk8s.cn",    "https://hub-mirror.c.163.com"  ]}</code></pre><h2 id="æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ"><a href="#æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ" class="headerlink" title="æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ"></a>æ£€æŸ¥åŠ é€Ÿå™¨æ˜¯å¦ç”Ÿæ•ˆ</h2><p>æ‰§è¡Œ <code>$ docker info</code>ï¼Œå¦‚æœä»ç»“æœä¸­çœ‹åˆ°äº†å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚</p><pre class=" language-html"><code class="language-html">Registry Mirrors: https://dockerhub.azk8s.cn/</code></pre><h2 id="gcr-io-é•œåƒ"><a href="#gcr-io-é•œåƒ" class="headerlink" title="gcr.io é•œåƒ"></a>gcr.io é•œåƒ</h2><p>å›½å†…æ— æ³•ç›´æ¥è·å– <code>gcr.io/*</code> é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥å°† <code>gcr.io/&lt;repo-name&gt;/&lt;image-name&gt;:&lt;version&gt;</code> æ›¿æ¢ä¸º <code>gcr.azk8s.cn/&lt;repo-name&gt;/&lt;image-name&gt;:&lt;version&gt;</code> ,ä¾‹å¦‚</p><pre class=" language-html"><code class="language-html">$ docker pull gcr.azk8s.cn/google_containers/hyperkube-amd64:v1.9.2</code></pre>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> image </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue.js ç¬”è®°</title>
      <link href="/2020/01/21/vue.js-bi-ji/"/>
      <url>/2020/01/21/vue.js-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="å¸¸ç”¨æŒ‡ä»¤"><a href="#å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æŒ‡ä»¤"></a>å¸¸ç”¨æŒ‡ä»¤</h1><h2 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{<span class="token punctuation">'</span>class1<span class="token punctuation">'</span>: use}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>v-bind:class æŒ‡ä»¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      use<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="v-on-äº‹ä»¶å¤„ç†å™¨"><a href="#v-on-äº‹ä»¶å¤„ç†å™¨" class="headerlink" title="v-on : äº‹ä»¶å¤„ç†å™¨"></a>v-on : äº‹ä»¶å¤„ç†å™¨</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">v-on:</span>click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>reverseMessage<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>åè½¬å­—ç¬¦ä¸²<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      message<span class="token punctuation">:</span> <span class="token string">"Runoob!"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>      reverseMessage<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h3 id="äº‹ä»¶ä¿®é¥°ç¬¦"><a href="#äº‹ä»¶ä¿®é¥°ç¬¦" class="headerlink" title="äº‹ä»¶ä¿®é¥°ç¬¦"></a>äº‹ä»¶ä¿®é¥°ç¬¦</h3><ul><li><code>.stop</code></li><li><code>.prevent</code></li><li><code>.capture</code></li><li><code>.self</code></li><li><code>.once </code></li></ul><h3 id="æŒ‰é”®ä¿®é¥°ç¬¦"><a href="#æŒ‰é”®ä¿®é¥°ç¬¦" class="headerlink" title="æŒ‰é”®ä¿®é¥°ç¬¦"></a>æŒ‰é”®ä¿®é¥°ç¬¦</h3><ul><li><code>.enter</code></li><li><code>.tab</code></li><li><code>.delete (æ•è· "åˆ é™¤" å’Œ "é€€æ ¼" é”®)</code></li><li><code>.esc</code></li><li><code>.space</code></li><li><code>.ctrl</code></li><li><code>.alt</code></li><li><code>.shift</code></li><li><code>.meta </code></li></ul><h2 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>runoob<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Runoob<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>picked<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>runoob<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Runoob<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>google<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Google<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>picked<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>google<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Google<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>é€‰ä¸­å€¼ä¸º: {{ picked }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      picked<span class="token punctuation">:</span> <span class="token string">"Runoob"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h2><ul><li>.lazy</li></ul><blockquote><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ v-model åœ¨ input äº‹ä»¶ä¸­åŒæ­¥è¾“å…¥æ¡†çš„å€¼ä¸æ•°æ®ï¼Œä½†ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªä¿®é¥°ç¬¦ lazy ï¼Œä»è€Œè½¬å˜ä¸ºåœ¨ change äº‹ä»¶ä¸­åŒæ­¥</p></blockquote><ul><li><p>.number</p><blockquote><p>å¦‚æœæƒ³è‡ªåŠ¨å°†ç”¨æˆ·çš„è¾“å…¥å€¼è½¬ä¸º Number ç±»å‹ï¼ˆå¦‚æœåŸå€¼çš„è½¬æ¢ç»“æœä¸º NaN åˆ™è¿”å›åŸå€¼ï¼‰ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªä¿®é¥°ç¬¦ number ç»™ v-model æ¥å¤„ç†è¾“å…¥å€¼</p></blockquote></li><li><p>.trim</p><blockquote><p>å¦‚æœè¦è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–å°¾ç©ºæ ¼ï¼Œå¯ä»¥æ·»åŠ  trim ä¿®é¥°ç¬¦åˆ° v-model ä¸Šè¿‡æ»¤è¾“å…¥ï¼š</p></blockquote></li></ul><h2 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>type <span class="token punctuation">=</span><span class="token punctuation">=</span><span class="token punctuation">=</span> <span class="token punctuation">'</span>A<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>type <span class="token punctuation">=</span><span class="token punctuation">=</span><span class="token punctuation">=</span> <span class="token punctuation">'</span>B<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>Not A/B/C<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      type<span class="token punctuation">:</span> <span class="token string">"C"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="v-else"><a href="#v-else" class="headerlink" title="v-else"></a>v-else</h2><pre class=" language-html"><code class="language-html">è§ä¸Š</code></pre><h2 id="v-else-if"><a href="#v-else-if" class="headerlink" title="v-else-if"></a>v-else-if</h2><pre class=" language-html"><code class="language-html">è§ä¸Š</code></pre><h2 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ok<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Hello!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      ok<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>site in sites<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ site.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      sites<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"Runoob"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"Google"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"Taobao"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>value in object<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ value }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      object<span class="token punctuation">:</span> <span class="token punctuation">{</span>        name<span class="token punctuation">:</span> <span class="token string">"èœé¸Ÿæ•™ç¨‹"</span><span class="token punctuation">,</span>        url<span class="token punctuation">:</span> <span class="token string">"http://www.runoob.com"</span><span class="token punctuation">,</span>        slogan<span class="token punctuation">:</span> <span class="token string">"å­¦çš„ä¸ä»…æ˜¯æŠ€æœ¯ï¼Œæ›´æ˜¯æ¢¦æƒ³ï¼"</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(value, key) in object<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ key }} : {{ value }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>(value, key, index) in object<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      {{ index }}. {{ key }} : {{ value }}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>n in 10<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>{{ n }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><h1 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h1><h2 id="è‡ªå®šä¹‰è¿‡æ»¤å™¨"><a href="#è‡ªå®šä¹‰è¿‡æ»¤å™¨" class="headerlink" title="è‡ªå®šä¹‰è¿‡æ»¤å™¨"></a>è‡ªå®šä¹‰è¿‡æ»¤å™¨</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  {{ message | capitalize }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span>new Vue({  el: '#app',  data: {    message: 'runoob'  },  filters: {    capitalize: function (value) {      if (!value) return ''      value = value.toString()      return value.charAt(0).toUpperCase() + value.slice(1)    }  }})</code></pre><h1 id="è®¡ç®—å±æ€§"><a href="#è®¡ç®—å±æ€§" class="headerlink" title="è®¡ç®—å±æ€§"></a>è®¡ç®—å±æ€§</h1><h2 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>åŸå§‹å­—ç¬¦ä¸²: {{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>è®¡ç®—ååè½¬å­—ç¬¦ä¸²: {{ reversedMessage }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      message<span class="token punctuation">:</span> <span class="token string">"Runoob!"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// è®¡ç®—å±æ€§çš„ getter</span>      reversedMessage<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// `this` æŒ‡å‘ vm å®ä¾‹</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Vue æµ‹è¯•å®ä¾‹ - èœé¸Ÿæ•™ç¨‹(runoob.com)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.staticfile.org/vue/2.4.2/vue.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>{{ site }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span> <span class="token punctuation">{</span>          name<span class="token punctuation">:</span> <span class="token string">"Google"</span><span class="token punctuation">,</span>          url<span class="token punctuation">:</span> <span class="token string">"http://www.google.com"</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        computed<span class="token punctuation">:</span> <span class="token punctuation">{</span>          site<span class="token punctuation">:</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// getter</span>            <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>              <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>url<span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">// setter</span>            <span class="token keyword">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>              <span class="token keyword">var</span> names <span class="token operator">=</span> newValue<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>url <span class="token operator">=</span> names<span class="token punctuation">[</span>names<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// è°ƒç”¨ setterï¼Œ vm.name å’Œ vm.url ä¹Ÿä¼šè¢«å¯¹åº”æ›´æ–°</span>      vm<span class="token punctuation">.</span>site <span class="token operator">=</span> <span class="token string">"èœé¸Ÿæ•™ç¨‹ http://www.runoob.com"</span><span class="token punctuation">;</span>      document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"name: "</span> <span class="token operator">+</span> vm<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>      document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;br>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"url: "</span> <span class="token operator">+</span> vm<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="ç›‘å¬å±æ€§"><a href="#ç›‘å¬å±æ€§" class="headerlink" title="ç›‘å¬å±æ€§"></a>ç›‘å¬å±æ€§</h1><h2 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h2><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Vue æµ‹è¯•å®ä¾‹ - èœé¸Ÿæ•™ç¨‹(runoob.com)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.staticfile.org/vue/2.4.2/vue.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>computed_props<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      åƒç±³ : <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>kilometers<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> ç±³ :      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>meters<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        el<span class="token punctuation">:</span> <span class="token string">"#computed_props"</span><span class="token punctuation">,</span>        data<span class="token punctuation">:</span> <span class="token punctuation">{</span>          kilometers<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>          meters<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        methods<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        computed<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>          kilometers<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>kilometers <span class="token operator">=</span> val<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>meters <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>kilometers <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          meters<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>kilometers <span class="token operator">=</span> val <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>meters <span class="token operator">=</span> val<span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// $watch æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•</span>      vm<span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">"kilometers"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è¿™ä¸ªå›è°ƒå°†åœ¨ vm.kilometers æ”¹å˜åè°ƒç”¨</span>        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span>          <span class="token string">"ä¿®æ”¹å‰å€¼ä¸º: "</span> <span class="token operator">+</span> oldValue <span class="token operator">+</span> <span class="token string">"ï¼Œä¿®æ”¹åå€¼ä¸º: "</span> <span class="token operator">+</span> newValue<span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h1 id="æ ·å¼ç»‘å®š"><a href="#æ ·å¼ç»‘å®š" class="headerlink" title="æ ·å¼ç»‘å®š"></a>æ ·å¼ç»‘å®š</h1><h2 id="class"><a href="#class" class="headerlink" title="class"></a>class</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ active: isActive }<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>static<span class="token punctuation">"</span></span>  <span class="token attr-name"><span class="token namespace">v-bind:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ active: isActive, <span class="token punctuation">'</span>text-danger<span class="token punctuation">'</span>: hasError }<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>classObject<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><h1 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h1><h2 id="å…¨å±€ç»„ä»¶"><a href="#å…¨å±€ç»„ä»¶" class="headerlink" title="å…¨å±€ç»„ä»¶"></a>å…¨å±€ç»„ä»¶</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>runoob</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>runoob</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token comment" spellcheck="true">// æ³¨å†Œ</span>  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">"runoob"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    template<span class="token punctuation">:</span> <span class="token string">"&lt;h1>è‡ªå®šä¹‰ç»„ä»¶!&lt;/h1>"</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// åˆ›å»ºæ ¹å®ä¾‹</span>  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="å±€éƒ¨ç»„ä»¶"><a href="#å±€éƒ¨ç»„ä»¶" class="headerlink" title="å±€éƒ¨ç»„ä»¶"></a>å±€éƒ¨ç»„ä»¶</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>runoob</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>runoob</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token keyword">var</span> Child <span class="token operator">=</span> <span class="token punctuation">{</span>    template<span class="token punctuation">:</span> <span class="token string">"&lt;h1>è‡ªå®šä¹‰ç»„ä»¶!&lt;/h1>"</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// åˆ›å»ºæ ¹å®ä¾‹</span>  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>    components<span class="token punctuation">:</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// &lt;runoob> å°†åªåœ¨çˆ¶æ¨¡æ¿å¯ç”¨</span>      runoob<span class="token punctuation">:</span> Child<span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="Prop"><a href="#Prop" class="headerlink" title="Prop"></a>Prop</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>child</span> <span class="token attr-name">message</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hello!<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>child</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token comment" spellcheck="true">// æ³¨å†Œ</span>  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">"child"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å£°æ˜ props</span>    props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"message"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token comment" spellcheck="true">// åŒæ ·ä¹Ÿå¯ä»¥åœ¨ vm å®ä¾‹ä¸­åƒ "this.message" è¿™æ ·ä½¿ç”¨</span>    template<span class="token punctuation">:</span> <span class="token string">"&lt;span>{{ message }}&lt;/span>"</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// åˆ›å»ºæ ¹å®ä¾‹</span>  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h3 id="åŠ¨æ€-Prop"><a href="#åŠ¨æ€-Prop" class="headerlink" title="åŠ¨æ€ Prop"></a>åŠ¨æ€ Prop</h3><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>todo-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item in sites<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">v-bind:</span>todo</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>todo-item</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">"todo-item"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    props<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"todo"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    template<span class="token punctuation">:</span> <span class="token string">"&lt;li>{{ todo.text }}&lt;/li>"</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      sites<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">"Runoob"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">"Google"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">"Taobao"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h3 id="Prop-éªŒè¯"><a href="#Prop-éªŒè¯" class="headerlink" title="Prop éªŒè¯"></a>Prop éªŒè¯</h3><pre class=" language-html"><code class="language-html">Vue.component('my-component', { props: { // åŸºç¡€çš„ç±»å‹æ£€æŸ¥ (`null` å’Œ`undefined` ä¼šé€šè¿‡ä»»ä½•ç±»å‹éªŒè¯) propA: Number, // å¤šä¸ªå¯èƒ½çš„ç±»å‹ propB: [String,Number], // å¿…å¡«çš„å­—ç¬¦ä¸² propC: { type: String, required: true }, //å¸¦æœ‰é»˜è®¤å€¼çš„æ•°å­— propD: { type: Number, default: 100 }, // å¸¦æœ‰é»˜è®¤å€¼çš„å¯¹è±¡propE: { type: Object, // å¯¹è±¡æˆ–æ•°ç»„é»˜è®¤å€¼å¿…é¡»ä»ä¸€ä¸ªå·¥å‚å‡½æ•°è·å– default:function () { return { message: 'hello' } } }, // è‡ªå®šä¹‰éªŒè¯å‡½æ•° propF: {validator: function (value) { // è¿™ä¸ªå€¼å¿…é¡»åŒ¹é…ä¸‹åˆ—å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ª return['success', 'warning', 'danger'].indexOf(value) !== -1 } } } })</code></pre><h2 id="è‡ªå®šä¹‰äº‹ä»¶"><a href="#è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="è‡ªå®šä¹‰äº‹ä»¶"></a>è‡ªå®šä¹‰äº‹ä»¶</h2><p>çˆ¶ç»„ä»¶æ˜¯ä½¿ç”¨ props ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ï¼Œä½†å¦‚æœå­ç»„ä»¶è¦æŠŠæ•°æ®ä¼ é€’å›å»ï¼Œå°±éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶ï¼<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ v-on ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶, æ¯ä¸ª Vue å®ä¾‹éƒ½å®ç°äº†äº‹ä»¶æ¥å£(Events interface)ï¼Œå³ï¼š</p><ul><li>ä½¿ç”¨ <code>$on(eventName)</code> ç›‘å¬äº‹ä»¶</li><li>ä½¿ç”¨ <code>$emit(eventName)</code> è§¦å‘äº‹ä»¶</li></ul><p>å¦å¤–ï¼Œçˆ¶ç»„ä»¶å¯ä»¥åœ¨ä½¿ç”¨å­ç»„ä»¶çš„åœ°æ–¹ç›´æ¥ç”¨ v-on æ¥ç›‘å¬å­ç»„ä»¶è§¦å‘çš„äº‹ä»¶ã€‚<br>ä»¥ä¸‹å®ä¾‹ä¸­å­ç»„ä»¶å·²ç»å’Œå®ƒå¤–éƒ¨å®Œå…¨è§£è€¦äº†ã€‚å®ƒæ‰€åšçš„åªæ˜¯è§¦å‘ä¸€ä¸ªçˆ¶ç»„ä»¶å…³å¿ƒçš„å†…éƒ¨äº‹ä»¶ã€‚</p><h1 id="è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤"></a>è‡ªå®šä¹‰æŒ‡ä»¤</h1><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>é¡µé¢è½½å…¥æ—¶ï¼Œinput å…ƒç´ è‡ªåŠ¨è·å–ç„¦ç‚¹ï¼š<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-focus</span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  <span class="token comment" spellcheck="true">// æ³¨å†Œä¸€ä¸ªå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ v-focus</span>  Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">"focus"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å½“ç»‘å®šå…ƒç´ æ’å…¥åˆ° DOM ä¸­ã€‚</span>    inserted<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>el<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// èšç„¦å…ƒç´ </span>      el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// åˆ›å»ºæ ¹å®ä¾‹</span>  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h2 id="é’©å­"><a href="#é’©å­" class="headerlink" title="é’©å­"></a>é’©å­</h2><h3 id="é’©å­å‡½æ•°"><a href="#é’©å­å‡½æ•°" class="headerlink" title="é’©å­å‡½æ•°"></a>é’©å­å‡½æ•°</h3><p>æŒ‡ä»¤å®šä¹‰å‡½æ•°æä¾›äº†å‡ ä¸ªé’©å­å‡½æ•°ï¼ˆå¯é€‰ï¼‰ï¼š</p><ul><li><p><code>bind</code>: åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ï¼Œç”¨è¿™ä¸ªé’©å­å‡½æ•°å¯ä»¥å®šä¹‰ä¸€ä¸ªåœ¨ç»‘å®šæ—¶æ‰§è¡Œä¸€æ¬¡çš„åˆå§‹åŒ–åŠ¨ä½œã€‚</p></li><li><p><code>inserted</code>: è¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ï¼ˆçˆ¶èŠ‚ç‚¹å­˜åœ¨å³å¯è°ƒç”¨ï¼Œä¸å¿…å­˜åœ¨äº document ä¸­ï¼‰ã€‚</p></li><li><p><code>update</code>: è¢«ç»‘å®šå…ƒç´ æ‰€åœ¨çš„æ¨¡æ¿æ›´æ–°æ—¶è°ƒç”¨ï¼Œè€Œä¸è®ºç»‘å®šå€¼æ˜¯å¦å˜åŒ–ã€‚é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„ç»‘å®šå€¼ï¼Œå¯ä»¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–°ï¼ˆè¯¦ç»†çš„é’©å­å‡½æ•°å‚æ•°è§ä¸‹ï¼‰ã€‚</p></li><li><p><code>componentUpdated</code>: è¢«ç»‘å®šå…ƒç´ æ‰€åœ¨æ¨¡æ¿å®Œæˆä¸€æ¬¡æ›´æ–°å‘¨æœŸæ—¶è°ƒç”¨ã€‚</p></li><li><p><code>unbind</code>: åªè°ƒç”¨ä¸€æ¬¡ï¼Œ æŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚</p></li></ul><h3 id="é’©å­å‡½æ•°å‚æ•°"><a href="#é’©å­å‡½æ•°å‚æ•°" class="headerlink" title="é’©å­å‡½æ•°å‚æ•°"></a>é’©å­å‡½æ•°å‚æ•°</h3><p>é’©å­å‡½æ•°çš„å‚æ•°æœ‰ï¼š</p><ul><li><strong>el</strong>: æŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ DOM ã€‚</li><li><strong>binding</strong>: ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š<ul><li><strong>name</strong>: æŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ <code>v-</code> å‰ç¼€ã€‚</li><li><strong>value</strong>: æŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œ ä¾‹å¦‚ï¼š <code>v-my-directive="1 + 1"</code>, value çš„å€¼æ˜¯ <code>2</code>ã€‚</li><li><strong>oldValue</strong>: æŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ <code>update</code> å’Œ <code>componentUpdated</code> é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚</li><li><strong>expression</strong>: ç»‘å®šå€¼çš„è¡¨è¾¾å¼æˆ–å˜é‡åã€‚ ä¾‹å¦‚ <code>v-my-directive="1 + 1"</code> ï¼Œ expression çš„å€¼æ˜¯ <code>"1 + 1"</code>ã€‚</li><li><strong>arg</strong>: ä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ã€‚ä¾‹å¦‚ <code>v-my-directive:foo</code>ï¼Œ arg çš„å€¼æ˜¯ <code>"foo"</code>ã€‚</li><li><strong>modifiers</strong>: ä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼š <code>v-my-directive.foo.bar</code>, ä¿®é¥°ç¬¦å¯¹è±¡ modifiers çš„å€¼æ˜¯ <code>{ foo: true, bar: true }</code>ã€‚</li></ul></li><li><strong>vnode</strong>: Vue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚</li><li><strong>oldVnode</strong>: ä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ <code>update</code> å’Œ <code>componentUpdated</code> é’©å­ä¸­å¯ç”¨ã€‚</li></ul><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">v-runoob:</span>hello.a.b</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">  Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">"runoob"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    bind<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">var</span> s <span class="token operator">=</span> JSON<span class="token punctuation">.</span>stringify<span class="token punctuation">;</span>      el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span>        <span class="token string">"name: "</span> <span class="token operator">+</span>        <span class="token function">s</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">+</span>        <span class="token string">"&lt;br>"</span> <span class="token operator">+</span>        <span class="token string">"value: "</span> <span class="token operator">+</span>        <span class="token function">s</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">+</span>        <span class="token string">"&lt;br>"</span> <span class="token operator">+</span>        <span class="token string">"expression: "</span> <span class="token operator">+</span>        <span class="token function">s</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>expression<span class="token punctuation">)</span> <span class="token operator">+</span>        <span class="token string">"&lt;br>"</span> <span class="token operator">+</span>        <span class="token string">"argument: "</span> <span class="token operator">+</span>        <span class="token function">s</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>arg<span class="token punctuation">)</span> <span class="token operator">+</span>        <span class="token string">"&lt;br>"</span> <span class="token operator">+</span>        <span class="token string">"modifiers: "</span> <span class="token operator">+</span>        <span class="token function">s</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>modifiers<span class="token punctuation">)</span> <span class="token operator">+</span>        <span class="token string">"&lt;br>"</span> <span class="token operator">+</span>        <span class="token string">"vnode keys: "</span> <span class="token operator">+</span>        Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      message<span class="token punctuation">:</span> <span class="token string">"èœé¸Ÿæ•™ç¨‹!"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><h1 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h1><pre class=" language-html"><code class="language-html"><span class="token doctype">&lt;!DOCTYPE html></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Vue æµ‹è¯•å®ä¾‹ - èœé¸Ÿæ•™ç¨‹(runoob.com)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.staticfile.org/vue/2.4.2/vue.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.staticfile.org/vue-router/2.7.0/vue-router.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>Hello App!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>        <span class="token comment" spellcheck="true">&lt;!-- ä½¿ç”¨ router-link ç»„ä»¶æ¥å¯¼èˆª. --></span>        <span class="token comment" spellcheck="true">&lt;!-- é€šè¿‡ä¼ å…¥ `to` å±æ€§æŒ‡å®šé“¾æ¥. --></span>        <span class="token comment" spellcheck="true">&lt;!-- &lt;router-link> é»˜è®¤ä¼šè¢«æ¸²æŸ“æˆä¸€ä¸ª `&lt;a>` æ ‡ç­¾ --></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/foo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Go to Foo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/bar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Go to Bar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>      <span class="token comment" spellcheck="true">&lt;!-- è·¯ç”±å‡ºå£ --></span>      <span class="token comment" spellcheck="true">&lt;!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ --></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">      <span class="token comment" spellcheck="true">// 0. å¦‚æœä½¿ç”¨æ¨¡å—åŒ–æœºåˆ¶ç¼–ç¨‹ï¼Œå°å…¥Vueå’ŒVueRouterï¼Œè¦è°ƒç”¨ Vue.use(VueRouter)</span>      <span class="token comment" spellcheck="true">// 1. å®šä¹‰ï¼ˆè·¯ç”±ï¼‰ç»„ä»¶ã€‚</span>      <span class="token comment" spellcheck="true">// å¯ä»¥ä»å…¶ä»–æ–‡ä»¶ import è¿›æ¥</span>      <span class="token keyword">const</span> Foo <span class="token operator">=</span> <span class="token punctuation">{</span> template<span class="token punctuation">:</span> <span class="token string">"&lt;div>foo&lt;/div>"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>      <span class="token keyword">const</span> Bar <span class="token operator">=</span> <span class="token punctuation">{</span> template<span class="token punctuation">:</span> <span class="token string">"&lt;div>bar&lt;/div>"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 2. å®šä¹‰è·¯ç”±</span>      <span class="token comment" spellcheck="true">// æ¯ä¸ªè·¯ç”±åº”è¯¥æ˜ å°„ä¸€ä¸ªç»„ä»¶ã€‚ å…¶ä¸­"component" å¯ä»¥æ˜¯</span>      <span class="token comment" spellcheck="true">// é€šè¿‡ Vue.extend() åˆ›å»ºçš„ç»„ä»¶æ„é€ å™¨ï¼Œ</span>      <span class="token comment" spellcheck="true">// æˆ–è€…ï¼Œåªæ˜¯ä¸€ä¸ªç»„ä»¶é…ç½®å¯¹è±¡ã€‚</span>      <span class="token comment" spellcheck="true">// æˆ‘ä»¬æ™šç‚¹å†è®¨è®ºåµŒå¥—è·¯ç”±ã€‚</span>      <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">"/foo"</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> Foo <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token string">"/bar"</span><span class="token punctuation">,</span> component<span class="token punctuation">:</span> Bar <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 3. åˆ›å»º router å®ä¾‹ï¼Œç„¶åä¼  `routes` é…ç½®</span>      <span class="token comment" spellcheck="true">// ä½ è¿˜å¯ä»¥ä¼ åˆ«çš„é…ç½®å‚æ•°, ä¸è¿‡å…ˆè¿™ä¹ˆç®€å•ç€å§ã€‚</span>      <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        routes<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// ï¼ˆç¼©å†™ï¼‰ç›¸å½“äº routes: routes</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 4. åˆ›å»ºå’ŒæŒ‚è½½æ ¹å®ä¾‹ã€‚</span>      <span class="token comment" spellcheck="true">// è®°å¾—è¦é€šè¿‡ router é…ç½®å‚æ•°æ³¨å…¥è·¯ç”±ï¼Œ</span>      <span class="token comment" spellcheck="true">// ä»è€Œè®©æ•´ä¸ªåº”ç”¨éƒ½æœ‰è·¯ç”±åŠŸèƒ½</span>      <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        router<span class="token punctuation">,</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">"#app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// ç°åœ¨ï¼Œåº”ç”¨å·²ç»å¯åŠ¨äº†ï¼</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre><h2 id="router-link-å±æ€§"><a href="#router-link-å±æ€§" class="headerlink" title="router-link å±æ€§"></a>router-link å±æ€§</h2><h3 id="to"><a href="#to" class="headerlink" title="to"></a>to</h3><p>è¡¨ç¤ºç›®æ ‡è·¯ç”±çš„é“¾æ¥ã€‚ å½“è¢«ç‚¹å‡»åï¼Œå†…éƒ¨ä¼šç«‹åˆ»æŠŠ to çš„å€¼ä¼ åˆ° router.push()ï¼Œæ‰€ä»¥è¿™ä¸ªå€¼å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…æ˜¯æè¿°ç›®æ ‡ä½ç½®çš„å¯¹è±¡ã€‚</p><pre class=" language-html"><code class="language-html"><span class="token comment" spellcheck="true">&lt;!-- å­—ç¬¦ä¸² --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>home<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- æ¸²æŸ“ç»“æœ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>home<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- ä½¿ç”¨ v-bind çš„ JS è¡¨è¾¾å¼ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>home<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- ä¸å†™ v-bind ä¹Ÿå¯ä»¥ï¼Œå°±åƒç»‘å®šåˆ«çš„å±æ€§ä¸€æ · --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>home<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- åŒä¸Š --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ path: <span class="token punctuation">'</span>home<span class="token punctuation">'</span> }<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- å‘½åçš„è·¯ç”± --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ name: <span class="token punctuation">'</span>user<span class="token punctuation">'</span>, params: { userId: 123 }}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>User<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- å¸¦æŸ¥è¯¢å‚æ•°ï¼Œä¸‹é¢çš„ç»“æœä¸º /register?plan=private --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ path: <span class="token punctuation">'</span>register<span class="token punctuation">'</span>, query: { plan: <span class="token punctuation">'</span>private<span class="token punctuation">'</span> }}<span class="token punctuation">"</span></span>  <span class="token punctuation">></span></span>Register<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></code></pre><h3 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h3><p>è®¾ç½® replace å±æ€§çš„è¯ï¼Œå½“ç‚¹å‡»æ—¶ï¼Œä¼šè°ƒç”¨ router.replace() è€Œä¸æ˜¯ router.push()ï¼Œå¯¼èˆªåä¸ä¼šç•™ä¸‹ history è®°å½•ã€‚</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ path: <span class="token punctuation">'</span>/abc<span class="token punctuation">'</span>}<span class="token punctuation">"</span></span> <span class="token attr-name">replace</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></code></pre><p>append</p><p>è®¾ç½® append å±æ€§åï¼Œåˆ™åœ¨å½“å‰ (ç›¸å¯¹) è·¯å¾„å‰æ·»åŠ åŸºè·¯å¾„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä» /a å¯¼èˆªåˆ°ä¸€ä¸ªç›¸å¯¹è·¯å¾„ bï¼Œå¦‚æœæ²¡æœ‰é…ç½® appendï¼Œåˆ™è·¯å¾„ä¸º /bï¼Œå¦‚æœé…äº†ï¼Œåˆ™ä¸º /a/b</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ path: <span class="token punctuation">'</span>relative/path<span class="token punctuation">'</span>}<span class="token punctuation">"</span></span> <span class="token attr-name">append</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></code></pre><p>tag</p><p>æœ‰æ—¶å€™æƒ³è¦ &nbsp; <code>&lt;router-link&gt;</code> æ¸²æŸ“æˆæŸç§æ ‡ç­¾ï¼Œä¾‹å¦‚ <code>&lt;li&gt;</code>ã€‚ äºæ˜¯æˆ‘ä»¬ä½¿ç”¨ <code>tag</code> prop ç±»æŒ‡å®šä½•ç§æ ‡ç­¾ï¼ŒåŒæ ·å®ƒè¿˜æ˜¯ä¼šç›‘å¬ç‚¹å‡»ï¼Œè§¦å‘å¯¼èˆªã€‚</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/foo<span class="token punctuation">"</span></span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>li<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>foo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">&lt;!-- æ¸²æŸ“ç»“æœ --></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>foo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span></code></pre><h3 id="active-class"><a href="#active-class" class="headerlink" title="active-class"></a>active-class</h3><p>è®¾ç½® é“¾æ¥æ¿€æ´»æ—¶ä½¿ç”¨çš„ CSS ç±»åã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç æ¥æ›¿ä»£ã€‚</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">  <span class="token selector"><span class="token class">._active</span> </span><span class="token punctuation">{</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>  <span class="token punctuation">}</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ path: <span class="token punctuation">'</span>/route1<span class="token punctuation">'</span>}<span class="token punctuation">"</span></span> <span class="token attr-name">active-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>_active<span class="token punctuation">"</span></span>    <span class="token punctuation">></span></span>Router Link 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span>  <span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ path: <span class="token punctuation">'</span>/route2<span class="token punctuation">'</span>}<span class="token punctuation">"</span></span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span>    <span class="token punctuation">></span></span>Router Link 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span>  <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre><p>æ³¨æ„è¿™é‡Œ <strong>class</strong> ä½¿ç”¨ **active_class=â€_activeâ€**ã€‚</p><h3 id="exact-active-class"><a href="#exact-active-class" class="headerlink" title="exact-active-class"></a>exact-active-class</h3><p>é…ç½®å½“é“¾æ¥è¢«ç²¾ç¡®åŒ¹é…çš„æ—¶å€™åº”è¯¥æ¿€æ´»çš„ classã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç æ¥æ›¿ä»£ã€‚</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ path: <span class="token punctuation">'</span>/route1<span class="token punctuation">'</span>}<span class="token punctuation">"</span></span> <span class="token attr-name">exact-active-class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>_active<span class="token punctuation">"</span></span>    <span class="token punctuation">></span></span>Router Link 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span>  <span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ path: <span class="token punctuation">'</span>/route2<span class="token punctuation">'</span>}<span class="token punctuation">"</span></span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>span<span class="token punctuation">"</span></span>    <span class="token punctuation">></span></span>Router Link 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span>  <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre><h3 id="event"><a href="#event" class="headerlink" title="event"></a>event</h3><p>å£°æ˜å¯ä»¥ç”¨æ¥è§¦å‘å¯¼èˆªçš„äº‹ä»¶ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ˜¯ä¸€ä¸ªåŒ…å«å­—ç¬¦ä¸²çš„æ•°ç»„ã€‚</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>{ path: <span class="token punctuation">'</span>/route1<span class="token punctuation">'</span>}<span class="token punctuation">"</span></span> <span class="token attr-name">event</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mouseover<span class="token punctuation">"</span></span>  <span class="token punctuation">></span></span>Router Link 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">></span></span></code></pre><p>ä»¥ä¸Šä»£ç è®¾ç½®äº† event ä¸º mouseover ï¼ŒåŠåœ¨é¼ æ ‡ç§»åŠ¨åˆ° Router Link 1 ä¸Šæ—¶å¯¼èˆªçš„ HTML å†…å®¹ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p><h1 id="è¿‡æ¸¡-amp-åŠ¨ç”»"><a href="#è¿‡æ¸¡-amp-åŠ¨ç”»" class="headerlink" title="è¿‡æ¸¡ &amp; åŠ¨ç”»"></a>è¿‡æ¸¡ &amp; åŠ¨ç”»</h1><p><a href="https://www.runoob.com/vue2/vue-transitions.html">https://www.runoob.com/vue2/vue-transitions.html</a></p><h1 id="æ··å…¥"><a href="#æ··å…¥" class="headerlink" title="æ··å…¥"></a>æ··å…¥</h1><p><a href="https://www.runoob.com/vue2/vue-mixins.html">https://www.runoob.com/vue2/vue-mixins.html</a></p><h1 id="Ajax-axios"><a href="#Ajax-axios" class="headerlink" title="Ajax(axios)"></a>Ajax(axios)</h1><h2 id="å®‰è£…æ–¹æ³•"><a href="#å®‰è£…æ–¹æ³•" class="headerlink" title="å®‰è£…æ–¹æ³•"></a>å®‰è£…æ–¹æ³•</h2><p><strong>ä½¿ç”¨ cdn:</strong></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p>æˆ–</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://cdn.staticfile.org/axios/0.18.0/axios.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre><p><strong>ä½¿ç”¨ npm:</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> axios</code></pre><p><strong>ä½¿ç”¨ bower:</strong></p><pre class=" language-bash"><code class="language-bash">bower <span class="token function">install</span> axios</code></pre><p><strong>ä½¿ç”¨ yarn:</strong></p><pre class=" language-bash"><code class="language-bash">yarn add axios</code></pre><h2 id="-1"><a href="#-1" class="headerlink" title=""></a></h2><h2 id="GET-æ–¹æ³•"><a href="#GET-æ–¹æ³•" class="headerlink" title="GET æ–¹æ³•"></a>GET æ–¹æ³•</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      info<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    axios      <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"https://www.runoob.com/try/ajax/json_demo.json"</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>info <span class="token operator">=</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è¯·æ±‚å¤±è´¥å¤„ç†</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"app"</span><span class="token operator">></span>  <span class="token operator">&lt;</span>h1<span class="token operator">></span>ç½‘ç«™åˆ—è¡¨<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>  <span class="token operator">&lt;</span>div    v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"site in info"</span>  <span class="token operator">></span>    <span class="token punctuation">{</span><span class="token punctuation">{</span> site<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token operator">&lt;</span>script type <span class="token operator">=</span> <span class="token string">"text/javascript"</span><span class="token operator">></span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  el<span class="token punctuation">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>  data <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      info<span class="token punctuation">:</span> <span class="token keyword">null</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  mounted <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    axios      <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'https://www.runoob.com/try/ajax/json_demo.json'</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>info <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>sites<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">// è¯·æ±‚å¤±è´¥å¤„ç†</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// ç›´æ¥åœ¨ URL ä¸Šæ·»åŠ å‚æ•° ID=12345</span>axios  <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"/user?ID=12345"</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¹Ÿå¯ä»¥é€šè¿‡ params è®¾ç½®å‚æ•°ï¼š</span>axios  <span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    params<span class="token punctuation">:</span> <span class="token punctuation">{</span>      ID<span class="token punctuation">:</span> <span class="token number">12345</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="POST-æ–¹æ³•"><a href="#POST-æ–¹æ³•" class="headerlink" title="POST æ–¹æ³•"></a>POST æ–¹æ³•</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  el<span class="token punctuation">:</span> <span class="token string">"#app"</span><span class="token punctuation">,</span>  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      info<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    axios      <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"https://www.runoob.com/try/ajax/demo_axios_post.php"</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>info <span class="token operator">=</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// è¯·æ±‚å¤±è´¥å¤„ç†</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class=" language-javascript"><code class="language-javascript">axios  <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    firstName<span class="token punctuation">:</span> <span class="token string">"Fred"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// å‚æ•° firstName</span>    lastName<span class="token punctuation">:</span> <span class="token string">"Flintstone"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// å‚æ•° lastName</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚"><a href="#æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚" class="headerlink" title="æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚"></a>æ‰§è¡Œå¤šä¸ªå¹¶å‘è¯·æ±‚</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">getUserAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"/user/12345"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">getUserPermissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"/user/12345/permissions"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>axios<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">getUserAccount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getUserPermissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>  axios<span class="token punctuation">.</span><span class="token function">spread</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>acct<span class="token punctuation">,</span> perms<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// ä¸¤ä¸ªè¯·æ±‚ç°åœ¨éƒ½æ‰§è¡Œå®Œæˆ</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="axios-API"><a href="#axios-API" class="headerlink" title="axios API"></a>axios API</h2><p>å¯ä»¥é€šè¿‡å‘ axios ä¼ é€’ç›¸å…³é…ç½®æ¥åˆ›å»ºè¯·æ±‚ã€‚</p><pre class=" language-javascript"><code class="language-javascript"><span class="token function">axios</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// å‘é€ POST è¯·æ±‚</span><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  method<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>  url<span class="token punctuation">:</span> <span class="token string">'/user/12345'</span><span class="token punctuation">,</span>  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>    firstName<span class="token punctuation">:</span> <span class="token string">'Fred'</span><span class="token punctuation">,</span>    lastName<span class="token punctuation">:</span> <span class="token string">'Flintstone'</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//  GET è¯·æ±‚è¿œç¨‹å›¾ç‰‡</span><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  method<span class="token punctuation">:</span><span class="token string">'get'</span><span class="token punctuation">,</span>  url<span class="token punctuation">:</span><span class="token string">'http://bit.ly/2mTM3nY'</span><span class="token punctuation">,</span>  responseType<span class="token punctuation">:</span><span class="token string">'stream'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>  response<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'ada_lovelace.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">axios</span><span class="token punctuation">(</span>url<span class="token punctuation">[</span><span class="token punctuation">,</span> config<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// å‘é€ GET è¯·æ±‚ï¼ˆé»˜è®¤çš„æ–¹æ³•ï¼‰</span><span class="token function">axios</span><span class="token punctuation">(</span><span class="token string">'/user/12345'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="è¯·æ±‚é…ç½®é¡¹"><a href="#è¯·æ±‚é…ç½®é¡¹" class="headerlink" title="è¯·æ±‚é…ç½®é¡¹"></a>è¯·æ±‚é…ç½®é¡¹</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// `url` æ˜¯ç”¨äºè¯·æ±‚çš„æœåŠ¡å™¨ URL</span>  url<span class="token punctuation">:</span> <span class="token string">"/user"</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `method` æ˜¯åˆ›å»ºè¯·æ±‚æ—¶ä½¿ç”¨çš„æ–¹æ³•</span>  method<span class="token punctuation">:</span> <span class="token string">"get"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// é»˜è®¤æ˜¯ get</span>  <span class="token comment" spellcheck="true">// `baseURL` å°†è‡ªåŠ¨åŠ åœ¨ `url` å‰é¢ï¼Œé™¤é `url` æ˜¯ä¸€ä¸ªç»å¯¹ URLã€‚</span>  <span class="token comment" spellcheck="true">// å®ƒå¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ª `baseURL` ä¾¿äºä¸º axios å®ä¾‹çš„æ–¹æ³•ä¼ é€’ç›¸å¯¹ URL</span>  baseURL<span class="token punctuation">:</span> <span class="token string">"https://some-domain.com/api/"</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `transformRequest` å…è®¸åœ¨å‘æœåŠ¡å™¨å‘é€å‰ï¼Œä¿®æ”¹è¯·æ±‚æ•°æ®</span>  <span class="token comment" spellcheck="true">// åªèƒ½ç”¨åœ¨ "PUT", "POST" å’Œ "PATCH" è¿™å‡ ä¸ªè¯·æ±‚æ–¹æ³•</span>  <span class="token comment" spellcheck="true">// åé¢æ•°ç»„ä¸­çš„å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ– ArrayBufferï¼Œæˆ– Stream</span>  transformRequest<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å¯¹ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†</span>    <span class="token keyword">return</span> data<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `transformResponse` åœ¨ä¼ é€’ç»™ then/catch å‰ï¼Œå…è®¸ä¿®æ”¹å“åº”æ•°æ®</span>  transformResponse<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">function</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å¯¹ data è¿›è¡Œä»»æ„è½¬æ¢å¤„ç†</span>    <span class="token keyword">return</span> data<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `headers` æ˜¯å³å°†è¢«å‘é€çš„è‡ªå®šä¹‰è¯·æ±‚å¤´</span>  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">"X-Requested-With"</span><span class="token punctuation">:</span> <span class="token string">"XMLHttpRequest"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `params` æ˜¯å³å°†ä¸è¯·æ±‚ä¸€èµ·å‘é€çš„ URL å‚æ•°</span>  <span class="token comment" spellcheck="true">// å¿…é¡»æ˜¯ä¸€ä¸ªæ— æ ¼å¼å¯¹è±¡(plain object)æˆ– URLSearchParams å¯¹è±¡</span>  params<span class="token punctuation">:</span> <span class="token punctuation">{</span>    ID<span class="token punctuation">:</span> <span class="token number">12345</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `paramsSerializer` æ˜¯ä¸€ä¸ªè´Ÿè´£ `params` åºåˆ—åŒ–çš„å‡½æ•°</span>  <span class="token comment" spellcheck="true">// (e.g. https://www.npmjs.com/package/qs, http://api.jquery.com/jquery.param/)</span>  paramsSerializer<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> Qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token punctuation">{</span>arrayFormat<span class="token punctuation">:</span> <span class="token string">"brackets"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `data` æ˜¯ä½œä¸ºè¯·æ±‚ä¸»ä½“è¢«å‘é€çš„æ•°æ®</span>  <span class="token comment" spellcheck="true">// åªé€‚ç”¨äºè¿™äº›è¯·æ±‚æ–¹æ³• "PUT", "POST", å’Œ "PATCH"</span>  <span class="token comment" spellcheck="true">// åœ¨æ²¡æœ‰è®¾ç½® `transformRequest` æ—¶ï¼Œå¿…é¡»æ˜¯ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š</span>  <span class="token comment" spellcheck="true">// - string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</span>  <span class="token comment" spellcheck="true">// - æµè§ˆå™¨ä¸“å±ï¼šFormData, File, Blob</span>  <span class="token comment" spellcheck="true">// - Node ä¸“å±ï¼š Stream</span>  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>    firstName<span class="token punctuation">:</span> <span class="token string">"Fred"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `timeout` æŒ‡å®šè¯·æ±‚è¶…æ—¶çš„æ¯«ç§’æ•°(0 è¡¨ç¤ºæ— è¶…æ—¶æ—¶é—´)</span>  <span class="token comment" spellcheck="true">// å¦‚æœè¯·æ±‚èŠ±è´¹äº†è¶…è¿‡ `timeout` çš„æ—¶é—´ï¼Œè¯·æ±‚å°†è¢«ä¸­æ–­</span>  timeout<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `withCredentials` è¡¨ç¤ºè·¨åŸŸè¯·æ±‚æ—¶æ˜¯å¦éœ€è¦ä½¿ç”¨å‡­è¯</span>  withCredentials<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// é»˜è®¤çš„</span>  <span class="token comment" spellcheck="true">// `adapter` å…è®¸è‡ªå®šä¹‰å¤„ç†è¯·æ±‚ï¼Œä»¥ä½¿æµ‹è¯•æ›´è½»æ¾</span>  <span class="token comment" spellcheck="true">// è¿”å›ä¸€ä¸ª promise å¹¶åº”ç”¨ä¸€ä¸ªæœ‰æ•ˆçš„å“åº” (æŸ¥é˜… [response docs](#response-api)).</span>  adapter<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/* ... */</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `auth` è¡¨ç¤ºåº”è¯¥ä½¿ç”¨ HTTP åŸºç¡€éªŒè¯ï¼Œå¹¶æä¾›å‡­æ®</span>  <span class="token comment" spellcheck="true">// è¿™å°†è®¾ç½®ä¸€ä¸ª `Authorization` å¤´ï¼Œè¦†å†™æ‰ç°æœ‰çš„ä»»æ„ä½¿ç”¨ `headers` è®¾ç½®çš„è‡ªå®šä¹‰ `Authorization`å¤´</span>  auth<span class="token punctuation">:</span> <span class="token punctuation">{</span>    username<span class="token punctuation">:</span> <span class="token string">"janedoe"</span><span class="token punctuation">,</span>    password<span class="token punctuation">:</span> <span class="token string">"s00pers3cret"</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `responseType` è¡¨ç¤ºæœåŠ¡å™¨å“åº”çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æ˜¯ "arraybuffer", "blob", "document", "json", "text", "stream"</span>  responseType<span class="token punctuation">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// é»˜è®¤çš„</span>  <span class="token comment" spellcheck="true">// `xsrfCookieName` æ˜¯ç”¨ä½œ xsrf token çš„å€¼çš„cookieçš„åç§°</span>  xsrfCookieName<span class="token punctuation">:</span> <span class="token string">"XSRF-TOKEN"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// default</span>  <span class="token comment" spellcheck="true">// `xsrfHeaderName` æ˜¯æ‰¿è½½ xsrf token çš„å€¼çš„ HTTP å¤´çš„åç§°</span>  xsrfHeaderName<span class="token punctuation">:</span> <span class="token string">"X-XSRF-TOKEN"</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// é»˜è®¤çš„</span>  <span class="token comment" spellcheck="true">// `onUploadProgress` å…è®¸ä¸ºä¸Šä¼ å¤„ç†è¿›åº¦äº‹ä»¶</span>  onUploadProgress<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>progressEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å¯¹åŸç”Ÿè¿›åº¦äº‹ä»¶çš„å¤„ç†</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `onDownloadProgress` å…è®¸ä¸ºä¸‹è½½å¤„ç†è¿›åº¦äº‹ä»¶</span>  onDownloadProgress<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>progressEvent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å¯¹åŸç”Ÿè¿›åº¦äº‹ä»¶çš„å¤„ç†</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `maxContentLength` å®šä¹‰å…è®¸çš„å“åº”å†…å®¹çš„æœ€å¤§å°ºå¯¸</span>  maxContentLength<span class="token punctuation">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `validateStatus` å®šä¹‰å¯¹äºç»™å®šçš„HTTP å“åº”çŠ¶æ€ç æ˜¯ resolve æˆ– reject  promise ã€‚å¦‚æœ `validateStatus` è¿”å› `true` (æˆ–è€…è®¾ç½®ä¸º `null` æˆ– `undefined`)ï¼Œpromise å°†è¢« resolve; å¦åˆ™ï¼Œpromise å°†è¢« rejecte</span>  validateStatus<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é»˜è®¤çš„</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `maxRedirects` å®šä¹‰åœ¨ node.js ä¸­ follow çš„æœ€å¤§é‡å®šå‘æ•°ç›®</span>  <span class="token comment" spellcheck="true">// å¦‚æœè®¾ç½®ä¸º0ï¼Œå°†ä¸ä¼š follow ä»»ä½•é‡å®šå‘</span>  maxRedirects<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">// é»˜è®¤çš„</span>  <span class="token comment" spellcheck="true">// `httpAgent` å’Œ `httpsAgent` åˆ†åˆ«åœ¨ node.js ä¸­ç”¨äºå®šä¹‰åœ¨æ‰§è¡Œ http å’Œ https æ—¶ä½¿ç”¨çš„è‡ªå®šä¹‰ä»£ç†ã€‚å…è®¸åƒè¿™æ ·é…ç½®é€‰é¡¹ï¼š</span>  <span class="token comment" spellcheck="true">// `keepAlive` é»˜è®¤æ²¡æœ‰å¯ç”¨</span>  httpAgent<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">http<span class="token punctuation">.</span>Agent</span><span class="token punctuation">(</span><span class="token punctuation">{</span> keepAlive<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  httpsAgent<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">https<span class="token punctuation">.</span>Agent</span><span class="token punctuation">(</span><span class="token punctuation">{</span> keepAlive<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// "proxy" å®šä¹‰ä»£ç†æœåŠ¡å™¨çš„ä¸»æœºåç§°å’Œç«¯å£</span>  <span class="token comment" spellcheck="true">// `auth` è¡¨ç¤º HTTP åŸºç¡€éªŒè¯åº”å½“ç”¨äºè¿æ¥ä»£ç†ï¼Œå¹¶æä¾›å‡­æ®</span>  <span class="token comment" spellcheck="true">// è¿™å°†ä¼šè®¾ç½®ä¸€ä¸ª `Proxy-Authorization` å¤´ï¼Œè¦†å†™æ‰å·²æœ‰çš„é€šè¿‡ä½¿ç”¨ `header` è®¾ç½®çš„è‡ªå®šä¹‰ `Proxy-Authorization` å¤´ã€‚</span>  proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>    host<span class="token punctuation">:</span> <span class="token string">"127.0.0.1"</span><span class="token punctuation">,</span>    port<span class="token punctuation">:</span> <span class="token number">9000</span><span class="token punctuation">,</span>    auth<span class="token punctuation">:</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span>      username<span class="token punctuation">:</span> <span class="token string">"mikeymike"</span><span class="token punctuation">,</span>      password<span class="token punctuation">:</span> <span class="token string">"rapunz3l"</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `cancelToken` æŒ‡å®šç”¨äºå–æ¶ˆè¯·æ±‚çš„ cancel token</span>  <span class="token comment" spellcheck="true">// ï¼ˆæŸ¥çœ‹åé¢çš„ Cancellation è¿™èŠ‚äº†è§£æ›´å¤šï¼‰</span>  cancelToken<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">CancelToken</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>cancel<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h3 id="å“åº”ç»“æ„"><a href="#å“åº”ç»“æ„" class="headerlink" title="å“åº”ç»“æ„"></a>å“åº”ç»“æ„</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// `data` ç”±æœåŠ¡å™¨æä¾›çš„å“åº”</span>  data<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `status`  HTTP çŠ¶æ€ç </span>  status<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `statusText` æ¥è‡ªæœåŠ¡å™¨å“åº”çš„ HTTP çŠ¶æ€ä¿¡æ¯</span>  statusText<span class="token punctuation">:</span> <span class="token string">"OK"</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `headers` æœåŠ¡å™¨å“åº”çš„å¤´</span>  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">// `config` æ˜¯ä¸ºè¯·æ±‚æä¾›çš„é…ç½®ä¿¡æ¯</span>  config<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="é…ç½®çš„é»˜è®¤å€¼"><a href="#é…ç½®çš„é»˜è®¤å€¼" class="headerlink" title="é…ç½®çš„é»˜è®¤å€¼"></a>é…ç½®çš„é»˜è®¤å€¼</h3><p>ä½ å¯ä»¥æŒ‡å®šå°†è¢«ç”¨åœ¨å„ä¸ªè¯·æ±‚çš„é…ç½®é»˜è®¤å€¼ã€‚<br>å…¨å±€çš„ axios é»˜è®¤å€¼ï¼š</p><pre class=" language-javascript"><code class="language-javascript">axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">"https://api.example.com"</span><span class="token punctuation">;</span>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">"Authorization"</span><span class="token punctuation">]</span> <span class="token operator">=</span> AUTH_TOKEN<span class="token punctuation">;</span>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>post<span class="token punctuation">[</span><span class="token string">"Content-Type"</span><span class="token punctuation">]</span> <span class="token operator">=</span>  <span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">;</span></code></pre><p>è‡ªå®šä¹‰å®ä¾‹é»˜è®¤å€¼ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// åˆ›å»ºå®ä¾‹æ—¶è®¾ç½®é…ç½®çš„é»˜è®¤å€¼</span><span class="token keyword">var</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  baseURL<span class="token punctuation">:</span> <span class="token string">"https://api.example.com"</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// åœ¨å®ä¾‹å·²åˆ›å»ºåä¿®æ”¹é»˜è®¤å€¼</span>instance<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>common<span class="token punctuation">[</span><span class="token string">"Authorization"</span><span class="token punctuation">]</span> <span class="token operator">=</span> AUTH_TOKEN<span class="token punctuation">;</span></code></pre><h2 id="é…ç½®çš„ä¼˜å…ˆé¡ºåº"><a href="#é…ç½®çš„ä¼˜å…ˆé¡ºåº" class="headerlink" title="é…ç½®çš„ä¼˜å…ˆé¡ºåº"></a>é…ç½®çš„ä¼˜å…ˆé¡ºåº</h2><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// ä½¿ç”¨ç”±åº“æä¾›çš„é…ç½®çš„é»˜è®¤å€¼æ¥åˆ›å»ºå®ä¾‹</span><span class="token comment" spellcheck="true">// æ­¤æ—¶è¶…æ—¶é…ç½®çš„é»˜è®¤å€¼æ˜¯ `0`</span><span class="token keyword">var</span> instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// è¦†å†™åº“çš„è¶…æ—¶é»˜è®¤å€¼</span><span class="token comment" spellcheck="true">// ç°åœ¨ï¼Œåœ¨è¶…æ—¶å‰ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šç­‰å¾… 2.5 ç§’</span>instance<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">2500</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// ä¸ºå·²çŸ¥éœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´çš„è¯·æ±‚è¦†å†™è¶…æ—¶è®¾ç½®</span>instance<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"/longRequest"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  timeout<span class="token punctuation">:</span> <span class="token number">5000</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h2><p>åœ¨è¯·æ±‚æˆ–å“åº”è¢« then æˆ– catch å¤„ç†å‰æ‹¦æˆªå®ƒä»¬ã€‚</p><h1 id="Ajax-vue-resource"><a href="#Ajax-vue-resource" class="headerlink" title="Ajax(vue-resource)"></a>Ajax(vue-resource)</h1><h3 id="Get-è¯·æ±‚"><a href="#Get-è¯·æ±‚" class="headerlink" title="Get è¯·æ±‚"></a>Get è¯·æ±‚</h3><pre class=" language-javascript"><code class="language-javascript">window<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      msg<span class="token punctuation">:</span> <span class="token string">"Hello World!"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>      <span class="token keyword">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å‘é€getè¯·æ±‚</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$http<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">"/try/ajax/ajax_info.txt"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>          <span class="token keyword">function</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>            document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"è¯·æ±‚å¤±è´¥å¤„ç†"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="post-è¯·æ±‚"><a href="#post-è¯·æ±‚" class="headerlink" title="post è¯·æ±‚"></a>post è¯·æ±‚</h3><p>post å‘é€æ•°æ®åˆ°åç«¯ï¼Œéœ€è¦ç¬¬ä¸‰ä¸ªå‚æ•°**&nbsp;{emulateJSON:true}**ã€‚<br>emulateJSON çš„ä½œç”¨ï¼š å¦‚æœ Web æœåŠ¡å™¨æ— æ³•å¤„ç†ç¼–ç ä¸º application/json çš„è¯·æ±‚ï¼Œä½ å¯ä»¥å¯ç”¨ emulateJSON é€‰é¡¹ã€‚</p><pre class=" language-javascript"><code class="language-javascript">window<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    el<span class="token punctuation">:</span> <span class="token string">"#box"</span><span class="token punctuation">,</span>    data<span class="token punctuation">:</span> <span class="token punctuation">{</span>      msg<span class="token punctuation">:</span> <span class="token string">"Hello World!"</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>      post<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//å‘é€ post è¯·æ±‚</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$http          <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>            <span class="token string">"/try/ajax/demo_test_post.php"</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"èœé¸Ÿæ•™ç¨‹"</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token string">"http://www.runoob.com"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">{</span> emulateJSON<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>          <span class="token punctuation">)</span>          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>            <span class="token keyword">function</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>              document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token keyword">function</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>          <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> nodejs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ é™¤ systemd journal æ—¥å¿—</title>
      <link href="/2020/01/06/shan-chu-systemd-journal-ri-zhi/"/>
      <url>/2020/01/06/shan-chu-systemd-journal-ri-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="æŸ¥çœ‹ç°æœ‰çš„-journal-æ—¥å¿—"><a href="#æŸ¥çœ‹ç°æœ‰çš„-journal-æ—¥å¿—" class="headerlink" title="æŸ¥çœ‹ç°æœ‰çš„ journal æ—¥å¿—"></a>æŸ¥çœ‹ç°æœ‰çš„ journal æ—¥å¿—</h2><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æŸ¥çœ‹æ—¥å¿—çš„å¤§å°</span>$ <span class="token function">du</span> -hs /var/log/journal/4.1G    /var/log/journal/<span class="token comment" spellcheck="true"># 4.1GB worth of journal files, with the oldest dating back over 2 months.</span><span class="token comment" spellcheck="true"># æŸ¥çœ‹æœ€å¤§çš„æ—¥å¿—æ–‡ä»¶</span>$ <span class="token function">ls</span> -lath /var/log/journal/*/ <span class="token operator">|</span> <span class="token function">tail</span> -n 2-rw-r-x---+ 1 root systemd-journal 8.0M Dec 24 05:15 user-xxx.journal</code></pre><h2 id="åˆ é™¤-10-å¤©ä¹‹å‰çš„-systemd-journals-æ—¥å¿—"><a href="#åˆ é™¤-10-å¤©ä¹‹å‰çš„-systemd-journals-æ—¥å¿—" class="headerlink" title="åˆ é™¤ 10 å¤©ä¹‹å‰çš„ systemd journals æ—¥å¿—"></a>åˆ é™¤ 10 å¤©ä¹‹å‰çš„ systemd journals æ—¥å¿—</h2><pre class=" language-bash"><code class="language-bash">$ journalctl --vacuum-time<span class="token operator">=</span>10d<span class="token punctuation">..</span>.Vacuuming done, freed 2.3G of archived journals on disk.</code></pre><h2 id="æ ¹æ®æ–‡ä»¶å¤§å°åˆ é™¤-systemd-journals"><a href="#æ ¹æ®æ–‡ä»¶å¤§å°åˆ é™¤-systemd-journals" class="headerlink" title="æ ¹æ®æ–‡ä»¶å¤§å°åˆ é™¤ systemd journals"></a>æ ¹æ®æ–‡ä»¶å¤§å°åˆ é™¤ systemd journals</h2><pre class=" language-bash"><code class="language-bash">$ journalctl --vacuum-size<span class="token operator">=</span>2G<span class="token punctuation">..</span>.Vacuuming done, freed 720.0M of archived journals on disk.</code></pre>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> systemd </tag>
            
            <tag> log </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
